(()=>{var Ga=Object.create;var jt=Object.defineProperty;var Pa=Object.getOwnPropertyDescriptor;var Ia=Object.getOwnPropertyNames;var Oa=Object.getPrototypeOf,Ra=Object.prototype.hasOwnProperty;var Da=(p,y,u)=>y in p?jt(p,y,{enumerable:!0,configurable:!0,writable:!0,value:u}):p[y]=u;var Na=p=>jt(p,"__esModule",{value:!0});var $e=(p,y)=>()=>(y||p((y={exports:{}}).exports,y),y.exports);var Ba=(p,y,u,r)=>{if(y&&typeof y=="object"||typeof y=="function")for(let l of Ia(y))!Ra.call(p,l)&&(u||l!=="default")&&jt(p,l,{get:()=>y[l],enumerable:!(r=Pa(y,l))||r.enumerable});return p},ht=(p,y)=>Ba(Na(jt(p!=null?Ga(Oa(p)):{},"default",!y&&p&&p.__esModule?{get:()=>p.default,enumerable:!0}:{value:p,enumerable:!0})),p);var lt=(p,y,u)=>(Da(p,typeof y!="symbol"?y+"":y,u),u);var cr=$e((hs,ur)=>{"use strict";var fr=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,Ha=Object.prototype.propertyIsEnumerable;function Wa(p){if(p==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}function Fa(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de",Object.getOwnPropertyNames(p)[0]==="5")return!1;for(var y={},u=0;u<10;u++)y["_"+String.fromCharCode(u)]=u;var r=Object.getOwnPropertyNames(y).map(function(t){return y[t]});if(r.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(t){l[t]=t}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ur.exports=Fa()?Object.assign:function(p,y){for(var u,r=Wa(p),l,t=1;t<arguments.length;t++){u=Object(arguments[t]);for(var a in u)Ua.call(u,a)&&(r[a]=u[a]);if(fr){l=fr(u);for(var h=0;h<l.length;h++)Ha.call(u,l[h])&&(r[l[h]]=u[l[h]])}}return r}});var Lr=$e(Fe=>{"use strict";var Si=cr(),Rt=60103,mr=60106;Fe.Fragment=60107;Fe.StrictMode=60108;Fe.Profiler=60114;var _r=60109,yr=60110,xr=60112;Fe.Suspense=60113;var vr=60115,gr=60116;typeof Symbol=="function"&&Symbol.for&&(dt=Symbol.for,Rt=dt("react.element"),mr=dt("react.portal"),Fe.Fragment=dt("react.fragment"),Fe.StrictMode=dt("react.strict_mode"),Fe.Profiler=dt("react.profiler"),_r=dt("react.provider"),yr=dt("react.context"),xr=dt("react.forward_ref"),Fe.Suspense=dt("react.suspense"),vr=dt("react.memo"),gr=dt("react.lazy"));var dt,dr=typeof Symbol=="function"&&Symbol.iterator;function Ya(p){return p===null||typeof p!="object"?null:(p=dr&&p[dr]||p["@@iterator"],typeof p=="function"?p:null)}function Ft(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,u=1;u<arguments.length;u++)y+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var br={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wr={};function Dt(p,y,u){this.props=p,this.context=y,this.refs=wr,this.updater=u||br}Dt.prototype.isReactComponent={};Dt.prototype.setState=function(p,y){if(typeof p!="object"&&typeof p!="function"&&p!=null)throw Error(Ft(85));this.updater.enqueueSetState(this,p,y,"setState")};Dt.prototype.forceUpdate=function(p){this.updater.enqueueForceUpdate(this,p,"forceUpdate")};function kr(){}kr.prototype=Dt.prototype;function Ei(p,y,u){this.props=p,this.context=y,this.refs=wr,this.updater=u||br}var Mi=Ei.prototype=new kr;Mi.constructor=Ei;Si(Mi,Dt.prototype);Mi.isPureReactComponent=!0;var Ai={current:null},Sr=Object.prototype.hasOwnProperty,Er={key:!0,ref:!0,__self:!0,__source:!0};function Mr(p,y,u){var r,l={},t=null,a=null;if(y!=null)for(r in y.ref!==void 0&&(a=y.ref),y.key!==void 0&&(t=""+y.key),y)Sr.call(y,r)&&!Er.hasOwnProperty(r)&&(l[r]=y[r]);var h=arguments.length-2;if(h===1)l.children=u;else if(1<h){for(var s=Array(h),c=0;c<h;c++)s[c]=arguments[c+2];l.children=s}if(p&&p.defaultProps)for(r in h=p.defaultProps,h)l[r]===void 0&&(l[r]=h[r]);return{$$typeof:Rt,type:p,key:t,ref:a,props:l,_owner:Ai.current}}function Xa(p,y){return{$$typeof:Rt,type:p.type,key:y,ref:p.ref,props:p.props,_owner:p._owner}}function Li(p){return typeof p=="object"&&p!==null&&p.$$typeof===Rt}function qa(p){var y={"=":"=0",":":"=2"};return"$"+p.replace(/[=:]/g,function(u){return y[u]})}var pr=/\/+/g;function ki(p,y){return typeof p=="object"&&p!==null&&p.key!=null?qa(""+p.key):y.toString(36)}function ei(p,y,u,r,l){var t=typeof p;(t==="undefined"||t==="boolean")&&(p=null);var a=!1;if(p===null)a=!0;else switch(t){case"string":case"number":a=!0;break;case"object":switch(p.$$typeof){case Rt:case mr:a=!0}}if(a)return a=p,l=l(a),p=r===""?"."+ki(a,0):r,Array.isArray(l)?(u="",p!=null&&(u=p.replace(pr,"$&/")+"/"),ei(l,y,u,"",function(c){return c})):l!=null&&(Li(l)&&(l=Xa(l,u+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(pr,"$&/")+"/")+p)),y.push(l)),1;if(a=0,r=r===""?".":r+":",Array.isArray(p))for(var h=0;h<p.length;h++){t=p[h];var s=r+ki(t,h);a+=ei(t,y,u,s,l)}else if(s=Ya(p),typeof s=="function")for(p=s.call(p),h=0;!(t=p.next()).done;)t=t.value,s=r+ki(t,h++),a+=ei(t,y,u,s,l);else if(t==="object")throw y=""+p,Error(Ft(31,y==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":y));return a}function Qt(p,y,u){if(p==null)return p;var r=[],l=0;return ei(p,r,"","",function(t){return y.call(u,t,l++)}),r}function Va(p){if(p._status===-1){var y=p._result;y=y(),p._status=0,p._result=y,y.then(function(u){p._status===0&&(u=u.default,p._status=1,p._result=u)},function(u){p._status===0&&(p._status=2,p._result=u)})}if(p._status===1)return p._result;throw p._result}var Ar={current:null};function wt(){var p=Ar.current;if(p===null)throw Error(Ft(321));return p}var $a={ReactCurrentDispatcher:Ar,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Ai,IsSomeRendererActing:{current:!1},assign:Si};Fe.Children={map:Qt,forEach:function(p,y,u){Qt(p,function(){y.apply(this,arguments)},u)},count:function(p){var y=0;return Qt(p,function(){y++}),y},toArray:function(p){return Qt(p,function(y){return y})||[]},only:function(p){if(!Li(p))throw Error(Ft(143));return p}};Fe.Component=Dt;Fe.PureComponent=Ei;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$a;Fe.cloneElement=function(p,y,u){if(p==null)throw Error(Ft(267,p));var r=Si({},p.props),l=p.key,t=p.ref,a=p._owner;if(y!=null){if(y.ref!==void 0&&(t=y.ref,a=Ai.current),y.key!==void 0&&(l=""+y.key),p.type&&p.type.defaultProps)var h=p.type.defaultProps;for(s in y)Sr.call(y,s)&&!Er.hasOwnProperty(s)&&(r[s]=y[s]===void 0&&h!==void 0?h[s]:y[s])}var s=arguments.length-2;if(s===1)r.children=u;else if(1<s){h=Array(s);for(var c=0;c<s;c++)h[c]=arguments[c+2];r.children=h}return{$$typeof:Rt,type:p.type,key:l,ref:t,props:r,_owner:a}};Fe.createContext=function(p,y){return y===void 0&&(y=null),p={$$typeof:yr,_calculateChangedBits:y,_currentValue:p,_currentValue2:p,_threadCount:0,Provider:null,Consumer:null},p.Provider={$$typeof:_r,_context:p},p.Consumer=p};Fe.createElement=Mr;Fe.createFactory=function(p){var y=Mr.bind(null,p);return y.type=p,y};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(p){return{$$typeof:xr,render:p}};Fe.isValidElement=Li;Fe.lazy=function(p){return{$$typeof:gr,_payload:{_status:-1,_result:p},_init:Va}};Fe.memo=function(p,y){return{$$typeof:vr,type:p,compare:y===void 0?null:y}};Fe.useCallback=function(p,y){return wt().useCallback(p,y)};Fe.useContext=function(p,y){return wt().useContext(p,y)};Fe.useDebugValue=function(){};Fe.useEffect=function(p,y){return wt().useEffect(p,y)};Fe.useImperativeHandle=function(p,y,u){return wt().useImperativeHandle(p,y,u)};Fe.useLayoutEffect=function(p,y){return wt().useLayoutEffect(p,y)};Fe.useMemo=function(p,y){return wt().useMemo(p,y)};Fe.useReducer=function(p,y,u){return wt().useReducer(p,y,u)};Fe.useRef=function(p){return wt().useRef(p)};Fe.useState=function(p){return wt().useState(p)};Fe.version="17.0.2"});var kt=$e((us,Cr)=>{"use strict";Cr.exports=Lr()});var Tr=$e((cs,zr)=>{"use strict";var Ka="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";zr.exports=Ka});var Or=$e((ds,Ir)=>{"use strict";var Ja=Tr();function Gr(){}function Pr(){}Pr.resetWarningCache=Gr;Ir.exports=function(){function p(r,l,t,a,h,s){if(s!==Ja){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}p.isRequired=p;function y(){return p}var u={array:p,bigint:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:y,element:p,elementType:p,instanceOf:y,node:p,objectOf:y,oneOf:y,oneOfType:y,shape:y,exact:y,checkPropTypes:Pr,resetWarningCache:Gr};return u.PropTypes=u,u}});var Nt=$e((_s,Rr)=>{Rr.exports=Or()();var ps,ms});var Ti=$e((Ci,zi)=>{(function(p,y){typeof Ci=="object"&&typeof zi<"u"?zi.exports=y():typeof define=="function"&&define.amd?define("underscore",y):(p=typeof globalThis<"u"?globalThis:p||self,function(){var u=p._,r=p._=y();r.noConflict=function(){return p._=u,r}}())})(Ci,function(){var p="1.13.2",y=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},u=Array.prototype,r=Object.prototype,l=typeof Symbol<"u"?Symbol.prototype:null,t=u.push,a=u.slice,h=r.toString,s=r.hasOwnProperty,c=typeof ArrayBuffer<"u",_=typeof DataView<"u",g=Array.isArray,P=Object.keys,U=Object.create,B=c&&ArrayBuffer.isView,Z=isNaN,oe=isFinite,ae=!{toString:null}.propertyIsEnumerable("toString"),Ae=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ue=Math.pow(2,53)-1;function be(x,G){return G=G==null?x.length-1:+G,function(){for(var H=Math.max(arguments.length-G,0),F=Array(H),J=0;J<H;J++)F[J]=arguments[J+G];switch(G){case 0:return x.call(this,F);case 1:return x.call(this,arguments[0],F);case 2:return x.call(this,arguments[0],arguments[1],F)}var $=Array(G+1);for(J=0;J<G;J++)$[J]=arguments[J];return $[G]=F,x.apply(this,$)}}function Ee(x){var G=typeof x;return G==="function"||G==="object"&&!!x}function Me(x){return x===null}function Be(x){return x===void 0}function ve(x){return x===!0||x===!1||h.call(x)==="[object Boolean]"}function Ke(x){return!!(x&&x.nodeType===1)}function Ie(x){var G="[object "+x+"]";return function(H){return h.call(H)===G}}var Je=Ie("String"),Ze=Ie("Number"),et=Ie("Date"),tt=Ie("RegExp"),it=Ie("Error"),n=Ie("Symbol"),o=Ie("ArrayBuffer"),m=Ie("Function"),S=y.document&&y.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof S!="function"&&(m=function(x){return typeof x=="function"||!1});var C=m,v=Ie("Object"),k=_&&v(new DataView(new ArrayBuffer(8))),A=typeof Map<"u"&&v(new Map),z=Ie("DataView");function T(x){return x!=null&&C(x.getInt8)&&o(x.buffer)}var I=k?T:z,D=g||Ie("Array");function L(x,G){return x!=null&&s.call(x,G)}var Y=Ie("Arguments");(function(){Y(arguments)||(Y=function(x){return L(x,"callee")})})();var ie=Y;function ne(x){return!n(x)&&oe(x)&&!isNaN(parseFloat(x))}function E(x){return Ze(x)&&Z(x)}function N(x){return function(){return x}}function R(x){return function(G){var H=x(G);return typeof H=="number"&&H>=0&&H<=ue}}function V(x){return function(G){return G==null?void 0:G[x]}}var te=V("byteLength"),Q=R(te),fe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function me(x){return B?B(x)&&!I(x):Q(x)&&fe.test(h.call(x))}var we=c?me:N(!1),Se=V("length");function pe(x){for(var G={},H=x.length,F=0;F<H;++F)G[x[F]]=!0;return{contains:function(J){return G[J]===!0},push:function(J){return G[J]=!0,x.push(J)}}}function ke(x,G){G=pe(G);var H=Ae.length,F=x.constructor,J=C(F)&&F.prototype||r,$="constructor";for(L(x,$)&&!G.contains($)&&G.push($);H--;)$=Ae[H],$ in x&&x[$]!==J[$]&&!G.contains($)&&G.push($)}function _e(x){if(!Ee(x))return[];if(P)return P(x);var G=[];for(var H in x)L(x,H)&&G.push(H);return ae&&ke(x,G),G}function Ce(x){if(x==null)return!0;var G=Se(x);return typeof G=="number"&&(D(x)||Je(x)||ie(x))?G===0:Se(_e(x))===0}function Le(x,G){var H=_e(G),F=H.length;if(x==null)return!F;for(var J=Object(x),$=0;$<F;$++){var se=H[$];if(G[se]!==J[se]||!(se in J))return!1}return!0}function ge(x){if(x instanceof ge)return x;if(!(this instanceof ge))return new ge(x);this._wrapped=x}ge.VERSION=p,ge.prototype.value=function(){return this._wrapped},ge.prototype.valueOf=ge.prototype.toJSON=ge.prototype.value,ge.prototype.toString=function(){return String(this._wrapped)};function He(x){return new Uint8Array(x.buffer||x,x.byteOffset||0,te(x))}var Ue="[object DataView]";function We(x,G,H,F){if(x===G)return x!==0||1/x===1/G;if(x==null||G==null)return!1;if(x!==x)return G!==G;var J=typeof x;return J!=="function"&&J!=="object"&&typeof G!="object"?!1:ze(x,G,H,F)}function ze(x,G,H,F){x instanceof ge&&(x=x._wrapped),G instanceof ge&&(G=G._wrapped);var J=h.call(x);if(J!==h.call(G))return!1;if(k&&J=="[object Object]"&&I(x)){if(!I(G))return!1;J=Ue}switch(J){case"[object RegExp]":case"[object String]":return""+x==""+G;case"[object Number]":return+x!=+x?+G!=+G:+x==0?1/+x===1/G:+x==+G;case"[object Date]":case"[object Boolean]":return+x==+G;case"[object Symbol]":return l.valueOf.call(x)===l.valueOf.call(G);case"[object ArrayBuffer]":case Ue:return ze(He(x),He(G),H,F)}var $=J==="[object Array]";if(!$&&we(x)){var se=te(x);if(se!==te(G))return!1;if(x.buffer===G.buffer&&x.byteOffset===G.byteOffset)return!0;$=!0}if(!$){if(typeof x!="object"||typeof G!="object")return!1;var ye=x.constructor,De=G.constructor;if(ye!==De&&!(C(ye)&&ye instanceof ye&&C(De)&&De instanceof De)&&"constructor"in x&&"constructor"in G)return!1}H=H||[],F=F||[];for(var Pe=H.length;Pe--;)if(H[Pe]===x)return F[Pe]===G;if(H.push(x),F.push(G),$){if(Pe=x.length,Pe!==G.length)return!1;for(;Pe--;)if(!We(x[Pe],G[Pe],H,F))return!1}else{var nt=_e(x),ot;if(Pe=nt.length,_e(G).length!==Pe)return!1;for(;Pe--;)if(ot=nt[Pe],!(L(G,ot)&&We(x[ot],G[ot],H,F)))return!1}return H.pop(),F.pop(),!0}function ft(x,G){return We(x,G)}function rt(x){if(!Ee(x))return[];var G=[];for(var H in x)G.push(H);return ae&&ke(x,G),G}function je(x){var G=Se(x);return function(H){if(H==null)return!1;var F=rt(H);if(Se(F))return!1;for(var J=0;J<G;J++)if(!C(H[x[J]]))return!1;return x!==w||!C(H[Xe])}}var Xe="forEach",i="has",e=["clear","delete"],d=["get",i,"set"],f=e.concat(Xe,d),w=e.concat(d),b=["add"].concat(e,Xe,i),M=A?je(f):Ie("Map"),O=A?je(w):Ie("WeakMap"),q=A?je(b):Ie("Set"),ee=Ie("WeakSet");function re(x){for(var G=_e(x),H=G.length,F=Array(H),J=0;J<H;J++)F[J]=x[G[J]];return F}function he(x){for(var G=_e(x),H=G.length,F=Array(H),J=0;J<H;J++)F[J]=[G[J],x[G[J]]];return F}function le(x){for(var G={},H=_e(x),F=0,J=H.length;F<J;F++)G[x[H[F]]]=H[F];return G}function K(x){var G=[];for(var H in x)C(x[H])&&G.push(H);return G.sort()}function j(x,G){return function(H){var F=arguments.length;if(G&&(H=Object(H)),F<2||H==null)return H;for(var J=1;J<F;J++)for(var $=arguments[J],se=x($),ye=se.length,De=0;De<ye;De++){var Pe=se[De];(!G||H[Pe]===void 0)&&(H[Pe]=$[Pe])}return H}}var xe=j(rt),ce=j(_e),Ne=j(rt,!0);function Oe(){return function(){}}function Te(x){if(!Ee(x))return{};if(U)return U(x);var G=Oe();G.prototype=x;var H=new G;return G.prototype=null,H}function qe(x,G){var H=Te(x);return G&&ce(H,G),H}function Ye(x){return Ee(x)?D(x)?x.slice():xe({},x):x}function X(x,G){return G(x),x}function W(x){return D(x)?x:[x]}ge.toPath=W;function de(x){return ge.toPath(x)}function Ge(x,G){for(var H=G.length,F=0;F<H;F++){if(x==null)return;x=x[G[F]]}return H?x:void 0}function Re(x,G,H){var F=Ge(x,de(G));return Be(F)?H:F}function Ve(x,G){G=de(G);for(var H=G.length,F=0;F<H;F++){var J=G[F];if(!L(x,J))return!1;x=x[J]}return!!H}function Qe(x){return x}function _t(x){return x=ce({},x),function(G){return Le(G,x)}}function Ut(x){return x=de(x),function(G){return Ge(G,x)}}function Lt(x,G,H){if(G===void 0)return x;switch(H??3){case 1:return function(F){return x.call(G,F)};case 3:return function(F,J,$){return x.call(G,F,J,$)};case 4:return function(F,J,$,se){return x.call(G,F,J,$,se)}}return function(){return x.apply(G,arguments)}}function Kt(x,G,H){return x==null?Qe:C(x)?Lt(x,G,H):Ee(x)&&!D(x)?_t(x):Ut(x)}function Ht(x,G){return Kt(x,G,1/0)}ge.iteratee=Ht;function st(x,G,H){return ge.iteratee!==Ht?ge.iteratee(x,G):Kt(x,G,H)}function Pt(x,G,H){G=st(G,H);for(var F=_e(x),J=F.length,$={},se=0;se<J;se++){var ye=F[se];$[ye]=G(x[ye],ye,x)}return $}function Ct(){}function On(x){return x==null?Ct:function(G){return Re(x,G)}}function Rn(x,G,H){var F=Array(Math.max(0,x));G=Lt(G,H,1);for(var J=0;J<x;J++)F[J]=G(J);return F}function ui(x,G){return G==null&&(G=x,x=0),x+Math.floor(Math.random()*(G-x+1))}var Wt=Date.now||function(){return new Date().getTime()};function Bi(x){var G=function($){return x[$]},H="(?:"+_e(x).join("|")+")",F=RegExp(H),J=RegExp(H,"g");return function($){return $=$==null?"":""+$,F.test($)?$.replace(J,G):$}}var Ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Dn=Bi(Ui),Nn=le(Ui),Bn=Bi(Nn),Un=ge.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ci=/(.)^/,Hn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Wn=/\\|'|\r|\n|\u2028|\u2029/g;function Fn(x){return"\\"+Hn[x]}var Yn=/^\s*(\w|\$)+\s*$/;function Xn(x,G,H){!G&&H&&(G=H),G=Ne({},G,ge.templateSettings);var F=RegExp([(G.escape||ci).source,(G.interpolate||ci).source,(G.evaluate||ci).source].join("|")+"|$","g"),J=0,$="__p+='";x.replace(F,function(Pe,nt,ot,lr,hr){return $+=x.slice(J,hr).replace(Wn,Fn),J=hr+Pe.length,nt?$+=`'+
((__t=(`+nt+`))==null?'':_.escape(__t))+
'`:ot?$+=`'+
((__t=(`+ot+`))==null?'':__t)+
'`:lr&&($+=`';
`+lr+`
__p+='`),Pe}),$+=`';
`;var se=G.variable;if(se){if(!Yn.test(se))throw new Error("variable is not a bare identifier: "+se)}else $=`with(obj||{}){
`+$+`}
`,se="obj";$=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+$+`return __p;
`;var ye;try{ye=new Function(se,"_",$)}catch(Pe){throw Pe.source=$,Pe}var De=function(Pe){return ye.call(this,Pe,ge)};return De.source="function("+se+`){
`+$+"}",De}function qn(x,G,H){G=de(G);var F=G.length;if(!F)return C(H)?H.call(x):H;for(var J=0;J<F;J++){var $=x==null?void 0:x[G[J]];$===void 0&&($=H,J=F),x=C($)?$.call(x):$}return x}var Vn=0;function $n(x){var G=++Vn+"";return x?x+G:G}function Kn(x){var G=ge(x);return G._chain=!0,G}function Hi(x,G,H,F,J){if(!(F instanceof G))return x.apply(H,J);var $=Te(x.prototype),se=x.apply($,J);return Ee(se)?se:$}var It=be(function(x,G){var H=It.placeholder,F=function(){for(var J=0,$=G.length,se=Array($),ye=0;ye<$;ye++)se[ye]=G[ye]===H?arguments[J++]:G[ye];for(;J<arguments.length;)se.push(arguments[J++]);return Hi(x,F,this,this,se)};return F});It.placeholder=ge;var Wi=be(function(x,G,H){if(!C(x))throw new TypeError("Bind must be called on a function");var F=be(function(J){return Hi(x,F,G,this,H.concat(J))});return F}),ut=R(Se);function zt(x,G,H,F){if(F=F||[],!G&&G!==0)G=1/0;else if(G<=0)return F.concat(x);for(var J=F.length,$=0,se=Se(x);$<se;$++){var ye=x[$];if(ut(ye)&&(D(ye)||ie(ye)))if(G>1)zt(ye,G-1,H,F),J=F.length;else for(var De=0,Pe=ye.length;De<Pe;)F[J++]=ye[De++];else H||(F[J++]=ye)}return F}var Jn=be(function(x,G){G=zt(G,!1,!1);var H=G.length;if(H<1)throw new Error("bindAll must be passed function names");for(;H--;){var F=G[H];x[F]=Wi(x[F],x)}return x});function Zn(x,G){var H=function(F){var J=H.cache,$=""+(G?G.apply(this,arguments):F);return L(J,$)||(J[$]=x.apply(this,arguments)),J[$]};return H.cache={},H}var Fi=be(function(x,G,H){return setTimeout(function(){return x.apply(null,H)},G)}),jn=It(Fi,ge,1);function Qn(x,G,H){var F,J,$,se,ye=0;H||(H={});var De=function(){ye=H.leading===!1?0:Wt(),F=null,se=x.apply(J,$),F||(J=$=null)},Pe=function(){var nt=Wt();!ye&&H.leading===!1&&(ye=nt);var ot=G-(nt-ye);return J=this,$=arguments,ot<=0||ot>G?(F&&(clearTimeout(F),F=null),ye=nt,se=x.apply(J,$),F||(J=$=null)):!F&&H.trailing!==!1&&(F=setTimeout(De,ot)),se};return Pe.cancel=function(){clearTimeout(F),ye=0,F=J=$=null},Pe}function ea(x,G,H){var F,J,$,se,ye,De=function(){var nt=Wt()-J;G>nt?F=setTimeout(De,G-nt):(F=null,H||(se=x.apply(ye,$)),F||($=ye=null))},Pe=be(function(nt){return ye=this,$=nt,J=Wt(),F||(F=setTimeout(De,G),H&&(se=x.apply(ye,$))),se});return Pe.cancel=function(){clearTimeout(F),F=$=ye=null},Pe}function ta(x,G){return It(G,x)}function di(x){return function(){return!x.apply(this,arguments)}}function ia(){var x=arguments,G=x.length-1;return function(){for(var H=G,F=x[G].apply(this,arguments);H--;)F=x[H].call(this,F);return F}}function ra(x,G){return function(){if(--x<1)return G.apply(this,arguments)}}function Yi(x,G){var H;return function(){return--x>0&&(H=G.apply(this,arguments)),x<=1&&(G=null),H}}var na=It(Yi,2);function Xi(x,G,H){G=st(G,H);for(var F=_e(x),J,$=0,se=F.length;$<se;$++)if(J=F[$],G(x[J],J,x))return J}function qi(x){return function(G,H,F){H=st(H,F);for(var J=Se(G),$=x>0?0:J-1;$>=0&&$<J;$+=x)if(H(G[$],$,G))return $;return-1}}var pi=qi(1),Vi=qi(-1);function $i(x,G,H,F){H=st(H,F,1);for(var J=H(G),$=0,se=Se(x);$<se;){var ye=Math.floor(($+se)/2);H(x[ye])<J?$=ye+1:se=ye}return $}function Ki(x,G,H){return function(F,J,$){var se=0,ye=Se(F);if(typeof $=="number")x>0?se=$>=0?$:Math.max($+ye,se):ye=$>=0?Math.min($+1,ye):$+ye+1;else if(H&&$&&ye)return $=H(F,J),F[$]===J?$:-1;if(J!==J)return $=G(a.call(F,se,ye),E),$>=0?$+se:-1;for($=x>0?se:ye-1;$>=0&&$<ye;$+=x)if(F[$]===J)return $;return-1}}var Ji=Ki(1,pi,$i),aa=Ki(-1,Vi);function mi(x,G,H){var F=ut(x)?pi:Xi,J=F(x,G,H);if(J!==void 0&&J!==-1)return x[J]}function sa(x,G){return mi(x,_t(G))}function gt(x,G,H){G=Lt(G,H);var F,J;if(ut(x))for(F=0,J=x.length;F<J;F++)G(x[F],F,x);else{var $=_e(x);for(F=0,J=$.length;F<J;F++)G(x[$[F]],$[F],x)}return x}function Tt(x,G,H){G=st(G,H);for(var F=!ut(x)&&_e(x),J=(F||x).length,$=Array(J),se=0;se<J;se++){var ye=F?F[se]:se;$[se]=G(x[ye],ye,x)}return $}function Zi(x){var G=function(H,F,J,$){var se=!ut(H)&&_e(H),ye=(se||H).length,De=x>0?0:ye-1;for($||(J=H[se?se[De]:De],De+=x);De>=0&&De<ye;De+=x){var Pe=se?se[De]:De;J=F(J,H[Pe],Pe,H)}return J};return function(H,F,J,$){var se=arguments.length>=3;return G(H,Lt(F,$,4),J,se)}}var _i=Zi(1),ji=Zi(-1);function Ot(x,G,H){var F=[];return G=st(G,H),gt(x,function(J,$,se){G(J,$,se)&&F.push(J)}),F}function oa(x,G,H){return Ot(x,di(st(G)),H)}function Qi(x,G,H){G=st(G,H);for(var F=!ut(x)&&_e(x),J=(F||x).length,$=0;$<J;$++){var se=F?F[$]:$;if(!G(x[se],se,x))return!1}return!0}function er(x,G,H){G=st(G,H);for(var F=!ut(x)&&_e(x),J=(F||x).length,$=0;$<J;$++){var se=F?F[$]:$;if(G(x[se],se,x))return!0}return!1}function bt(x,G,H,F){return ut(x)||(x=re(x)),(typeof H!="number"||F)&&(H=0),Ji(x,G,H)>=0}var la=be(function(x,G,H){var F,J;return C(G)?J=G:(G=de(G),F=G.slice(0,-1),G=G[G.length-1]),Tt(x,function($){var se=J;if(!se){if(F&&F.length&&($=Ge($,F)),$==null)return;se=$[G]}return se==null?se:se.apply($,H)})});function yi(x,G){return Tt(x,Ut(G))}function ha(x,G){return Ot(x,_t(G))}function tr(x,G,H){var F=-1/0,J=-1/0,$,se;if(G==null||typeof G=="number"&&typeof x[0]!="object"&&x!=null){x=ut(x)?x:re(x);for(var ye=0,De=x.length;ye<De;ye++)$=x[ye],$!=null&&$>F&&(F=$)}else G=st(G,H),gt(x,function(Pe,nt,ot){se=G(Pe,nt,ot),(se>J||se===-1/0&&F===-1/0)&&(F=Pe,J=se)});return F}function fa(x,G,H){var F=1/0,J=1/0,$,se;if(G==null||typeof G=="number"&&typeof x[0]!="object"&&x!=null){x=ut(x)?x:re(x);for(var ye=0,De=x.length;ye<De;ye++)$=x[ye],$!=null&&$<F&&(F=$)}else G=st(G,H),gt(x,function(Pe,nt,ot){se=G(Pe,nt,ot),(se<J||se===1/0&&F===1/0)&&(F=Pe,J=se)});return F}var ua=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ir(x){return x?D(x)?a.call(x):Je(x)?x.match(ua):ut(x)?Tt(x,Qe):re(x):[]}function rr(x,G,H){if(G==null||H)return ut(x)||(x=re(x)),x[ui(x.length-1)];var F=ir(x),J=Se(F);G=Math.max(Math.min(G,J),0);for(var $=J-1,se=0;se<G;se++){var ye=ui(se,$),De=F[se];F[se]=F[ye],F[ye]=De}return F.slice(0,G)}function ca(x){return rr(x,1/0)}function da(x,G,H){var F=0;return G=st(G,H),yi(Tt(x,function(J,$,se){return{value:J,index:F++,criteria:G(J,$,se)}}).sort(function(J,$){var se=J.criteria,ye=$.criteria;if(se!==ye){if(se>ye||se===void 0)return 1;if(se<ye||ye===void 0)return-1}return J.index-$.index}),"value")}function Jt(x,G){return function(H,F,J){var $=G?[[],[]]:{};return F=st(F,J),gt(H,function(se,ye){var De=F(se,ye,H);x($,se,De)}),$}}var pa=Jt(function(x,G,H){L(x,H)?x[H].push(G):x[H]=[G]}),ma=Jt(function(x,G,H){x[H]=G}),_a=Jt(function(x,G,H){L(x,H)?x[H]++:x[H]=1}),ya=Jt(function(x,G,H){x[H?0:1].push(G)},!0);function xa(x){return x==null?0:ut(x)?x.length:_e(x).length}function va(x,G,H){return G in H}var nr=be(function(x,G){var H={},F=G[0];if(x==null)return H;C(F)?(G.length>1&&(F=Lt(F,G[1])),G=rt(x)):(F=va,G=zt(G,!1,!1),x=Object(x));for(var J=0,$=G.length;J<$;J++){var se=G[J],ye=x[se];F(ye,se,x)&&(H[se]=ye)}return H}),ga=be(function(x,G){var H=G[0],F;return C(H)?(H=di(H),G.length>1&&(F=G[1])):(G=Tt(zt(G,!1,!1),String),H=function(J,$){return!bt(G,$)}),nr(x,H,F)});function ar(x,G,H){return a.call(x,0,Math.max(0,x.length-(G==null||H?1:G)))}function xi(x,G,H){return x==null||x.length<1?G==null||H?void 0:[]:G==null||H?x[0]:ar(x,x.length-G)}function Zt(x,G,H){return a.call(x,G==null||H?1:G)}function ba(x,G,H){return x==null||x.length<1?G==null||H?void 0:[]:G==null||H?x[x.length-1]:Zt(x,Math.max(0,x.length-G))}function wa(x){return Ot(x,Boolean)}function ka(x,G){return zt(x,G,!1)}var sr=be(function(x,G){return G=zt(G,!0,!0),Ot(x,function(H){return!bt(G,H)})}),Sa=be(function(x,G){return sr(x,G)});function vi(x,G,H,F){ve(G)||(F=H,H=G,G=!1),H!=null&&(H=st(H,F));for(var J=[],$=[],se=0,ye=Se(x);se<ye;se++){var De=x[se],Pe=H?H(De,se,x):De;G&&!H?((!se||$!==Pe)&&J.push(De),$=Pe):H?bt($,Pe)||($.push(Pe),J.push(De)):bt(J,De)||J.push(De)}return J}var Ea=be(function(x){return vi(zt(x,!0,!0))});function Ma(x){for(var G=[],H=arguments.length,F=0,J=Se(x);F<J;F++){var $=x[F];if(!bt(G,$)){var se;for(se=1;se<H&&bt(arguments[se],$);se++);se===H&&G.push($)}}return G}function gi(x){for(var G=x&&tr(x,Se).length||0,H=Array(G),F=0;F<G;F++)H[F]=yi(x,F);return H}var Aa=be(gi);function La(x,G){for(var H={},F=0,J=Se(x);F<J;F++)G?H[x[F]]=G[F]:H[x[F][0]]=x[F][1];return H}function Ca(x,G,H){G==null&&(G=x||0,x=0),H||(H=G<x?-1:1);for(var F=Math.max(Math.ceil((G-x)/H),0),J=Array(F),$=0;$<F;$++,x+=H)J[$]=x;return J}function za(x,G){if(G==null||G<1)return[];for(var H=[],F=0,J=x.length;F<J;)H.push(a.call(x,F,F+=G));return H}function bi(x,G){return x._chain?ge(G).chain():G}function or(x){return gt(K(x),function(G){var H=ge[G]=x[G];ge.prototype[G]=function(){var F=[this._wrapped];return t.apply(F,arguments),bi(this,H.apply(ge,F))}}),ge}gt(["pop","push","reverse","shift","sort","splice","unshift"],function(x){var G=u[x];ge.prototype[x]=function(){var H=this._wrapped;return H!=null&&(G.apply(H,arguments),(x==="shift"||x==="splice")&&H.length===0&&delete H[0]),bi(this,H)}}),gt(["concat","join","slice"],function(x){var G=u[x];ge.prototype[x]=function(){var H=this._wrapped;return H!=null&&(H=G.apply(H,arguments)),bi(this,H)}});var Ta={__proto__:null,VERSION:p,restArguments:be,isObject:Ee,isNull:Me,isUndefined:Be,isBoolean:ve,isElement:Ke,isString:Je,isNumber:Ze,isDate:et,isRegExp:tt,isError:it,isSymbol:n,isArrayBuffer:o,isDataView:I,isArray:D,isFunction:C,isArguments:ie,isFinite:ne,isNaN:E,isTypedArray:we,isEmpty:Ce,isMatch:Le,isEqual:ft,isMap:M,isWeakMap:O,isSet:q,isWeakSet:ee,keys:_e,allKeys:rt,values:re,pairs:he,invert:le,functions:K,methods:K,extend:xe,extendOwn:ce,assign:ce,defaults:Ne,create:qe,clone:Ye,tap:X,get:Re,has:Ve,mapObject:Pt,identity:Qe,constant:N,noop:Ct,toPath:W,property:Ut,propertyOf:On,matcher:_t,matches:_t,times:Rn,random:ui,now:Wt,escape:Dn,unescape:Bn,templateSettings:Un,template:Xn,result:qn,uniqueId:$n,chain:Kn,iteratee:Ht,partial:It,bind:Wi,bindAll:Jn,memoize:Zn,delay:Fi,defer:jn,throttle:Qn,debounce:ea,wrap:ta,negate:di,compose:ia,after:ra,before:Yi,once:na,findKey:Xi,findIndex:pi,findLastIndex:Vi,sortedIndex:$i,indexOf:Ji,lastIndexOf:aa,find:mi,detect:mi,findWhere:sa,each:gt,forEach:gt,map:Tt,collect:Tt,reduce:_i,foldl:_i,inject:_i,reduceRight:ji,foldr:ji,filter:Ot,select:Ot,reject:oa,every:Qi,all:Qi,some:er,any:er,contains:bt,includes:bt,include:bt,invoke:la,pluck:yi,where:ha,max:tr,min:fa,shuffle:ca,sample:rr,sortBy:da,groupBy:pa,indexBy:ma,countBy:_a,partition:ya,toArray:ir,size:xa,pick:nr,omit:ga,first:xi,head:xi,take:xi,initial:ar,last:ba,rest:Zt,tail:Zt,drop:Zt,compact:wa,flatten:ka,without:Sa,uniq:vi,unique:vi,union:Ea,intersection:Ma,difference:sr,unzip:gi,transpose:gi,zip:Aa,object:La,range:Ca,chunk:za,mixin:or,default:ge},wi=or(Ta);return wi._=wi,wi})});var Fr=$e((ys,Wr)=>{var Dr=["webkit","Moz","ms","O"],Nr={},Yt;function Bt(p,y){var u=document.createElement(p||"div"),r;for(r in y)u[r]=y[r];return u}function Mt(p){for(var y=1,u=arguments.length;y<u;y++)p.appendChild(arguments[y]);return p}var Ur=function(){var p=Bt("style");return Mt(document.getElementsByTagName("head")[0],p),p.sheet||p.styleSheet}();function Za(p,y,u,r){var l=["opacity",y,~~(p*100),u,r].join("-"),t=.01+u/r*100,a=Math.max(1-(1-p)/y*(100-t),p),h=Yt.substring(0,Yt.indexOf("Animation")).toLowerCase(),s=h&&"-"+h+"-"||"";return Nr[l]||(Ur.insertRule("@"+s+"keyframes "+l+"{0%{opacity:"+a+"}"+t+"%{opacity:"+p+"}"+(t+.01)+"%{opacity:1}"+(t+y)%100+"%{opacity:"+p+"}100%{opacity:"+a+"}}",0),Nr[l]=1),l}function Gi(p,y){var u=p.style,r,l;if(u[y]!==void 0)return y;for(y=y.charAt(0).toUpperCase()+y.slice(1),l=0;l<Dr.length;l++)if(r=Dr[l]+y,u[r]!==void 0)return r}function xt(p,y){for(var u in y)p.style[Gi(p,u)||u]=y[u];return p}function Hr(p){for(var y=1;y<arguments.length;y++){var u=arguments[y];for(var r in u)p[r]===void 0&&(p[r]=u[r])}return p}function Br(p){for(var y={x:p.offsetLeft,y:p.offsetTop};p=p.offsetParent;)y.x+=p.offsetLeft,y.y+=p.offsetTop;return y}var ja={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},Xt=function p(y){if(!this.spin)return new p(y);this.opts=Hr(y||{},p.defaults,ja)};Xt.defaults={};Hr(Xt.prototype,{spin:function(p){this.stop();var y=this,u=y.opts,r=y.el=xt(Bt(0,{className:u.className}),{position:"relative",zIndex:u.zIndex}),l=u.radius+u.length+u.width,t,a;if(p&&(p.insertBefore(r,p.firstChild||null),a=Br(p),t=Br(r),xt(r,{left:(u.left=="auto"?a.x-t.x+(p.offsetWidth>>1):u.left+l)+"px",top:(u.top=="auto"?a.y-t.y+(p.offsetHeight>>1):u.top+l)+"px"})),r.setAttribute("aria-role","progressbar"),y.lines(r,y.opts),!Yt){var h=0,s=u.fps,c=s/u.speed,_=(1-u.opacity)/(c*u.trail/100),g=c/u.lines;(function P(){h++;for(var U=u.lines;U;U--){var B=Math.max(1-(h+U*g)%c*_,u.opacity);y.opacity(r,u.lines-U,B,u)}y.timeout=y.el&&setTimeout(P,~~(1e3/s))})()}return y},stop:function(){var p=this.el;return p&&(clearTimeout(this.timeout),p.parentNode&&p.parentNode.removeChild(p),this.el=void 0),this},lines:function(p,y){var u=0,r;function l(t,a){return xt(Bt(),{position:"absolute",width:y.length+y.width+"px",height:y.width+"px",background:t,boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*u+y.rotate)+"deg) translate("+y.radius+"px,0)",borderRadius:(y.width>>1)+"px"})}for(;u<y.lines;u++)r=xt(Bt(),{position:"absolute",top:1+~(y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:Yt&&Za(y.opacity,y.trail,u,y.lines)+" "+1/y.speed+"s linear infinite"}),y.shadow&&Mt(r,xt(l("#000","0 0 4px #000"),{top:2+"px"})),Mt(p,Mt(r,l(y.color,"0 0 1px rgba(0,0,0,.1)")));return p},opacity:function(p,y,u){y<p.childNodes.length&&(p.childNodes[y].style.opacity=u)}});(function(){function p(u,r){return Bt("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',r)}var y=xt(Bt("group"),{behavior:"url(#default#VML)"});!Gi(y,"transform")&&y.adj?(Ur.addRule(".spin-vml","behavior:url(#default#VML)"),Xt.prototype.lines=function(u,r){var l=r.length+r.width,t=2*l;function a(){return xt(p("group",{coordsize:t+" "+t,coordorigin:-l+" "+-l}),{width:t,height:t})}var h=-(r.width+r.length)*2+"px",s=xt(a(),{position:"absolute",top:h,left:h}),c;function _(g,P,U){Mt(s,Mt(xt(a(),{rotation:360/r.lines*g+"deg",left:~~P}),Mt(xt(p("roundrect",{arcsize:1}),{width:l,height:r.width,left:r.radius,top:-r.width>>1,filter:U}),p("fill",{color:r.color,opacity:r.opacity}),p("stroke",{opacity:0}))))}if(r.shadow)for(c=1;c<=r.lines;c++)_(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=r.lines;c++)_(c);return Mt(u,s)},Xt.prototype.opacity=function(u,r,l,t){var a=u.firstChild;t=t.shadow&&t.lines||0,a&&r+t<a.childNodes.length&&(a=a.childNodes[r+t],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=l))}):Yt=Gi(y,"animation")})();Wr.exports=Xt});var vt=$e((xs,St)=>{(function(){St.exports={},window.ArrayBuffer&&(ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(p,y){var u=new Uint8Array(this);y===void 0&&(y=u.length);for(var r=new ArrayBuffer(y-p),l=new Uint8Array(r),t=0;t<l.length;t++)l[t]=u[t+p];return r}),ArrayBuffer.isView||(ArrayBuffer.isView=function(p){return p!==null&&typeof p=="object"&&p.buffer instanceof ArrayBuffer})),window.requestAnimFrame=function(p){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(y){return window.setTimeout(y,1e3/60)}}(),window.cancelAnimFrame=function(p){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(y){window.clearTimeout(y)}}(),St.exports.dashOn=function(p,y,u){return p.setLineDash?(p.setLineDash([y,u]),!0):p.mozDash!==void 0?(p.mozDash=[y,u],!0):p.webkitLineDash&&p.webkitLineDash.length===0?(p.webkitLineDash=[y,u],!0):!1},St.exports.dashOff=function(p){p.setLineDash?p.setLineDash([]):p.mozDash?p.mozDash=null:p.webkitLineDash&&(p.webkitLineDash=[])},St.exports.getKeyCode=function(p){return p=window.event||p,p=p.charCode||p.keyCode,p},St.exports.setKeypressHandler=function(p){window.addEventListener?window.addEventListener("keypress",p,!1):window.attachEvent&&window.attachEvent("onkeypress",p)},String.prototype.endsWith||(String.prototype.endsWith=function(p,y){return(y===void 0||y>this.length)&&(y=this.length),this.substring(y-p.length,y)===p}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),Int8Array.prototype.slice||Object.defineProperty(Int8Array.prototype,"slice",{value:Array.prototype.slice}),Int16Array.prototype.slice||Object.defineProperty(Int16Array.prototype,"slice",{value:Array.prototype.slice}),Int32Array.prototype.slice||Object.defineProperty(Int32Array.prototype,"slice",{value:Array.prototype.slice}),Float32Array.prototype.slice||Object.defineProperty(Float32Array.prototype,"slice",{value:Array.prototype.slice}),Float64Array.prototype.slice||Object.defineProperty(Float64Array.prototype,"slice",{value:Array.prototype.slice}),Array.isArray||(Array.isArray=function(p){return Object.prototype.toString.call(p)==="[object Array]"}),window.Float64Array||(window.Float64Array=function(){return window.Float64Array||function(p,y,u){if(!(p instanceof ArrayBuffer))throw"Invalid type";var r=new DataView(p),l=[],t=(p.byteLength-y)/8;u===void 0?l.length=t:l.length=Math.min(u,t);for(var a=0;a<l.length;a++)l[a]=r.getFloat64(a*8+y,!0);return l.subarray=function(h,s){return l.slice(h,s)},l}}()),ArrayBuffer.transfer||(ArrayBuffer.transfer=function(p,y){if(!(p instanceof ArrayBuffer))throw new TypeError("Source must be an instance of ArrayBuffer");if(y<=p.byteLength)return p.slice(0,y);var u=new Uint8Array(p),r=new Uint8Array(new ArrayBuffer(y));return r.set(u),r.buffer}),function(){var p=function(){};if(window.console||(window.console={log:p,info:p,warn:p,debug:p,error:p}),new Int8Array([0,1,0]).subarray(1).subarray(1)[0]){var y=function(r,l){arguments.length===0?(r=0,l=this.length):(r<0&&(r+=this.length),r=Math.max(0,Math.min(this.length,r)),arguments.length===1?l=this.length:(l<0&&(l+=this.length),l=Math.max(r,Math.min(this.length,l))));var t=this.byteOffset+r*this.BYTES_PER_ELEMENT;return new this.constructor(this.buffer,t,l-r)},u=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];u.forEach(function(r){r.prototype.subarray=y})}}(),function(p,y){var u="",r,l,t;p.addEventListener?r="addEventListener":(r="attachEvent",u="on"),t="onwheel"in y.createElement("div")?"wheel":y.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",p.addWheelListener=function(h,s,c){a(h,t,s,c),t==="DOMMouseScroll"&&a(h,"MozMousePixelScroll",s,c)};function a(h,s,c,_){h[r](u+s,t==="wheel"?c:function(g){!g&&(g=p.event);var P={originalEvent:g,target:g.target||g.srcElement,type:"wheel",deltaMode:g.type==="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){g.preventDefault?g.preventDefault():g.returnValue=!1}};return t==="mousewheel"?(P.deltaY=-1/40*g.wheelDelta,g.wheelDeltaX&&(P.deltaX=-1/40*g.wheelDeltaX)):P.deltaY=g.detail,c(P)},_||!1)}}(window,document),window.Proxy||function(){function p(){function u(t){return t?typeof t=="object"||typeof t=="function":!1}var r=null,l=function(t,a){function h(){}if(!u(t)||!u(a))throw new TypeError("Cannot create proxy with a non-object as target or handler");r=function(){h=function(ae){throw new TypeError("Cannot perform '"+ae+"' on a proxy that has been revoked")}};var s=a;a={get:null,set:null,apply:null,construct:null};for(var c in s){if(!(c in a))throw new TypeError("Proxy polyfill does not support trap '"+c+"'");a[c]=s[c]}typeof s=="function"&&(a.apply=s.apply.bind(s));var _=this,g=!1,P=!1;typeof t=="function"?(_=function(){var ae=this&&this.constructor===_,Ae=Array.prototype.slice.call(arguments);return h(ae?"construct":"apply"),ae&&a.construct?a.construct.call(this,t,Ae):!ae&&a.apply?a.apply(t,this,Ae):ae?(Ae.unshift(t),new(t.bind.apply(t,Ae))):t.apply(this,Ae)},g=!0):t instanceof Array&&(_=[],P=!0);var U=a.get?function(ae){return h("get"),a.get(this,ae,_)}:function(ae){return h("get"),this[ae]},B=a.set?function(ae,Ae){h("set"),a.set(this,ae,Ae,_)}:function(ae,Ae){h("set"),this[ae]=Ae},Z={};if(Object.getOwnPropertyNames(t).forEach(function(ae){if(!((g||P)&&ae in _)){var Ae={enumerable:!!Object.getOwnPropertyDescriptor(t,ae).enumerable,get:U.bind(t,ae),set:B.bind(t,ae)};Object.defineProperty(_,ae,Ae),Z[ae]=!0}}),s=!0,Object.setPrototypeOf?Object.setPrototypeOf(_,Object.getPrototypeOf(t)):_.__proto__?_.__proto__=t.__proto__:s=!1,a.get||!s)for(var oe in t)Z[oe]||Object.defineProperty(_,oe,{get:U.bind(t,oe)});return Object.seal(t),Object.seal(_),_};return l.revocable=function(t,a){return{proxy:new l(t,a),revoke:r}},l}var y=typeof process<"u"&&{}.toString.call(process)==="[object process]"||typeof navigator<"u"&&navigator.product==="ReactNative"?global:self;y.Proxy||(y.Proxy=p(),y.Proxy.revocable=y.Proxy.revocable)}(),St.exports.update=function p(y,u){for(var r in u){var l=u[r];typeof l=="object"?p(y[r],l):y[r]=l}return y},St.exports.debounce=function(y,u,r){var l;return function(){var t=this,a=arguments,h=function(){l=null,r||y.apply(t,a)},s=r&&!l;clearTimeout(l),l=setTimeout(h,u),s&&y.apply(t,a)}},St.exports.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){var u=Math.random()*16|0,r=y==="x"?u:u&3|8;return r.toString(16)})}})()});var Ii=$e((ti,Pi)=>{(function(p,y){typeof ti=="object"&&typeof Pi=="object"?Pi.exports=y():typeof define=="function"&&define.amd?define([],y):typeof ti=="object"?ti.sigfile=y():p.sigfile=y()})(window,function(){return function(p){var y={};function u(r){if(y[r])return y[r].exports;var l=y[r]={i:r,l:!1,exports:{}};return p[r].call(l.exports,l,l.exports,u),l.l=!0,l.exports}return u.m=p,u.c=y,u.d=function(r,l,t){u.o(r,l)||Object.defineProperty(r,l,{enumerable:!0,get:t})},u.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},u.t=function(r,l){if(1&l&&(r=u(r)),8&l||4&l&&typeof r=="object"&&r&&r.__esModule)return r;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&l&&typeof r!="string")for(var a in r)u.d(t,a,function(h){return r[h]}.bind(null,a));return t},u.n=function(r){var l=r&&r.__esModule?function(){return r.default}:function(){return r};return u.d(l,"a",l),l},u.o=function(r,l){return Object.prototype.hasOwnProperty.call(r,l)},u.p="",u(u.s=1)}([function(p){p.exports=JSON.parse('{"a":"0.1.9"}')},function(p,y,u){p.exports=u(2)},function(p,y,u){"use strict";u.r(y),u.d(y,"bluefile",function(){return r}),u.d(y,"matfile",function(){return l}),u.d(y,"version",function(){return C.a});var r={};u.r(r),u.d(r,"BlueHeader",function(){return ve}),u.d(r,"BlueFileReader",function(){return Ke});var l={};function t(v,k){for(var A=0;A<k.length;A++){var z=k[A];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(v,z.key,z)}}u.r(l),u.d(l,"MatHeader",function(){return m}),u.d(l,"MatFileReader",function(){return S});var a=function(){function v(T){return function(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}(this,v),T instanceof ArrayBuffer||typeof T!="number"?(this.buffer=T,this.u8=new Uint8Array(T)):(this.buffer=new ArrayBuffer(T/8),this.u8=new Uint8Array(this.buffer)),new Proxy(this,{get:function(I,D){return I[D]?I[D]:I.getBit(D)},set:function(I,D,L){var Y=parseInt(D);return!isNaN(Y)&&(I.setBit(D,L),!0)}})}var k,A,z;return k=v,(A=[{key:"set",value:function(T){this.setArray(T)}},{key:"getBit",value:function(T){return this.u8[T>>3]>>7-(7&T)&1}},{key:"setBit",value:function(T,I){var D=7&T;I?this.u8[T>>3]|=128>>D:this.u8[T>>3]&=~(128>>D)}},{key:"setArray",value:function(T){for(var I=T.length,D=0;D<I;D++)this.setBit(D,T[D])}},{key:"subarray",value:function(T,I){var D=[];T=(T=T||0)<0?0:T,I=(I=I||this.length)>this.length?this.length:I;for(var L=T;L<I;L++)D.push(this.getBit(L));return D}},{key:"length",get:function(){return 8*this.u8.byteLength}}])&&t(k.prototype,A),z&&t(k,z),v}();function h(v,k){return function(A){if(Array.isArray(A))return A}(v)||function(A,z){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(A)))){var T=[],I=!0,D=!1,L=void 0;try{for(var Y,ie=A[Symbol.iterator]();!(I=(Y=ie.next()).done)&&(T.push(Y.value),!z||T.length!==z);I=!0);}catch(ne){D=!0,L=ne}finally{try{I||ie.return==null||ie.return()}finally{if(D)throw L}}return T}}(v,k)||function(A,z){if(!!A){if(typeof A=="string")return s(A,z);var T=Object.prototype.toString.call(A).slice(8,-1);if(T==="Object"&&A.constructor&&(T=A.constructor.name),T==="Map"||T==="Set")return Array.from(T);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return s(A,z)}}(v,k)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s(v,k){(k==null||k>v.length)&&(k=v.length);for(var A=0,z=new Array(k);A<k;A++)z[A]=v[A];return z}function c(){var v=new ArrayBuffer(4),k=new Uint32Array(v),A=new Uint8Array(v);if(k[0]=3735928559,A[0]===239)return"LE";if(A[0]===222)return"BE";throw new Error("unknown endianness")}function _(v,k,A){var z=Math.pow(2,53),T=h(A?[4,0]:[0,4],2),I=T[0],D=T[1],L=v.getInt32(k+I,A),Y=v.getInt32(k+D,A)+P(32)*L;return Y>=z?(console.warn("Int is bigger than JS can represent."),1/0):Y}function g(v,k){var A=new Uint8Array(v);return g._applySupportsTypedArray===void 0&&(g._applySupportsTypedArray=k!==void 0?k:function(){try{var z=new Uint8Array(new ArrayBuffer(4));if(z[0]=66,z[1]=76,z[2]=85,z[3]=69,String.fromCharCode.apply(null,z)!=="BLUE")return!1}catch{return!1}return!0}()),g._applySupportsTypedArray?String.fromCharCode.apply(null,A):A.reduce(function(z,T){return z+String.fromCharCode(T)},"")}function P(v){return v>=0&&v<31?1<<v:P[v]||(P[v]=Math.pow(2,v))}function U(v){var k=document.createElement("a");return k.href=v,{source:v,protocol:k.protocol.replace(":",""),host:k.hostname,port:k.port,query:k.search,params:function(){for(var A={},z=k.search.replace(/^\?/,"").split("&"),T=z.length,I=0;I<T;I++)if(z[I]){var D=z[I].split("=");A[D[0]]=D[1]}return A}(),file:(k.pathname.match(/\/([^/?#]+)$/i)||[null,""])[1],hash:k.hash.replace("#",""),path:k.pathname.replace(/^([^/])/,"/$1"),relative:(k.href.match(/tps?:\/\/[^/]+(.+)/)||[null,""])[1],segments:k.pathname.replace(/^\//,"").split("/")}}function B(v,k){for(var A=0;A<k.length;A++){var z=k[A];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(v,z.key,z)}}var Z=function(){function v(T,I){(function(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")})(this,v),this.header_class=T,this.options=I}var k,A,z;return k=v,(A=[{key:"_read",value:function(T,I,D){var L=this,Y=new FileReader,ie=T.webkitSlice===void 0?"slice":"webkitSlice",ne=D?T[ie](0,512):T;Y.onloadend=function(E){return function(N){if(N.target.error)I(null);else{var R=Y.result,V=new L.header_class(R,L.options);V.file=E,V.file_name=E.name,I(V)}}}(T),Y.readAsArrayBuffer(ne)}},{key:"readheader",value:function(T,I){this._read(T,I,!0)}},{key:"read",value:function(T,I){this._read(T,I,!1)}},{key:"read_http",value:function(T,I){var D=this,L=new XMLHttpRequest;return L.open("GET",T,!0),L.responseType="arraybuffer",L.overrideMimeType("text/plain; charset=x-user-defined"),L.onload=function(Y){if(L.readyState!==4||L.status!==200&&L.status!==0)I(null);else{var ie=null;if(L.response){ie=L.response;var ne=new D.header_class(ie,D.options),E=U(T);ne.file_name=E.file,I(ne)}else L.responseText&&function(N,R,V){V=V||1024;var te=0,Q=new ArrayBuffer(N.length),fe=new Uint8Array(Q);setTimeout(function me(){for(var we=te+V;te<we;te++)fe[te]=255&N.charCodeAt(te);te>=N.length?R(Q):setTimeout(me,0)},0)}(L.responseText,function(N){var R=new D.header_class(N,D.options),V=U(T);R.file_name=V.file,I(R)})}},L.onerror=function(Y){I(null)},L.send(null),L}}])&&B(k.prototype,A),z&&B(k,z),v}();function oe(v,k){return(oe=Object.setPrototypeOf||function(A,z){return A.__proto__=z,A})(v,k)}function ae(v,k){return!k||be(k)!=="object"&&typeof k!="function"?function(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}(v):k}function Ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ue(v){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(v)}function be(v){return(be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(v)}function Ee(v,k){if(!(v instanceof k))throw new TypeError("Cannot call a class as a function")}function Me(v,k){for(var A=0;A<k.length;A++){var z=k[A];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(v,z.key,z)}}function Be(v,k,A){return k in v?Object.defineProperty(v,k,{value:A,enumerable:!0,configurable:!0,writable:!0}):v[k]=A,v}var ve=function(){function v(T,I){if(Ee(this,v),I===void 0&&(I={}),this.options=Object.assign({ext_header_type:"dict"},I),this.buf=T,this.buf!=null){this.setHeader();var D=this.data_start,L=this.data_start+this.data_size;this.setData(this.buf,D,L,this.littleEndianData)}}var k,A,z;return k=v,(A=[{key:"setHeader",value:function(){var T=new DataView(this.buf);this.version=g(this.buf.slice(0,4)),this.headrep=g(this.buf.slice(4,8)),this.datarep=g(this.buf.slice(8,12));var I=this.headrep==="EEEI";this.littleEndianData=this.datarep==="EEEI",this.ext_start=T.getInt32(24,I),this.ext_size=T.getInt32(28,I),this.type=T.getUint32(48,I),this.class=this.type/1e3,this.format=g(this.buf.slice(52,54)),this.timecode=T.getFloat64(56,I),this.class===1?(this.xstart=T.getFloat64(256,I),this.xdelta=T.getFloat64(264,I),this.xunits=T.getInt32(272,I),this.yunits=T.getInt32(296,I),this.subsize=1):this.class===2&&(this.xstart=T.getFloat64(256,I),this.xdelta=T.getFloat64(264,I),this.xunits=T.getInt32(272,I),this.subsize=T.getInt32(276,I),this.ystart=T.getFloat64(280,I),this.ydelta=T.getFloat64(288,I),this.yunits=T.getInt32(296,I)),this.data_start=T.getFloat64(32,I),this.data_size=T.getFloat64(40,I),this.ext_size&&(this.ext_header=this.unpack_keywords(this.buf,this.ext_size,512*this.ext_start,I))}},{key:"setData",value:function(T,I,D,L){L===void 0&&(L=v.ARRAY_BUFFER_ENDIANNESS==="LE"),this.spa=v._SPA[this.format[0]],this.bps=v._BPS[this.format[1]],this.bpa=this.spa*this.bps,this.class===1?this.ape=1:this.class===2&&(this.ape=this.subsize),this.bpe=this.ape*this.bpa;var Y=v.ARRAY_BUFFER_ENDIANNESS==="LE",ie=v.ARRAY_BUFFER_ENDIANNESS==="BE";if(Y&&!L||ie&&this.littleEndianData)throw"Not supported ".concat(v.ARRAY_BUFFER_ENDIANNESS," ").concat(L);if(T){if(I&&D){var ne=(D-I)/this.bps;this.dview=this.createArray(T,I,ne)}else this.dview=this.createArray(T);this.size=this.dview.length/(this.spa*this.ape)}else this.dview=this.createArray(null,null,this.size)}},{key:"unpack_keywords",value:function(T,I,D,L){var Y,ie,ne,E,N,R,V,te,Q,fe=[],me={},we={},Se=0;T=T.slice(D,T.byteLength);var pe=new DataView(T);for(T=g(T);Se<I;){if(Q=Se+8,Y=pe.getUint32(Se,L),ie=pe.getInt16(Se+4,L),ne=pe.getInt8(Se+6),E=T.slice(Se+7,Se+8),te=Q+(V=Y-ie),N=T.slice(te,te+ne),E==="A")R=T.slice(Q,Q+V);else{if(!v._XM_TO_DATAVIEW[E])throw"Unsupported keyword format ".concat(E," for tag ").concat(N);var ke=v._XM_TO_DATAVIEW[E];R=typeof ke=="string"?pe[ke](Q,L):ke(pe,Q,L)}me[N]===void 0?me[N]=1:(me[N]++,N=""+N+me[N]),we[N]=R,fe.push({tag:N,value:R}),Se+=Y}var _e=["dict","json",{},"XMTable","JSON","DICT"],Ce=this.options.ext_header_type;if(be(Ce)==="object"&&Ce!==null&&Object.keys(Ce).length===0&&Ce.constructor===Object)return we;for(var Le in _e)if(_e[Le]===Ce)return we;return fe}},{key:"createArray",value:function(T,I,D){var L,Y=v._XM_TO_TYPEDARRAY[this.format[1]];if(Y===void 0)throw"unknown format ".concat(this.format[1]);if(I===void 0&&(I=0),D===void 0&&(D=T.length||T.byteLength/v._BPS[this.format[1]]),T)if(Array.isArray(T)&&Array.isArray(T[0]))L=new Y(T=[].concat.apply([],T),I,D=T.length*T[0].length);else if(Array.isArray(T)&&ArrayBuffer.isView(T[0])){L=new Y(D=T.length*T[0].length);for(var ie=0;ie<T.length;++ie)L.set(T[ie],ie*T[0].length)}else L=new Y(T,I,D);else L=new Y(D);return L}}])&&Me(k.prototype,A),z&&Me(k,z),v}();Be(ve,"ARRAY_BUFFER_ENDIANNESS",c()),Be(ve,"_SPA",{S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9}),Be(ve,"_BPS",{P:.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8}),Be(ve,"_XM_TO_TYPEDARRAY",{P:a,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array}),Be(ve,"_XM_TO_DATAVIEW",{P:null,A:null,O:"getUint8",B:"getInt8",I:"getInt16",L:"getInt32",X:_,F:"getFloat32",D:"getFloat64"});var Ke=function(v){(function(T,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(I&&I.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),I&&oe(T,I)})(z,v);var k,A=(k=z,function(){var T,I=ue(k);if(Ae()){var D=ue(this).constructor;T=Reflect.construct(I,arguments,D)}else T=I.apply(this,arguments);return ae(this,T)});function z(T){return Ee(this,z),A.call(this,ve,T)}return z}(Z);function Ie(v){return(Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(v)}function Je(v,k){return(Je=Object.setPrototypeOf||function(A,z){return A.__proto__=z,A})(v,k)}function Ze(v,k){return!k||Ie(k)!=="object"&&typeof k!="function"?function(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}(v):k}function et(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function tt(v){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(v)}function it(v,k){if(!(v instanceof k))throw new TypeError("Cannot call a class as a function")}function n(v,k){for(var A=0;A<k.length;A++){var z=k[A];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(v,z.key,z)}}function o(v,k,A){return k in v?Object.defineProperty(v,k,{value:A,enumerable:!0,configurable:!0,writable:!0}):v[k]=A,v}var m=function(){function v(T){if(it(this,v),this.file=null,this.file_name=null,this.buf=T,this.buf!=null){var I=new DataView(this.buf);this.headerStr=g(this.buf.slice(v.headerTextBegin-1,v.headerTextEnd)),this.datarep=g(this.buf.slice(v.endianCharsBegin-1,v.endianCharsEnd));var D=this.datarep==="IM",L=this.datarep==="IM";this.headerList=this.headerStr.split(",").map(function(ke){return ke.trim()}),this.matfile=this.headerList[0],this.platform=this.headerList[1],this.createdOn=this.headerList[2],this.subsystemOffset=g(this.buf.slice(v.subsysOffsetBegin-1,v.subsysOffsetEnd)),this.version=I.getUint16(v.versionOffsetBegin-1,D),this.versionName=v.versionNames[this.version],this.dataType=I.getUint32(v.firstDataTypeOffsetBegin-1,D),this.dataTypeName=v.dataTypeNames[this.dataType].name,this.arraySize=I.getUint32(v.numBytesOffsetBegin-1,D),v.numBytesOffsetEnd;var Y=v.numBytesOffsetEnd+1,ie=I.getUint32(Y-1,D),ne=v.dataTypeNames[ie].name,E=v.dataTypeNames[ie].size;Y+=4,this.getDataWithType(I,ne,Y-1,L),Y+=E;var N=this.getDataWithType(I,ne,Y-1,L);Y+=E;var R=15&N;v.arrayClassNames[R],Y+=E;var V=I.getUint32(Y-1,L);Y+=4;var te=v.dataTypeNames[V].name,Q=v.dataTypeNames[V].size;I.getUint32(Y-1,L),Y+=4;var fe=this.getDataWithType(I,te,Y-1,L);Y+=Q,fe>1&&console.warn("Only 1D arrays are currently supported."),this.getDataWithType(I,te,Y-1,L),Y+=E;var me=I.getUint32(Y-1,L);Y+=4;var we=0,Se=!1;me>15&&(me&=255,Se=!0,we=I.getUint16(Y-5,L));var pe=v.dataTypeNames[me].name;v.dataTypeNames[me].size,Se||(we=this.getDataWithType(I,pe,Y-1,L),Y+=4),Y+=we+(Se?(4-we%4)%4:(8-we%8)%8),this.setData(this.buf,I,Y,L)}}var k,A,z;return k=v,(A=[{key:"createArray",value:function(T,I,D,L){var Y=v._MAT_TO_TYPEDARRAY[L];if(Y===void 0)throw"unknown type ".concat(L);return I===void 0&&(I=0),D===void 0&&(D=T.length),new Y(T,I,D)}},{key:"getDataWithType",value:function(T,I,D,L){var Y=v._MAT_TO_DATAVIEW[I];if(Y===void 0)throw"Type name ".concat(I," is not supported");return T[Y](D,L)}},{key:"setData",value:function(T,I,D,L){var Y,ie=I.getUint32(D-1,L),ne=!1;ie>15?(ie&=255,ne=!0,Y=I.getUint16(D+1,2,L)):D+=4;var E=v.dataTypeNames[ie].name,N=v.dataTypeNames[ie].size;ne||(Y=I.getUint32(D-1,L),ne=!1),D+=4,this.dview=this.createArray(T,D-1,Y/N,E)}}])&&n(k.prototype,A),z&&n(k,z),v}();o(m,"ARRAY_BUFFER_ENDIANNESS",c()),o(m,"versionNames",{256:"MAT-file"}),o(m,"_MAT_TO_TYPEDARRAY",{miINT8:Int8Array,miUINT8:Uint8Array,miInt16:Int16Array,miUINT16:Uint16Array,miINT32:Int32Array,miUINT32:Uint32Array,miDOUBLE:Float64Array}),o(m,"_MAT_TO_DATAVIEW",{miINT8:"getInt8",miUINT8:"getUint8",miINT16:"getInt16",miUINT16:"getUint16",miINT32:"getInt32",miUINT32:"getUint32",miSINGLE:"getFloat32",miDOUBLE:"getFloat64",miINT64:_}),o(m,"dataTypeNames",{1:{name:"miINT8",size:1},2:{name:"miUINT8",size:1},3:{name:"miINT16",size:2},4:{name:"miUINT16",size:2},5:{name:"miINT32",size:4},6:{name:"miUINT32",size:4},7:{name:"miSINGLE",size:4},9:{name:"miDOUBLE",size:8},12:{name:"miINT64",size:8},13:{name:"miUINT64",size:8},14:{name:"miMATRIX",size:null},15:{name:"miCOMPRESSED",size:null},16:{name:"miUTF8",size:null},17:{name:"miUTF16",size:null},18:{name:"miUTF32",size:null}}),o(m,"arrayClassNames",{1:"mxCELL_CLASS",2:"mxSTRUCT_CLASS",3:"mxOBJECT_CLASS",4:"mxCHAR_CLASS",5:"mxSPARSE_CLASS",6:"mxDOUBLE_CLASS",7:"mxSINGLE_CLASS",8:"mxINT8_CLASS",9:"mxUINT8_CLASS",10:"mxINT16_CLASS",11:"mxUINT16_CLASS",12:"mxINT32_CLASS",13:"mxUINT32_CLASS",14:"mxINT64_CLASS",15:"mxUINT64_CLASS"}),o(m,"headerTextBegin",1),o(m,"headerTextEnd",116),o(m,"subsysOffsetBegin",117),o(m,"subsysOffsetEnd",124),o(m,"versionOffsetBegin",125),o(m,"versionOffsetEnd",126),o(m,"endianCharsBegin",127),o(m,"endianCharsEnd",128),o(m,"firstDataTypeOffsetBegin",129),o(m,"firstDataTypeOffsetEnd",132),o(m,"numBytesOffsetBegin",133),o(m,"numBytesOffsetEnd",136);var S=function(v){(function(T,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(I&&I.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),I&&Je(T,I)})(z,v);var k,A=(k=z,function(){var T,I=tt(k);if(et()){var D=tt(this).constructor;T=Reflect.construct(I,arguments,D)}else T=I.apply(this,arguments);return Ze(this,T)});function z(T){return it(this,z),A.call(this,T,m)}return z}(Z),C=u(0)}])})});var Xr=$e((Yr,ii)=>{(function(p,y){"use strict";typeof define=="function"&&define.amd?define(y):typeof ii=="object"&&ii.exports?ii.exports=y():p.log=y()})(Yr,function(){"use strict";var p=function(){},y="undefined",u=typeof window!==y&&typeof window.navigator!==y&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function l(B,Z){var oe=B[Z];if(typeof oe.bind=="function")return oe.bind(B);try{return Function.prototype.bind.call(oe,B)}catch{return function(){return Function.prototype.apply.apply(oe,[B,arguments])}}}function t(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(B){return B==="debug"&&(B="log"),typeof console===y?!1:B==="trace"&&u?t:console[B]!==void 0?l(console,B):console.log!==void 0?l(console,"log"):p}function h(B,Z){for(var oe=0;oe<r.length;oe++){var ae=r[oe];this[ae]=oe<B?p:this.methodFactory(ae,B,Z)}this.log=this.debug}function s(B,Z,oe){return function(){typeof console!==y&&(h.call(this,Z,oe),this[B].apply(this,arguments))}}function c(B,Z,oe){return a(B)||s.apply(this,arguments)}function _(B,Z,oe){var ae=this,Ae;Z=Z??"WARN";var ue="loglevel";typeof B=="string"?ue+=":"+B:typeof B=="symbol"&&(ue=void 0);function be(ve){var Ke=(r[ve]||"silent").toUpperCase();if(!(typeof window===y||!ue)){try{window.localStorage[ue]=Ke;return}catch{}try{window.document.cookie=encodeURIComponent(ue)+"="+Ke+";"}catch{}}}function Ee(){var ve;if(!(typeof window===y||!ue)){try{ve=window.localStorage[ue]}catch{}if(typeof ve===y)try{var Ke=window.document.cookie,Ie=Ke.indexOf(encodeURIComponent(ue)+"=");Ie!==-1&&(ve=/^([^;]+)/.exec(Ke.slice(Ie))[1])}catch{}return ae.levels[ve]===void 0&&(ve=void 0),ve}}function Me(){if(!(typeof window===y||!ue)){try{window.localStorage.removeItem(ue);return}catch{}try{window.document.cookie=encodeURIComponent(ue)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}ae.name=B,ae.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},ae.methodFactory=oe||c,ae.getLevel=function(){return Ae},ae.setLevel=function(ve,Ke){if(typeof ve=="string"&&ae.levels[ve.toUpperCase()]!==void 0&&(ve=ae.levels[ve.toUpperCase()]),typeof ve=="number"&&ve>=0&&ve<=ae.levels.SILENT){if(Ae=ve,Ke!==!1&&be(ve),h.call(ae,ve,B),typeof console===y&&ve<ae.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+ve},ae.setDefaultLevel=function(ve){Z=ve,Ee()||ae.setLevel(ve,!1)},ae.resetLevel=function(){ae.setLevel(Z,!1),Me()},ae.enableAll=function(ve){ae.setLevel(ae.levels.TRACE,ve)},ae.disableAll=function(ve){ae.setLevel(ae.levels.SILENT,ve)};var Be=Ee();Be==null&&(Be=Z),ae.setLevel(Be,!1)}var g=new _,P={};g.getLogger=function(Z){if(typeof Z!="symbol"&&typeof Z!="string"||Z==="")throw new TypeError("You must supply a name when creating a logger.");var oe=P[Z];return oe||(oe=P[Z]=new _(Z,g.getLevel(),g.methodFactory)),oe};var U=typeof window!==y?window.log:void 0;return g.noConflict=function(){return typeof window!==y&&window.log===g&&(window.log=U),g},g.getLoggers=function(){return P},g.default=g,g})});var pt=$e((vs,qr)=>{(function(){"use strict";var p=Ii().bluefile,y=Xr();function u(){}u.log=y;var r=null,l=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i);l||typeof Float64Array>"u"||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?u.PointArray=Float32Array:u.PointArray=Float64Array;var t={0:["None","U",!0,!0],1:["Time","sec",!0,!0],2:["Delay","sec",!0,!1],3:["Frequency","Hz",!0,!0],4:["Time code format","",!0,!1],5:["Distance","m",!0,!0],6:["Speed","m/s",!0,!0],7:["Acceleration","m/sec^2",!0,!0],8:["Jerk","m/sec^3",!0,!0],9:["Doppler","Hz",!0,!1],10:["Doppler rate","Hz/sec",!0,!0],11:["Energy","J",!0,!0],12:["Power","W",!0,!0],13:["Mass","g",!0,!0],14:["Volume","l",!0,!0],15:["Angular power density","W/ster",!0,!0],16:["Integrated power density","W/rad",!0,!0],17:["Spatial power density","W/m^2",!0,!0],18:["Integrated power density","W/m",!1,!0],19:["Spectral power density","W/MHz",!0,!0],20:["Amplitude","U",!0,!1],21:["Real","U",!0,!1],22:["Imaginary","U",!0,!1],23:["Phase","rad",!0,!0],24:["Phase","deg",!1,!0],25:["Phase","cycles",!1,!0],26:["10*Log","U",!0,!1],27:["20*Log","U",!0,!1],28:["Magnitude","U",!0,!1],29:["Unknown","U",!0,!1],30:["Unknown","U",!1,!1],31:["General dimensionless","",!0,!0],32:["Counts","",!0,!1],33:["Angle","rad",!0,!1],34:["Angle","deg",!1,!1],35:["Relative power","dB",!0,!0],36:["Relative power","dBm",!1,!0],37:["Relative power","dBW",!1,!0],38:["Solid angle","ster",!0,!0],40:["Distance","ft",!1,!0],41:["Distance","nmi",!1,!0],42:["Speed","ft/sec",!1,!0],43:["Speed","nmi/sec",!1,!0],44:["Speed","knots=nmi/hr",!1,!0],45:["Acceleration","ft/sec^2",!1,!0],46:["Acceleration","nmi/sec^2",!1,!0],47:["Acceleration","knots/sec",!1,!0],48:["Acceleration","G",!1,!0],49:["Jerk","G/sec",!1,!0],50:["Rotation","rps",!0,!1],51:["Rotation","rpm",!1,!1],52:["Angular velocity","rad/sec",!0,!0],53:["Angular velocity","deg/sec",!1,!0],54:["Angular acceleration","rad/sec^2",!0,!0],55:["Angular acceleration","deg/sec^2",!1,!0],60:["Latitude","deg",!0,!1],61:["Longitude","deg",!0,!1],62:["Altitude","ft",!0,!1],63:["Altitude","m",!1,!1]};u.UNITS=t,u.Mc={colormap:[{name:"Greyscale",colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"calewhite",colors:[{pos:0,red:100,green:100,blue:100},{pos:16.666,red:0,green:0,blue:100},{pos:33.333,red:0,green:100,blue:100},{pos:50,red:0,green:100,blue:0},{pos:66.666,red:100,green:100,blue:0},{pos:83.333,red:100,green:0,blue:0},{pos:100,red:100,green:0,blue:100}]},{name:"HotDesat",colors:[{pos:0,red:27.84,green:27.84,blue:85.88},{pos:14.2857,red:0,green:0,blue:35.69},{pos:28.571,red:0,green:100,blue:100},{pos:42.857,red:0,green:49.8,blue:0},{pos:57.14286,red:100,green:100,blue:0},{pos:71.42857,red:100,green:37.65,blue:0},{pos:85.7143,red:41.96,green:0,blue:0},{pos:100,red:87.84,green:29.8,blue:29.8}]},{name:"Sunset",colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]},{name:"Hot",colors:["#000000","#7f0000","#b30000","#d7301f","#ef6548","#fc8d59","#fdbb84","#fdd49e","#fee8c8","#fff7ec","#ffffff"]},{name:"Cold",colors:["#000000","#023858","#045a8d","#0570b0","#3690c0","#74a9cf","#a6bddb","#d0d1e6","#ece7f2","#fff7fb","#ffffff"]},{name:"Purple",colors:["#230022","#4d004b","#810f7c","#88419d","#8c6bb1","#8c96c6","#9ebcda","#bfd3e6","#e0ecf4","#f7fcfd"]},{name:"BuGn",colors:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},{name:"YlOrBr",colors:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},{name:"YlGnBu",colors:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},{name:"YlOrRd",colors:["#000000","#662506","#993404","#cc4c02","#ec7014","#fe9929","#fec44f","#fee391","#fff7bc","#ffffe5","#ffffff"]},{name:"GreyNRed",colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"].reverse()}]},u.PIPESIZE=1024*1024,u.unit_lookup=function(c){for(var _=0;_<64;_++){var g;t[_]===void 0?g=t[0]:g=t[_];var P=g[0],U=g[1],B=g[0]+" "+g[1],Z=g[0]+"_"+g[1];if(c===P){if(g[2])return _}else if(c===U){if(g[3])return _}else if(c===B||c===Z)return _}return c},u.initialize=function(c,_,g){var P=new p.BlueHeader(null);P.version="BLUE",P.size=0,P.type=1e3,P.format="SF",P.timecode=0,P.xstart=0,P.xdelta=1,P.xunits=0,P.subsize=1,P.ystart=0,P.ydelta=1,P.yunits=0,P.enabled_streaming_pcut=!1,P.cleanup=g,_||(_={});for(var U in _)P[U]=_[U];if(P.xunits=u.unit_lookup(P.xunits),P.yunits=u.unit_lookup(P.yunits),P.subsize>1?P.type=2e3:Array.isArray(c)&&(Array.isArray(c[0])||ArrayBuffer.isView(c[0]))&&(P.type=2e3,P.subsize=c[0].length,P.size=c.length),P.class=P.type/1e3,P.class===2&&P.subsize===void 0)throw"subsize must be provided with type 2000 files";if(!_.pipe)P.setData(c);else{P.pipe=!0,P.in_byte=0,P.out_byte=0;var B=_.pipesize||u.PIPESIZE;P.buf=new ArrayBuffer(B),P.setData(P.buf),P.data_free=P.dview.length}return P},u.force1000=function(c){c.class===2&&(c.size&&!c.pipe?c.size=c.subsize*c.size:c.size=0,c.bpe=c.bpe/c.subsize,c.ape=1)},u.grab=function(c,_,g,P){if(!c.dview)return 0;c.format[0]==="C"&&(g=g*2),P=c.ape*P;var U=Math.min(_.length,c.dview.length-g);if(_.set===void 0)for(var B=0;B<U;B++)_[B]=c.dview[g+B];else _.set(c.dview.subarray(g,g+U));return c.format[0]==="C"&&(U=U/2),U},u.filad=function(c,_,g){if(c.data_free<_.length)throw"Pipe full";var P=c.in_byte/c.dview.BYTES_PER_ELEMENT,U=P+_.length;if(U>c.dview.length){var B=c.dview.length-P,Z=_.length-B;_.subarray?(c.dview.set(_.subarray(0,B),P),c.dview.set(_.subarray(B,_.length),0)):(c.dview.set(_.slice(0,B),P),c.dview.set(_.slice(B,_.length),0)),c.in_byte=Z*c.dview.BYTES_PER_ELEMENT}else c.dview.set(_,P),c.in_byte=U*c.dview.BYTES_PER_ELEMENT%c.buf.byteLength;if(c.data_free-=_.length,c.onwritelisteners)for(var oe=0;oe<c.onwritelisteners.length;oe++)g?c.onwritelisteners[oe]():window.setTimeout(c.onwritelisteners[oe],0)},u.pavail=function(c){return c.dview.length-c.data_free},u.grabx=function(c,_,g,P){var U=c.dview.length-c.data_free;if(P===void 0&&(P=0),!g)g=Math.min(_.length-P,U);else if(g>_.length-P)throw"m.grabx : nget larger then available buffer space";if(g<0)throw"m.grabx : nget cannot be negative";if(g>U)return 0;var B=c.out_byte/c.dview.BYTES_PER_ELEMENT,Z=B+g;if(Z>=c.dview.length){var oe=c.dview.length-B;Z=Z-c.dview.length,_.set(c.dview.subarray(B,c.dview.length),P),_.set(c.dview.subarray(0,Z),P+oe)}else _.set(c.dview.subarray(B,Z),P);c.out_byte=Z*c.dview.BYTES_PER_ELEMENT%c.buf.byteLength,c.data_free+=g;var ae=g;return ae},u.addPipeWriteListener=function(c,_){c.onwritelisteners||(c.onwritelisteners=[]),c.onwritelisteners.indexOf(_)===-1&&c.onwritelisteners.push(_)},u.units_name=function(c){var _=t[c];return _[0]+" ("+_[1]+")"},u.trim_name=function(c){var _=c.indexOf("]");_===-1&&(_=c.indexOf("/")),_===-1&&(_=c.indexOf(":"));var g=c.substr(_+1,c.length).indexOf(".");g<0&&(g=c.length-_);var P=c.substr(_+1,_+g+1);return P},u.label=function(c,_){var g=["Unknown","U"];typeof c=="string"?g=[c,null]:Array.isArray(c)?g=c:(g=t[c],g===void 0&&(g=["Unknown","U"]));var P=u.mult_prefix(_);return g[1]?g[0]+" ("+P+g[1]+")":g[0]},u.bound=function(c,_,g){return c<_?_:c>g?g:c},u.touch_distance=function(c,_){var g=c.pageX-_.pageX,P=c.pageY-_.pageY;return Math.sqrt(g*g+P*P)},u.mult_prefix=function(c){var _="?";return c==1?_="":c==10?_="da":c==.1?_="d":c==100?_="h":c==.01?_="c":c==1e3?_="K":c==.001?_="m":c==1e6?_="M":c==1e-6?_="u":c==1e9?_="G":c==1e-9?_="n":c==1e12?_="T":c==1e-12&&(_="p"),_};var a={MV:"F",MS:"F",nbpt:4,view:void 0};u.vstype=function(c){a.MS=c,a.MV=c,a.MV==="D"?a.nbpt=8:a.MV==="L"||a.MV==="F"?a.nbpt=4:a.MV==="I"?a.nbpt=2:a.MV==="B"?a.nbpt=1:alert("Unsupported vector type")},u.log10=function(c,_){return _===void 0&&(_=1e-20),Math.log(Math.max(c,_))/Math.log(10)},u.vlog10=function(c,_,g){_===void 0&&(_=1e-20),g===void 0&&(g=c);for(var P=0;P<c.length&&!(g.length<=P);P++)g[P]=Math.log(Math.max(c[P],_))/Math.log(10)},u.vlogscale=function(c,_,g,P){_===void 0&&(_=1e-20),g===void 0&&(g=1),P===void 0&&(P=c);for(var U=0;U<c.length&&!(P.length<=U);U++)P[U]=Math.log(Math.abs(Math.max(c[U],_)))/Math.log(10),P[U]=P[U]*g},u.cvmag2logscale=function(c,_,g,P){_===void 0&&(_=1e-20),g===void 0&&(g=1),P===void 0&&(P=c);for(var U=0,B=0;B<P.length&&(U=2*B+1,!(U>=c.length));B++)P[B]=c[U-1]*c[U-1]+c[U]*c[U],P[B]=Math.log(Math.abs(Math.max(P[B],_)))/Math.log(10),P[B]=P[B]*g},u.vsmul=function(c,_,g,P){g===void 0&&(g=c),P===void 0&&(P=g.length),P=Math.min(g.length,P),P=Math.min(c.length,P);for(var U=0;U<P&&!(g.length<=U);U++)g[U]=c[U]*_},u.vmxmn=function(c,_){var g=c[0],P=c[0],U=0,B=0;_=Math.min(_,c.length);for(var Z=0;Z<_;Z++)c[Z]>g&&(g=c[Z],U=Z),c[Z]<P&&(P=c[Z],B=Z);return{smax:g,smin:P,imax:U,imin:B}},u.vmov=function(c,_,g,P,U){U===void 0&&(U=c.length),U=Math.min(c.length,U);for(var B=0;B<U;B++){var Z=B*_,oe=B*P;if(Z>=c.length||oe>=g.length)break;g[oe]=c[Z]}},u.vfill=function(c,_,g){g===void 0&&(g=c.length),g=Math.min(c.length,g);for(var P=0;P<g;P++)c[P]=_},u.vabs=function(c,_,g){g===void 0&&(g=c.length),_===void 0&&(_=c);for(var P=0;P<g;P++)_[P]=Math.abs(c[P])},u.cvmag=function(c,_,g){g===void 0&&(g=_.length),g=Math.min(_.length,g);for(var P=0;P<g;P++){var U=2*P+1;if(U>=c.length)break;_[P]=Math.sqrt(c[U-1]*c[U-1]+c[U]*c[U])}},u.cvmag2=function(c,_,g){g===void 0&&(g=_.length),g=Math.min(_.length,g);for(var P=0,U=0;U<g&&(P=2*U+1,!(P>=c.length));U++)_[U]=c[P-1]*c[P-1]+c[P]*c[P]},u.cvpha=function(c,_,g){g===void 0&&(g=_.length),g=Math.min(_.length,g);for(var P=0,U=0,B=0,Z=0;Z<g&&(P=2*Z+1,!(P>=c.length));Z++)U=c[P-1],B=c[P],U===0&&B===0&&(U=1),_[Z]=Math.atan2(B,U)},u.cvphad=function(c,_,g){g===void 0&&(g=_.length),g=Math.min(_.length,g);for(var P=0,U=0,B=0,Z=0;Z<g&&(P=2*Z+1,!(P>=c.length));Z++)U=c[P-1],B=c[P],U===0&&B===0&&(U=1),_[Z]=Math.atan2(B,U)*(180/Math.PI)},u.trunc=function(c){return c-c%1},u.sign=function(c,_){return _>=0?Math.abs(c):-Math.abs(c)};function h(c){return(c<10?"0":"")+c}u.sec2tod=function(c,_){var g="",P=Date.UTC(1950,0,1),U=new Date(P),B=new Date,Z=new Date(B.getFullYear(),B.getMonth(),B.getDate(),0,0,0,0),oe=86400,ae=31536e3,Ae=-1*ae;if(c>=0)if(c<oe){var ue=Z.getTime()+c*1e3,B=new Date(ue);g=h(B.getHours())+":"+h(B.getMinutes())+":"+h(B.getSeconds())}else if(c===86400)g="24:00:00";else if(c<ae){var be=c/oe;be=[be>0?Math.floor(be):Math.ceil(be)];var Ee=Math.floor(c%oe),Me=Math.floor(Ee/3600),Be=Math.floor(Ee/60%60);Ee%=60,g=be.toString()+"::"+h(Me)+":"+h(Be)+":"+h(Ee)}else{var ve=Math.floor(c*1e3)+P;B=new Date(ve),g=B.getUTCFullYear()+":"+h(B.getUTCMonth()+1)+":"+h(B.getUTCDate())+"::"+h(B.getUTCHours())+":"+h(B.getUTCMinutes())+":"+h(B.getUTCSeconds())}else if(c>Ae){var be=c/oe;be=be<=0?Math.ceil(be):Math.floor(be);var Ee=Math.floor(Math.abs(c)%oe),Me=Math.floor(Ee/3600),Be=Math.floor(Ee/60%60);Ee%=60,be===0?be="-0":be=be.toString(),g=be+"::"+h(Me)+":"+h(Be)+":"+h(Ee)}else{var ve=Math.floor(c*1e3)+P;B=new Date(ve),g=B.getUTCFullYear()+":"+h(B.getUTCMonth()+1)+":"+h(B.getUTCDate())+"::"+h(B.getUTCHours())+":"+h(B.getUTCMinutes())+":"+h(B.getUTCSeconds())}var Ke=c%1;if(Ke===0?g+=".000000":g+="."+Math.abs(c%1).toPrecision(6).slice(2,8),_){var Ie=g.indexOf("."),Je=-1;Ie!==-1&&(Je=g.substr(Ie,g.length).indexOf("0")),Je!==-1&&(g=g.substr(0,Ie+Je))}return g};var s=(20*365+5)*(24*3600);u.sec2tspec=function(c,_,g){return _=_||"",c>=0&&c<=86400?u.sec2tod(c,g):(c=c%86400,_!=="delta"&&c<=0?u.sec2tod(c+86400,g):_==="delta"&&c<=0?"-"+u.sec2tod(-1*c,g):u.sec2tod(c,g))},u.sec2tod_j1970=function(c){var _="",g;if(c>=0&&c<86400)g=new Date(c*1e3),_=h(g.getHours())+":"+h(g.getMinutes())+":"+h(g.getSeconds());else if(c<0&&c>-31536e3){var P=-1*(c/86400);g=new Date(c*1e3),_=P.toString()+"::"+h(g.getHours())+":"+h(g.getMinutes())+":"+h(g.getSeconds())}else g=new Date((c-s)*1e3),_=g.getFullYear()+":"+h(g.getMonth())+":"+h(g.getDate())+"::"+h(g.getHours())+":"+h(g.getMinutes())+":"+h(g.getSeconds());return c%1!==0&&(_+="."+(c%1).toPrecision(6).slice(2,8)),_},u.j1970toj1950=function(c){return c.getTime!==void 0?c.getTime()/1e3+s:c+s},u.j1950toj1970=function(c){return c-s},u.throttle=function(c,_){var g=new Date().getTime();return function(){var P=new Date().getTime();P-g>=c&&(g=P,_.apply(null,arguments))}},u.pad=function(c,_){return _?(typeof _=="string"&&(_.endsWith("%")?_=c*(parseFloat(_)/100):_=parseFloat(_)),_):0},qr.exports=u})()});var Oi=$e((gs,ri)=>{(function(p){var y=/^\s+/,u=/\s+$/,r=0,l=p.round,t=p.min,a=p.max,h=p.random;function s(E,N){if(E=E||"",N=N||{},E instanceof s)return E;if(!(this instanceof s))return new s(E,N);var R=c(E);this._originalInput=E,this._r=R.r,this._g=R.g,this._b=R.b,this._a=R.a,this._roundA=l(100*this._a)/100,this._format=N.format||R.format,this._gradientType=N.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=R.ok,this._tc_id=r++}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var E=this.toRgb();return(E.r*299+E.g*587+E.b*114)/1e3},getLuminance:function(){var E=this.toRgb(),N,R,V,te,Q,fe;return N=E.r/255,R=E.g/255,V=E.b/255,N<=.03928?te=N/12.92:te=p.pow((N+.055)/1.055,2.4),R<=.03928?Q=R/12.92:Q=p.pow((R+.055)/1.055,2.4),V<=.03928?fe=V/12.92:fe=p.pow((V+.055)/1.055,2.4),.2126*te+.7152*Q+.0722*fe},setAlpha:function(E){return this._a=m(E),this._roundA=l(100*this._a)/100,this},toHsv:function(){var E=U(this._r,this._g,this._b);return{h:E.h*360,s:E.s,v:E.v,a:this._a}},toHsvString:function(){var E=U(this._r,this._g,this._b),N=l(E.h*360),R=l(E.s*100),V=l(E.v*100);return this._a==1?"hsv("+N+", "+R+"%, "+V+"%)":"hsva("+N+", "+R+"%, "+V+"%, "+this._roundA+")"},toHsl:function(){var E=g(this._r,this._g,this._b);return{h:E.h*360,s:E.s,l:E.l,a:this._a}},toHslString:function(){var E=g(this._r,this._g,this._b),N=l(E.h*360),R=l(E.s*100),V=l(E.l*100);return this._a==1?"hsl("+N+", "+R+"%, "+V+"%)":"hsla("+N+", "+R+"%, "+V+"%, "+this._roundA+")"},toHex:function(E){return Z(this._r,this._g,this._b,E)},toHexString:function(E){return"#"+this.toHex(E)},toHex8:function(E){return oe(this._r,this._g,this._b,this._a,E)},toHex8String:function(E){return"#"+this.toHex8(E)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(S(this._r,255)*100)+"%",g:l(S(this._g,255)*100)+"%",b:l(S(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+l(S(this._r,255)*100)+"%, "+l(S(this._g,255)*100)+"%, "+l(S(this._b,255)*100)+"%)":"rgba("+l(S(this._r,255)*100)+"%, "+l(S(this._g,255)*100)+"%, "+l(S(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:n[Z(this._r,this._g,this._b,!0)]||!1},toFilter:function(E){var N="#"+ae(this._r,this._g,this._b,this._a),R=N,V=this._gradientType?"GradientType = 1, ":"";if(E){var te=s(E);R="#"+ae(te._r,te._g,te._b,te._a)}return"progid:DXImageTransform.Microsoft.gradient("+V+"startColorstr="+N+",endColorstr="+R+")"},toString:function(E){var N=!!E;E=E||this._format;var R=!1,V=this._a<1&&this._a>=0,te=!N&&V&&(E==="hex"||E==="hex6"||E==="hex3"||E==="hex4"||E==="hex8"||E==="name");return te?E==="name"&&this._a===0?this.toName():this.toRgbString():(E==="rgb"&&(R=this.toRgbString()),E==="prgb"&&(R=this.toPercentageRgbString()),(E==="hex"||E==="hex6")&&(R=this.toHexString()),E==="hex3"&&(R=this.toHexString(!0)),E==="hex4"&&(R=this.toHex8String(!0)),E==="hex8"&&(R=this.toHex8String()),E==="name"&&(R=this.toName()),E==="hsl"&&(R=this.toHslString()),E==="hsv"&&(R=this.toHsvString()),R||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(E,N){var R=E.apply(null,[this].concat([].slice.call(N)));return this._r=R._r,this._g=R._g,this._b=R._b,this.setAlpha(R._a),this},lighten:function(){return this._applyModification(Ee,arguments)},brighten:function(){return this._applyModification(Me,arguments)},darken:function(){return this._applyModification(Be,arguments)},desaturate:function(){return this._applyModification(Ae,arguments)},saturate:function(){return this._applyModification(ue,arguments)},greyscale:function(){return this._applyModification(be,arguments)},spin:function(){return this._applyModification(ve,arguments)},_applyCombination:function(E,N){return E.apply(null,[this].concat([].slice.call(N)))},analogous:function(){return this._applyCombination(et,arguments)},complement:function(){return this._applyCombination(Ke,arguments)},monochromatic:function(){return this._applyCombination(tt,arguments)},splitcomplement:function(){return this._applyCombination(Ze,arguments)},triad:function(){return this._applyCombination(Ie,arguments)},tetrad:function(){return this._applyCombination(Je,arguments)}},s.fromRatio=function(E,N){if(typeof E=="object"){var R={};for(var V in E)E.hasOwnProperty(V)&&(V==="a"?R[V]=E[V]:R[V]=T(E[V]));E=R}return s(E,N)};function c(E){var N={r:0,g:0,b:0},R=1,V=null,te=null,Q=null,fe=!1,me=!1;return typeof E=="string"&&(E=ie(E)),typeof E=="object"&&(Y(E.r)&&Y(E.g)&&Y(E.b)?(N=_(E.r,E.g,E.b),fe=!0,me=String(E.r).substr(-1)==="%"?"prgb":"rgb"):Y(E.h)&&Y(E.s)&&Y(E.v)?(V=T(E.s),te=T(E.v),N=B(E.h,V,te),fe=!0,me="hsv"):Y(E.h)&&Y(E.s)&&Y(E.l)&&(V=T(E.s),Q=T(E.l),N=P(E.h,V,Q),fe=!0,me="hsl"),E.hasOwnProperty("a")&&(R=E.a)),R=m(R),{ok:fe,format:E.format||me,r:t(255,a(N.r,0)),g:t(255,a(N.g,0)),b:t(255,a(N.b,0)),a:R}}function _(E,N,R){return{r:S(E,255)*255,g:S(N,255)*255,b:S(R,255)*255}}function g(E,N,R){E=S(E,255),N=S(N,255),R=S(R,255);var V=a(E,N,R),te=t(E,N,R),Q,fe,me=(V+te)/2;if(V==te)Q=fe=0;else{var we=V-te;switch(fe=me>.5?we/(2-V-te):we/(V+te),V){case E:Q=(N-R)/we+(N<R?6:0);break;case N:Q=(R-E)/we+2;break;case R:Q=(E-N)/we+4;break}Q/=6}return{h:Q,s:fe,l:me}}function P(E,N,R){var V,te,Q;E=S(E,360),N=S(N,100),R=S(R,100);function fe(Se,pe,ke){return ke<0&&(ke+=1),ke>1&&(ke-=1),ke<1/6?Se+(pe-Se)*6*ke:ke<1/2?pe:ke<2/3?Se+(pe-Se)*(2/3-ke)*6:Se}if(N===0)V=te=Q=R;else{var me=R<.5?R*(1+N):R+N-R*N,we=2*R-me;V=fe(we,me,E+1/3),te=fe(we,me,E),Q=fe(we,me,E-1/3)}return{r:V*255,g:te*255,b:Q*255}}function U(E,N,R){E=S(E,255),N=S(N,255),R=S(R,255);var V=a(E,N,R),te=t(E,N,R),Q,fe,me=V,we=V-te;if(fe=V===0?0:we/V,V==te)Q=0;else{switch(V){case E:Q=(N-R)/we+(N<R?6:0);break;case N:Q=(R-E)/we+2;break;case R:Q=(E-N)/we+4;break}Q/=6}return{h:Q,s:fe,v:me}}function B(E,N,R){E=S(E,360)*6,N=S(N,100),R=S(R,100);var V=p.floor(E),te=E-V,Q=R*(1-N),fe=R*(1-te*N),me=R*(1-(1-te)*N),we=V%6,Se=[R,fe,Q,Q,me,R][we],pe=[me,R,R,fe,Q,Q][we],ke=[Q,Q,me,R,R,fe][we];return{r:Se*255,g:pe*255,b:ke*255}}function Z(E,N,R,V){var te=[z(l(E).toString(16)),z(l(N).toString(16)),z(l(R).toString(16))];return V&&te[0].charAt(0)==te[0].charAt(1)&&te[1].charAt(0)==te[1].charAt(1)&&te[2].charAt(0)==te[2].charAt(1)?te[0].charAt(0)+te[1].charAt(0)+te[2].charAt(0):te.join("")}function oe(E,N,R,V,te){var Q=[z(l(E).toString(16)),z(l(N).toString(16)),z(l(R).toString(16)),z(I(V))];return te&&Q[0].charAt(0)==Q[0].charAt(1)&&Q[1].charAt(0)==Q[1].charAt(1)&&Q[2].charAt(0)==Q[2].charAt(1)&&Q[3].charAt(0)==Q[3].charAt(1)?Q[0].charAt(0)+Q[1].charAt(0)+Q[2].charAt(0)+Q[3].charAt(0):Q.join("")}function ae(E,N,R,V){var te=[z(I(V)),z(l(E).toString(16)),z(l(N).toString(16)),z(l(R).toString(16))];return te.join("")}s.equals=function(E,N){return!E||!N?!1:s(E).toRgbString()==s(N).toRgbString()},s.random=function(){return s.fromRatio({r:h(),g:h(),b:h()})};function Ae(E,N){N=N===0?0:N||10;var R=s(E).toHsl();return R.s-=N/100,R.s=C(R.s),s(R)}function ue(E,N){N=N===0?0:N||10;var R=s(E).toHsl();return R.s+=N/100,R.s=C(R.s),s(R)}function be(E){return s(E).desaturate(100)}function Ee(E,N){N=N===0?0:N||10;var R=s(E).toHsl();return R.l+=N/100,R.l=C(R.l),s(R)}function Me(E,N){N=N===0?0:N||10;var R=s(E).toRgb();return R.r=a(0,t(255,R.r-l(255*-(N/100)))),R.g=a(0,t(255,R.g-l(255*-(N/100)))),R.b=a(0,t(255,R.b-l(255*-(N/100)))),s(R)}function Be(E,N){N=N===0?0:N||10;var R=s(E).toHsl();return R.l-=N/100,R.l=C(R.l),s(R)}function ve(E,N){var R=s(E).toHsl(),V=(R.h+N)%360;return R.h=V<0?360+V:V,s(R)}function Ke(E){var N=s(E).toHsl();return N.h=(N.h+180)%360,s(N)}function Ie(E){var N=s(E).toHsl(),R=N.h;return[s(E),s({h:(R+120)%360,s:N.s,l:N.l}),s({h:(R+240)%360,s:N.s,l:N.l})]}function Je(E){var N=s(E).toHsl(),R=N.h;return[s(E),s({h:(R+90)%360,s:N.s,l:N.l}),s({h:(R+180)%360,s:N.s,l:N.l}),s({h:(R+270)%360,s:N.s,l:N.l})]}function Ze(E){var N=s(E).toHsl(),R=N.h;return[s(E),s({h:(R+72)%360,s:N.s,l:N.l}),s({h:(R+216)%360,s:N.s,l:N.l})]}function et(E,N,R){N=N||6,R=R||30;var V=s(E).toHsl(),te=360/R,Q=[s(E)];for(V.h=(V.h-(te*N>>1)+720)%360;--N;)V.h=(V.h+te)%360,Q.push(s(V));return Q}function tt(E,N){N=N||6;for(var R=s(E).toHsv(),V=R.h,te=R.s,Q=R.v,fe=[],me=1/N;N--;)fe.push(s({h:V,s:te,v:Q})),Q=(Q+me)%1;return fe}s.mix=function(E,N,R){R=R===0?0:R||50;var V=s(E).toRgb(),te=s(N).toRgb(),Q=R/100,fe={r:(te.r-V.r)*Q+V.r,g:(te.g-V.g)*Q+V.g,b:(te.b-V.b)*Q+V.b,a:(te.a-V.a)*Q+V.a};return s(fe)},s.readability=function(E,N){var R=s(E),V=s(N);return(p.max(R.getLuminance(),V.getLuminance())+.05)/(p.min(R.getLuminance(),V.getLuminance())+.05)},s.isReadable=function(E,N,R){var V=s.readability(E,N),te,Q;switch(Q=!1,te=ne(R),te.level+te.size){case"AAsmall":case"AAAlarge":Q=V>=4.5;break;case"AAlarge":Q=V>=3;break;case"AAAsmall":Q=V>=7;break}return Q},s.mostReadable=function(E,N,R){var V=null,te=0,Q,fe,me,we;R=R||{},fe=R.includeFallbackColors,me=R.level,we=R.size;for(var Se=0;Se<N.length;Se++)Q=s.readability(E,N[Se]),Q>te&&(te=Q,V=s(N[Se]));return s.isReadable(E,V,{level:me,size:we})||!fe?V:(R.includeFallbackColors=!1,s.mostReadable(E,["#fff","#000"],R))};var it=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},n=s.hexNames=o(it);function o(E){var N={};for(var R in E)E.hasOwnProperty(R)&&(N[E[R]]=R);return N}function m(E){return E=parseFloat(E),(isNaN(E)||E<0||E>1)&&(E=1),E}function S(E,N){k(E)&&(E="100%");var R=A(E);return E=t(N,a(0,parseFloat(E))),R&&(E=parseInt(E*N,10)/100),p.abs(E-N)<1e-6?1:E%N/parseFloat(N)}function C(E){return t(1,a(0,E))}function v(E){return parseInt(E,16)}function k(E){return typeof E=="string"&&E.indexOf(".")!=-1&&parseFloat(E)===1}function A(E){return typeof E=="string"&&E.indexOf("%")!=-1}function z(E){return E.length==1?"0"+E:""+E}function T(E){return E<=1&&(E=E*100+"%"),E}function I(E){return p.round(parseFloat(E)*255).toString(16)}function D(E){return v(E)/255}var L=function(){var E="[-\\+]?\\d+%?",N="[-\\+]?\\d*\\.\\d+%?",R="(?:"+N+")|(?:"+E+")",V="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",te="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?";return{CSS_UNIT:new RegExp(R),rgb:new RegExp("rgb"+V),rgba:new RegExp("rgba"+te),hsl:new RegExp("hsl"+V),hsla:new RegExp("hsla"+te),hsv:new RegExp("hsv"+V),hsva:new RegExp("hsva"+te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(E){return!!L.CSS_UNIT.exec(E)}function ie(E){E=E.replace(y,"").replace(u,"").toLowerCase();var N=!1;if(it[E])E=it[E],N=!0;else if(E=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var R;return(R=L.rgb.exec(E))?{r:R[1],g:R[2],b:R[3]}:(R=L.rgba.exec(E))?{r:R[1],g:R[2],b:R[3],a:R[4]}:(R=L.hsl.exec(E))?{h:R[1],s:R[2],l:R[3]}:(R=L.hsla.exec(E))?{h:R[1],s:R[2],l:R[3],a:R[4]}:(R=L.hsv.exec(E))?{h:R[1],s:R[2],v:R[3]}:(R=L.hsva.exec(E))?{h:R[1],s:R[2],v:R[3],a:R[4]}:(R=L.hex8.exec(E))?{r:v(R[1]),g:v(R[2]),b:v(R[3]),a:D(R[4]),format:N?"name":"hex8"}:(R=L.hex6.exec(E))?{r:v(R[1]),g:v(R[2]),b:v(R[3]),format:N?"name":"hex"}:(R=L.hex4.exec(E))?{r:v(R[1]+""+R[1]),g:v(R[2]+""+R[2]),b:v(R[3]+""+R[3]),a:D(R[4]+""+R[4]),format:N?"name":"hex8"}:(R=L.hex3.exec(E))?{r:v(R[1]+""+R[1]),g:v(R[2]+""+R[2]),b:v(R[3]+""+R[3]),format:N?"name":"hex"}:!1}function ne(E){var N,R;return E=E||{level:"AA",size:"small"},N=(E.level||"AA").toUpperCase(),R=(E.size||"small").toLowerCase(),N!=="AA"&&N!=="AAA"&&(N="AA"),R!=="small"&&R!=="large"&&(R="small"),{level:N,size:R}}typeof ri<"u"&&ri.exports?ri.exports=s:typeof define=="function"&&define.amd?define(function(){return s}):window.tinycolor=s})(Math)});var $r=$e((bs,Vr)=>{(function(){var p=Oi();typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(r,l){"use strict";if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),a=1;a<arguments.length;a++){var h=arguments[a];if(h!=null)for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&(t[s]=h[s])}return t},writable:!0,configurable:!0});var y=window.ColorMap=function(u,r){this.options={ncolors:500,alpha:255},this.options=Object.assign(this.options,r),this.map=[];var l=0;this._low=0,this._high=1;var t=this.options.ncolors;this._fscale=t/(this._high-this._low);var a=1,h=1;u=JSON.parse(JSON.stringify(u)),u=this._parseColors(u),this.colors=u;for(var s=u[0],c=u[1],_=u[1].pos-u[0].pos,g=t*(_/100),P=1/g,U=0;U<t-2;U++){if(h>g){if(s=u[a],c=u[a+1],c===void 0||s.pos>=100&&c.pos>=100)break;var _=c.pos-s.pos,g=t*(_/100),P=1/g,h=1;a+=1}this._addColor(this.interpolate(s,c,P*h)),h+=1}this._addColor(u[a]),this._addColor(u[0],!0)};y.prototype={_addColor:function(u,r){u.hex=this._rgbToHex(u.red,u.green,u.blue),u.color=u.alpha<<24|u.blue<<16|u.green<<8|u.red,r?this.map.unshift(u):this.map.push(u)},_parseColors:function(u){for(var r=0,l=u.length;r<l;r++){var t=u[r];if(typeof t=="string")u[r]=this._hexToRgb(t),t=p(t),t=t.toRgb(),u[r]={red:t.r,green:t.g,blue:t.b,alpha:this.options.alpha};else if(t.hasOwnProperty("color")){var a=p(t.color);a=a.toRgb(),a={red:a.r,green:a.g,blue:a.b,alpha:this.options.alpha},t.hasOwnProperty("pos")&&(a.pos=t.pos),u[r]=a}else t.red===void 0&&t.green===void 0&&t.blue===void 0?(u[r].red=Math.floor(Math.round(255*t[0])),u[r].green=Math.floor(Math.round(255*t[1])),u[r].blue=Math.floor(Math.round(255*t[2]))):(u[r].red=Math.floor(Math.round(255*(t.red/100))),u[r].green=Math.floor(Math.round(255*(t.green/100))),u[r].blue=Math.floor(Math.round(255*(t.blue/100))));u[r].hasOwnProperty("alpha")||(u[r].alpha=this.options.alpha)}return this._checkColorStops(u)},_checkColorStops:function(u){for(var r=0,l=0,t=0,a=u.length;t<a;t++){var h=u[t];if(!h.hasOwnProperty("pos"))l+=1;else{if(l)for(var s=(h.pos-r)/l,c=h.pos,_=1;_<=l;_++)u[t-_].pos=c-s,c-=s;l=0}}if(l){var c=100;u[u.length-1].pos=c,r===0&&(u[0].pos=0,l-=1);for(var s=(c-r)/l,t=u.length-1,_=1;_<l;_++)u[t-_].pos=c-s,c-=s}return u},_componentToHex:function(u){var r=u.toString(16);return r.length===1?"0"+r:r},_rgbToHex:function(u,r,l){return"#"+this._componentToHex(u)+this._componentToHex(r)+this._componentToHex(l)},_hexToRgb:function(u){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return r?{red:parseInt(r[1],16),green:parseInt(r[2],16),blue:parseInt(r[3],16)}:null},getColor:function(u){var r=this.getColorIndex(u);return this.map[r]},getColorByIndex:function(u){return this.map[u]},getColorIndex:function(u){var r=(u-this._low)*this._fscale,l=~~r;return l>this.map.length-1?l=this.map.length-1:l<0&&(l=0),l},getNColors:function(){return this.map.length},setRange:function(u,r){(this._low!==u||this._high!==r)&&(this._low=u,this._high=r,this._fscale=this.map.length/Math.abs(this._high-this._low))},interpolate:function(u,r,l){return{red:u.red+l*(r.red-u.red),green:u.green+l*(r.green-u.green),blue:u.blue+l*(r.blue-u.blue),alpha:u.alpha+l*(r.alpha-u.alpha)}}},Vr.exports=y})()});var Jr=$e((ws,Kr)=>{(function(){var p=[],y=window.CanvasInput=function(u){var r=this;u=u||{},r._canvas=u.canvas||null,r._ctx=r._canvas?r._canvas.getContext("2d"):null,r._x=u.x||0,r._y=u.y||0,r._extraX=u.extraX||0,r._extraY=u.extraY||0,r._fontSize=u.fontSize||14,r._fontFamily=u.fontFamily||"Arial",r._fontColor=u.fontColor||"#000",r._placeHolderColor=u.placeHolderColor||"#bfbebd",r._fontWeight=u.fontWeight||"normal",r._fontStyle=u.fontStyle||"normal",r._readonly=u.readonly||!1,r._maxlength=u.maxlength||null,r._width=u.width||150,r._height=u.height||r._fontSize,r._padding=u.padding>=0?u.padding:5,r._borderWidth=u.borderWidth>=0?u.borderWidth:1,r._borderColor=u.borderColor||"#959595",r._borderRadius=u.borderRadius>=0?u.borderRadius:3,r._backgroundImage=u.backgroundImage||"",r._boxShadow=u.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)",r._innerShadow=u.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)",r._selectionColor=u.selectionColor||"rgba(179, 212, 253, 0.8)",r._placeHolder=u.placeHolder||"",r._value=u.value||r._placeHolder,r._onsubmit=u.onsubmit||function(){},r._onkeydown=u.onkeydown||function(){},r._onkeyup=u.onkeyup||function(){},r._onfocus=u.onfocus||function(){},r._onblur=u.onblur||function(){},r._cursor=!1,r._cursorPos=0,r._hasFocus=!1,r._selection=[0,0],r._wasOver=!1,r._renderOnReturn=u.renderOnReturn!==void 0?u.renderOnReturn:!0,r._disableBlur=u.disableBlur||!1,r._tabToClear=u.tabToClear||!1,r.boxShadow(r._boxShadow,!0),r._calcWH(),r._renderCanvas=document.createElement("canvas"),r._renderCanvas.setAttribute("width",r.outerW),r._renderCanvas.setAttribute("height",r.outerH),r._renderCtx=r._renderCanvas.getContext("2d"),r._shadowCanvas=document.createElement("canvas"),r._shadowCanvas.setAttribute("width",r._width+r._padding*2),r._shadowCanvas.setAttribute("height",r._height+r._padding*2),r._shadowCtx=r._shadowCanvas.getContext("2d"),typeof u.backgroundGradient<"u"?(r._backgroundColor=r._renderCtx.createLinearGradient(0,0,0,r.outerH),r._backgroundColor.addColorStop(0,u.backgroundGradient[0]),r._backgroundColor.addColorStop(1,u.backgroundGradient[1])):r._backgroundColor=u.backgroundColor||"#fff",r._canvas&&(r.mousemoveCanvasListener=function(l){l=l||window.event,r.mousemove(l,r)},r._canvas.addEventListener("mousemove",r.mousemoveCanvasListener,!1),r.mousedownCanvasListener=function(l){l=l||window.event,r.mousedown(l,r)},r._canvas.addEventListener("mousedown",r.mousedownCanvasListener,!1),r.mouseupCanvasListener=function(l){l=l||window.event,r.mouseup(l,r)},r._canvas.addEventListener("mouseup",r.mouseupCanvasListener,!1)),r.mouseupWindowListener=function(l){l=l||window.event,r._hasFocus&&!r._mouseDown&&r.blur()},window.addEventListener("mouseup",r.mouseupWindowListener,!0),r.keydownWindowListener=function(l){l=l||window.event,r._hasFocus&&r.keydown(l,r)},window.addEventListener("keydown",r.keydownWindowListener,!1),r.keyupWindowListener=function(l){l=l||window.event,r._hasFocus&&r._onkeyup(l,r)},window.addEventListener("keyup",r.keyupWindowListener,!1),r.pasteWindowListener=function(l){if(l=l||window.event,r._hasFocus){var t=l.clipboardData.getData("text/plain"),a=r._value.substr(0,r._cursorPos),h=r._value.substr(r._cursorPos);r._value=a+t+h,r._cursorPos+=t.length,r.render()}},window.addEventListener("paste",r.pasteWindowListener,!1),p.push(r),r._inputsIndex=p.length-1,r.render()};y.prototype={canvas:function(u){var r=this;return typeof u<"u"?(r._canvas=u,r._ctx=r._canvas.getContext("2d"),r.render()):r._canvas},x:function(u){var r=this;return typeof u<"u"?(r._x=u,r.render()):r._x},y:function(u){var r=this;return typeof u<"u"?(r._y=u,r.render()):r._y},extraX:function(u){var r=this;return typeof u<"u"?(r._extraX=u,r.render()):r._extraX},extraY:function(u){var r=this;return typeof u<"u"?(r._extraY=u,r.render()):r._extraY},fontSize:function(u){var r=this;return typeof u<"u"?(r._fontSize=u,r.render()):r._fontSize},fontFamily:function(u){var r=this;return typeof u<"u"?(r._fontFamily=u,r.render()):r._fontFamily},fontColor:function(u){var r=this;return typeof u<"u"?(r._fontColor=u,r.render()):r._fontColor},placeHolderColor:function(u){var r=this;return typeof u<"u"?(r._placeHolderColor=u,r.render()):r._placeHolderColor},fontWeight:function(u){var r=this;return typeof u<"u"?(r._fontWeight=u,r.render()):r._fontWeight},fontStyle:function(u){var r=this;return typeof u<"u"?(r._fontStyle=u,r.render()):r._fontStyle},width:function(u){var r=this;return typeof u<"u"?(r._width=u,r._calcWH(),r._updateCanvasWH(),r.render()):r._width},height:function(u){var r=this;return typeof u<"u"?(r._height=u,r._calcWH(),r._updateCanvasWH(),r.render()):r._height},padding:function(u){var r=this;return typeof u<"u"?(r._padding=u,r._calcWH(),r._updateCanvasWH(),r.render()):r._padding},borderWidth:function(u){var r=this;return typeof u<"u"?(r._borderWidth=u,r._calcWH(),r._updateCanvasWH(),r.render()):r._borderWidth},borderColor:function(u){var r=this;return typeof u<"u"?(r._borderColor=u,r.render()):r._borderColor},borderRadius:function(u){var r=this;return typeof u<"u"?(r._borderRadius=u,r.render()):r._borderRadius},backgroundColor:function(u){var r=this;return typeof u<"u"?(r._backgroundColor=u,r.render()):r._backgroundColor},backgroundGradient:function(u){var r=this;return typeof u<"u"?(r._backgroundColor=r._renderCtx.createLinearGradient(0,0,0,r.outerH),r._backgroundColor.addColorStop(0,u[0]),r._backgroundColor.addColorStop(1,u[1]),r.render()):r._backgroundColor},boxShadow:function(u,r){var l=this;if(typeof u<"u"){var t=u.split("px ");if(l._boxShadow={x:l._boxShadow==="none"?0:parseInt(t[0],10),y:l._boxShadow==="none"?0:parseInt(t[1],10),blur:l._boxShadow==="none"?0:parseInt(t[2],10),color:l._boxShadow==="none"?"":t[3]},l._boxShadow.x<0?(l.shadowL=Math.abs(l._boxShadow.x)+l._boxShadow.blur,l.shadowR=l._boxShadow.blur+l._boxShadow.x):(l.shadowL=Math.abs(l._boxShadow.blur-l._boxShadow.x),l.shadowR=l._boxShadow.blur+l._boxShadow.x),l._boxShadow.y<0?(l.shadowT=Math.abs(l._boxShadow.y)+l._boxShadow.blur,l.shadowB=l._boxShadow.blur+l._boxShadow.y):(l.shadowT=Math.abs(l._boxShadow.blur-l._boxShadow.y),l.shadowB=l._boxShadow.blur+l._boxShadow.y),l.shadowW=l.shadowL+l.shadowR,l.shadowH=l.shadowT+l.shadowB,l._calcWH(),!r)return l._updateCanvasWH(),l.render()}else return l._boxShadow},innerShadow:function(u){var r=this;return typeof u<"u"?(r._innerShadow=u,r.render()):r._innerShadow},selectionColor:function(u){var r=this;return typeof u<"u"?(r._selectionColor=u,r.render()):r._selectionColor},placeHolder:function(u){var r=this;return typeof u<"u"?(r._placeHolder=u,r.render()):r._placeHolder},value:function(u){var r=this;return typeof u<"u"?(r._value=u,r.focus()):r._value},onsubmit:function(u){var r=this;if(typeof u<"u")return r._onsubmit=u,r;r._onsubmit()},onkeydown:function(u){var r=this;if(typeof u<"u")return r._onkeydown=u,r;r._onkeydown()},onkeyup:function(u){var r=this;if(typeof u<"u")return r._onkeyup=u,r;r._onkeyup()},focus:function(u){var r=this,l;if(!r._readonly){r._hasFocus||r._onfocus(r),r._selectionUpdated?delete r._selectionUpdated:r._selection=[0,0],r._cursorPos=typeof u=="number"?u:r._clipText().length,r._placeHolder===r._value&&(r._value=""),r._hasFocus=!0,r._cursor=!0,r._cursorInterval&&clearInterval(r._cursorInterval),r._cursorInterval=setInterval(function(){r._cursor=!r._cursor,r.render()},500);var t=navigator.userAgent.toLowerCase(),a=t.indexOf("chrome")>=0&&t.indexOf("mobile")>=0&&t.indexOf("android")>=0,h=typeof window.orientation<"u";return h&&!a&&document&&document.createElement&&(l=document.createElement("input"))?(l.type="text",l.style.opacity=0,l.style.position="absolute",l.style.left=r._x+r._extraX+(r._canvas?r._canvas.offsetLeft:0)+"px",l.style.top=r._y+r._extraY+(r._canvas?r._canvas.offsetTop:0)+"px",l.style.width=r._width,l.style.height=0,document.body.appendChild(l),l.focus(),l.addEventListener("blur",function(){r.blur(r)},!1)):h&&r.value(prompt(r._placeHolder)||""),r.render()}},blur:function(u){var r=u||this;return r._disableBlur||(r._onblur(r),r._cursorInterval&&clearInterval(r._cursorInterval),r._hasFocus=!1,r._cursor=!1,r._selection=[0,0],r._value===""&&(r._value=r._placeHolder)),r.render()},disableBlur:function(u){var r=u||this;r._disableBlur=!0},enableBlur:function(u){var r=u||this;r._disableBlur=!1},keydown:function(u,r){var l=u.which,t=u.shiftKey,a=null,h,s;if(!!r._hasFocus){if(r._onkeydown(u,r),l===65&&(u.ctrlKey||u.metaKey))return r._selection=[0,r._value.length],u.preventDefault(),r.render();if(l===17||u.metaKey||u.ctrlKey)return r;if(u.preventDefault(),l===8)r._clearSelection()||r._cursorPos>0&&(h=r._value.substr(0,r._cursorPos-1),s=r._value.substr(r._cursorPos,r._value.length),r._value=h+s,r._cursorPos--);else if(l===37)r._cursorPos>0&&(r._cursorPos--,r._cursor=!0,r._selection=[0,0]);else if(l===39)r._cursorPos<r._value.length&&(r._cursorPos++,r._cursor=!0,r._selection=[0,0]);else if(l===13)r._onsubmit(u,r);else if(l===9)if(r._tabToClear)r._value="",r._cursorPos=0;else{var c=p[r._inputsIndex+1]?r._inputsIndex+1:0;c!==r._inputsIndex&&(r.blur(),setTimeout(function(){p[c].focus()},10))}else if(a=r._mapCodeToKey(t,l)){if(r._clearSelection(),r._maxlength&&r._maxlength<=r._value.length)return;h=r._value?r._value.substr(0,r._cursorPos):"",s=r._value?r._value.substr(r._cursorPos):"",r._value=h+a+s,r._cursorPos++}return l==13&&r._renderOnReturn||l!==13?r.render():function(){}}},click:function(u,r){var l=r._mousePos(u),t=l.x,a=l.y;if(r._endSelection){delete r._endSelection,delete r._selectionUpdated;return}if(r._canvas&&r._overInput(t,a)||!r._canvas){if(r._mouseDown)return r._mouseDown=!1,r.click(u,r),r.focus(r._clickPos(t,a))}else return r.blur()},mousemove:function(u,r){var l=r._mousePos(u),t=l.x,a=l.y,h=r._overInput(t,a);if(h&&r._canvas?(r._canvas.style.cursor="text",r._wasOver=!0):r._wasOver&&r._canvas&&(r._canvas.style.cursor="default",r._wasOver=!1),r._hasFocus&&r._selectionStart>=0){var s=r._clickPos(t,a),c=Math.min(r._selectionStart,s),_=Math.max(r._selectionStart,s);if(!h){r._selectionUpdated=!0,r._endSelection=!0,delete r._selectionStart,r.render();return}(r._selection[0]!==c||r._selection[1]!==_)&&(r._selection=[c,_],r.render())}},mousedown:function(u,r){var l=r._mousePos(u),t=l.x,a=l.y,h=r._overInput(t,a);r._mouseDown=h,r._hasFocus&&h&&(r._selectionStart=r._clickPos(t,a))},mouseup:function(u,r){var l=r._mousePos(u),t=l.x,a=l.y,h=r._clickPos(t,a)!==r._selectionStart;r._hasFocus&&r._selectionStart>=0&&r._overInput(t,a)&&h?(r._selectionUpdated=!0,delete r._selectionStart,r.render()):delete r._selectionStart,r.click(u,r)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",this.mouseupCanvasListener,!1),this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1),this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1),window.removeEventListener("keydown",this.keydownWindowListener,!1),window.removeEventListener("keyup",this.keyupWindowListener,!1),window.removeEventListener("mouseup",this.mouseupWindowListener,!0),window.removeEventListener("paste",this.pasteWindowListener,!1),clearInterval(this._cursorInterval),this._canvas.style.cursor="default";for(var u=p.length-1;u>=0;u--)p[u]===this&&p.splice(u,1)},render:function(){var u=this,r=u._renderCtx,l=u.outerW,t=u.outerH,a=u._borderRadius,h=u._borderWidth,s=u.shadowW,c=u.shadowH;r.clearRect(0,0,r.canvas.width,r.canvas.height),r.shadowOffsetX=u._boxShadow.x,r.shadowOffsetY=u._boxShadow.y,r.shadowBlur=u._boxShadow.blur,r.shadowColor=u._boxShadow.color,u._borderWidth>0&&(r.fillStyle=u._borderColor,u._roundedRect(r,u.shadowL,u.shadowT,l-s,t-c,a),r.fill(),r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0),u._drawTextBox(function(){r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0;var _=u._clipText(),g=u._padding+u._borderWidth+u.shadowT;if(u._selection[1]>0){var P=u._textWidth(_.substring(0,u._selection[0])),U=u._textWidth(_.substring(u._selection[0],u._selection[1]));r.fillStyle=u._selectionColor,r.fillRect(g+P,g,U,u._height)}if(r.fillStyle=u._placeHolder===u._value&&u._value!==""?u._placeHolderColor:u._fontColor,u._cursor){var B=u._textWidth(_.substring(0,u._cursorPos));r.fillRect(g+B,g,1,u._height)}var Z=u._padding+u._borderWidth+u.shadowL,oe=Math.round(g+u._height/2);r.font=u._fontStyle+" "+u._fontWeight+" "+u._fontSize+"px "+u._fontFamily,r.textAlign="left",r.textBaseline="middle",r.fillText(_,Z,oe);var ae=u._innerShadow.split("px "),Ae=u._innerShadow==="none"?0:parseInt(ae[0],10),ue=u._innerShadow==="none"?0:parseInt(ae[1],10),be=u._innerShadow==="none"?0:parseInt(ae[2],10),Ee=u._innerShadow==="none"?"":ae[3];if(be>0){var Me=u._shadowCtx,Be=Me.canvas.width,ve=Me.canvas.height;Me.clearRect(0,0,Be,ve),Me.shadowBlur=be,Me.shadowColor=Ee,Me.shadowOffsetX=0,Me.shadowOffsetY=ue,Me.fillRect(-1*l,-100,3*l,100),Me.shadowOffsetX=Ae,Me.shadowOffsetY=0,Me.fillRect(Be,-1*t,100,3*t),Me.shadowOffsetX=0,Me.shadowOffsetY=ue,Me.fillRect(-1*l,ve,3*l,100),Me.shadowOffsetX=Ae,Me.shadowOffsetY=0,Me.fillRect(-100,-1*t,100,3*t),u._roundedRect(r,h+u.shadowL,h+u.shadowT,l-h*2-s,t-h*2-c,a),r.clip(),r.drawImage(u._shadowCanvas,0,0,Be,ve,h+u.shadowL,h+u.shadowT,Be,ve)}return u._ctx&&(u._ctx.clearRect(u._x,u._y,r.canvas.width,r.canvas.height),u._ctx.drawImage(u._renderCanvas,u._x,u._y)),u})},_drawTextBox:function(u){var r=this,l=r._renderCtx,t=r.outerW,a=r.outerH,h=r._borderRadius,s=r._borderWidth,c=r.shadowW,_=r.shadowH;if(r._backgroundImage==="")l.fillStyle=r._backgroundColor,r._roundedRect(l,s+r.shadowL,s+r.shadowT,t-s*2-c,a-s*2-_,h),l.fill(),u();else{var g=new Image;g.src=r._backgroundImage,g.onload=function(){l.drawImage(g,0,0,g.width,g.height,s+r.shadowL,s+r.shadowT,t,a),u()}}},_clearSelection:function(){var u=this;if(u._selection[1]>0){var r=u._selection[0],l=u._selection[1];return u._value=u._value.substr(0,r)+u._value.substr(l),u._cursorPos=r,u._cursorPos=u._cursorPos<0?0:u._cursorPos,u._selection=[0,0],!0}return!1},_clipText:function(u){var r=this;u=typeof u>"u"?r._value:u;var l=r._textWidth(u),t=l/(r._width-r._padding),a=t>1?u.substr(-1*Math.floor(u.length/t)):u;return a+""},_textWidth:function(u){var r=this,l=r._renderCtx;return l.font=r._fontStyle+" "+r._fontWeight+" "+r._fontSize+"px "+r._fontFamily,l.textAlign="left",l.measureText(u).width},_calcWH:function(){var u=this;u.outerW=u._width+u._padding*2+u._borderWidth*2+u.shadowW,u.outerH=u._height+u._padding*2+u._borderWidth*2+u.shadowH},_updateCanvasWH:function(){var u=this,r=u._renderCanvas.width,l=u._renderCanvas.height;u._renderCanvas.setAttribute("width",u.outerW),u._renderCanvas.setAttribute("height",u.outerH),u._shadowCanvas.setAttribute("width",u._width+u._padding*2),u._shadowCanvas.setAttribute("height",u._height+u._padding*2),u._ctx&&u._ctx.clearRect(u._x,u._y,r,l)},_roundedRect:function(u,r,l,t,a,h){t<2*h&&(h=t/2),a<2*h&&(h=a/2),u.beginPath(),u.moveTo(r+h,l),u.lineTo(r+t-h,l),u.quadraticCurveTo(r+t,l,r+t,l+h),u.lineTo(r+t,l+a-h),u.quadraticCurveTo(r+t,l+a,r+t-h,l+a),u.lineTo(r+h,l+a),u.quadraticCurveTo(r,l+a,r,l+a-h),u.lineTo(r,l+h),u.quadraticCurveTo(r,l,r+h,l),u.closePath()},_overInput:function(u,r){var l=this,t=u>=l._x+l._extraX,a=u<=l._x+l._extraX+l._width+l._padding*2,h=r>=l._y+l._extraY,s=r<=l._y+l._extraY+l._height+l._padding*2;return t&&a&&h&&s},_clickPos:function(u,r){var l=this,t=l._value;l._value===l._placeHolder&&(t="");var a=l._clipText(t),h=0,s=a.length;if(u-(l._x+l._extraX)<l._textWidth(a)){for(var c=0;c<a.length;c++)if(h+=l._textWidth(a[c]),h>=u-(l._x+l._extraX)){s=c;break}}return s},_mousePos:function(u){var r=u.target,l=document.defaultView.getComputedStyle(r,void 0),t=parseInt(l.paddingLeft,10)||0,a=parseInt(l.paddingLeft,10)||0,h=parseInt(l.borderLeftWidth,10)||0,s=parseInt(l.borderLeftWidth,10)||0,c=document.body.parentNode.offsetTop||0,_=document.body.parentNode.offsetLeft||0,g=0,P=0,U,B;if(typeof r.offsetParent<"u")do g+=r.offsetLeft,P+=r.offsetTop;while(r=r.offsetParent);return g+=t+h+_,P+=a+s+c,{x:u.pageX-g,y:u.pageY-P}},_mapCodeToKey:function(u,r){for(var l=this,t=[8,9,13,16,17,18,20,27,91,92],a="",h=0;h<t.length;h++)if(r===t[h])return;if(!(typeof u!="boolean"||typeof r!="number")){var s={32:" ",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",173:"_",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'};return u?a=r>=65&&r<=90?String.fromCharCode(r):s[r]:r>=65&&r<=90?a=String.fromCharCode(r).toLowerCase():r===96?a="0":r===97?a="1":r===98?a="2":r===99?a="3":r===100?a="4":r===101?a="5":r===102?a="6":r===103?a="7":r===104?a="8":r===105?a="9":r===188?a=",":r===190?a=".":r===191?a="/":r===192?a="`":r===220?a="\\":r===187?a="=":r===189||r===173?a="-":r===222?a="'":r===186?a=";":r===219?a="[":r===221?a="]":a=String.fromCharCode(r),a}}},Kr.exports=y})()});var jr=$e((ks,Zr)=>{(function(){var p=vt(),y=function(u,r,l){this.options={itemClass:"sigplot-menu-item"},p.update(this.options,l),this._Mx=u,this._container=u.root,this._menu=document.createElement("div");var t="z-index:2;float:left;position:relative;left:"+u.xpos+"px;top:"+u.ypos+"px;";this._menu.classList.add("sigplot-menu");var a=new Date;this._menuId="menu-"+a.getSeconds()+a.getMilliseconds(),this._menu.classList.add(this._menuId),this._menu.style=t,this._items=[],this.setCSS(),this.createMenu(r)};y.prototype={createMenu:function(u){var r=this,l=this._Mx,t=u.finalize;u.finalize=function(){r.remove(),t()},this.finalize=u.finalize;var a=document.createElement("div");a.addEventListener("mousedown",function(s){s.preventDefault(),r._movingOffsetX=s.offsetX,r._movingOffsetY=s.offsetY,r._moving=!0}),a.addEventListener("mouseup",function(s){s.preventDefault(),r._moving=!1}),r._moveMenu=function(s){r._moving&&(r._menu.style.position="fixed",r._menu.style.top=s.clientY-r._movingOffsetY+"px",r._menu.style.left=s.clientX-r._movingOffsetX+"px")},document.body.addEventListener("mousemove",r._moveMenu),a.classList.add("sigplot-menu-title"),a.innerText=u.title,this._menu.append(a);var h=document.createElement("ul");h.classList.add("sigplot-menu-list"),u.items.forEach(function(s){var c=r._createMenuItem(s,u);h.append(c)}),this._menu.append(h),this._container.append(this._menu),this._menu.addEventListener("contextmenu",function(s){s.preventDefault(),r.finalize()}),l.menu=this,l.widget={type:"MENU",callback:function(s){s.type==="mousedown"&&(s.which===1||s.which===2||s.which===3)&&(r._Mx.menu===r&&!s.target.classList.contains(r.options.itemClass)&&r.finalize(),r._Mx.menu||r.finalize()),s.type==="mouseup"&&(r._moving=!1),s.type==="keydown"&&r._handleKeyEvents(s)}}},_handleKeyEvents:function(u){var r=this;if(u.key==="ArrowDown")if(u.preventDefault(),!r._active)r._setActive(r._items[0]);else{var l=r._items.indexOf(r._active)+1;if(l>r._items.length-1)return;r._setActive(r._items[l])}if(u.key==="ArrowUp")if(u.preventDefault(),!r._active)r._setActive(r._items[0]);else{var l=r._items.indexOf(r._active)-1;if(l<0)return;r._setActive(r._items[l])}if(u.key==="Enter"){u.preventDefault(),r._active||r._setActive(r._items[0]);var t=r._active;t.onclick?t.onclick():t.click&&t.click()}},_setActive:function(u){this._active&&this._clearActive(),this._active=u,u.classList.add("active")},_clearActive:function(){this._active.classList.remove("active"),this._active=null},_createMenuItem:function(u,r){var l=this,t=this._Mx,a=document.createElement("li");return a.className+=" "+l.options.itemClass,a.innerText=u.text,u.style&&(a.className+=" "+u.style),u.hasOwnProperty("checked")&&(a.className+=" sigplot-menu-checkbox",u.checked&&(a.className+=" checked")),a.addEventListener("click",function(){if(l.remove(),t.menu=void 0,t.widget=null,u.handler)u.handler();else if(u.menu){var h=u.menu;typeof u.menu=="function"&&(h=u.menu()),h.finalize=r.finalize,new y(t,h)}!t.menu&&r.finalize&&r.finalize()}),a.addEventListener("mouseenter",function(h){l._setActive(h.target)}),a.addEventListener("mouseleave",function(h){l._clearActive()}),l._items.push(a),a},remove:function(){var u=this._Mx;u.menu=void 0,u.widget=null,this._menu.remove(),document.body.removeEventListener("mousemove",this._moveMenu)},setCSS:function(){var u=this._Mx,r="mx-menu-css",l=document.createElement("style"),t;if(l.id=r,t="."+this._menuId+`{
background-color: `+u.xwbg+`;
font: `+u.font.font+`;
color:`+u.xwfg+`
}   
.sigplot-menu-list {
    margin: 0px;
    list-style: none;
    padding: 0px;
}
.`+this._menuId+`>div {
    cursor: move;
    text-align: center;
    border-bottom: 2px solid `+u.xwts+`;
}
.`+this._menuId+`>ul>li{
    border-top: 2px solid `+u.bg+`;
    background-color: `+u.xwlo+`;
    padding: 1px;
    padding-right: 5px;
    padding-left: 5px;
    cursor:default;
}
.`+this._menuId+`>ul>li.active{
    background-color: `+u.hi+`;
}
.`+this._menuId+` {
    position: relative;
    color: white;
    float: left;
    border-radius: 5px;
    padding: 3px;
    font: `+u.font.font+`;
    color:`+u.xwfg+`
}
.`+this._menuId+`>ul>li.separator {
    background-color: `+u.xwbs+`;
}
.sigplot-menu-checkbox:before{
    margin-right: 3px; 
}
.sigplot-menu-checkbox.checked:before {
    content: '\\25b8';
    width: 2px;
    height: 3px;
}
.sigplot-menu-checkbox.checkbox:before {
    content: '\\25A1';
    width: 2px;
    height: 3px;
}
.sigplot-menu-checkbox.checkbox.checked:before {
    content: '\\25A3';
    width: 2px;
    height: 3px;
}
`,this._container.getElementsByTagName("style").length){var l=this._container.getElementsByTagName("style")[0];l.textContent=t}else{var l=document.createElement("style");l.textContent=t,this._container.appendChild(l)}}},Zr.exports=y})()});var mt=$e((Ss,Qr)=>{(function(){var p=Oi(),y=$r(),u=vt(),r=Jr(),l=pt();function t(){}t.DomMenu=jr(),t.XW_INIT=-3,t.XW_DRAW=1,t.XW_EVENT=2,t.XW_UPDATE=3,t.XW_COMMAND=5,t.SB_EXPAND=1,t.SB_SHRINK=2,t.SB_FULL=3,t.SB_STEPINC=4,t.SB_STEPDEC=5,t.SB_PAGEINC=6,t.SB_PAGEDEC=7,t.SB_DRAG=8,t.SB_WHEELUP=9,t.SB_WHEELDOWN=10,t.L_ArrowLeft=1001,t.L_ArrowRight=1002,t.L_ArrowUp=1003,t.L_ArrowDown=1004,t.L_dashed=801,t.GBorder=3,t.L_RModeOff=900,t.L_RModeOn=901,t.L_PixelSymbol=1,t.L_CircleSymbol=2,t.L_SquareSymbol=3,t.L_PlusSymbol=4,t.L_XSymbol=5,t.L_TriangleSymbol=6,t.L_ITriangleSymbol=7,t.L_HLineSymbol=8,t.L_VLineSymbol=9,t.LEGACY_RENDER=!1,t.LEGACY_BEHAVIOR=!1,t.STKSTRUCT=function(){this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.xscl=0,this.yscl=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0},t.SCROLLBAR=function(){this.flag=null,this.action=null,this.smin=null,this.srange=null,this.tmin=null,this.trange=null,this.step=null,this.page=null,this.scale=null,this.dragoutline=null,this.initial_pause=null,this.repeat_pause=null,this.x=null,this.y=null,this.w=null,this.h=null,this.s1=null,this.sw=null,this.swmin=null,this.soff=null,this.a1=null,this.a2=null,this.arrow=null,this.mxevent=null,this.origin=null,this.repeat_count=null};function a(){this.xo=0,this.yo=0,this.xl=0,this.yl=0,this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.func=void 0,this.mode=void 0}function h(n){this.root=n,this.parent=document.createElement("div"),this.parent.style.position="relative",this.parent.width=n.clientWidth,this.parent.height=n.clientHeight,n.appendChild(this.parent),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.width=n.clientWidth,this.canvas.height=n.clientHeight,this.parent.appendChild(this.canvas),this.active_canvas=this.canvas,this.wid_canvas=document.createElement("canvas"),this.wid_canvas.style.position="absolute",this.wid_canvas.style.top="0px",this.wid_canvas.style.left="0px",this.wid_canvas.style.zIndex=1,this.wid_canvas.width=n.clientWidth,this.wid_canvas.height=n.clientHeight,this.parent.appendChild(this.wid_canvas),this.font=void 0,this.font_family="Courier New, monospace",this.font_width=8,this.font_scaled=!1,this.text_w=0,this.text_h=0,this.level=0,this.width=this.parent.width,this.height=this.parent.height,this.xpos=0,this.ypos=0,this.xmrk=0,this.ymrk=0,this.origin=1,this.stk=[new t.STKSTRUCT],this.mouseOver=!1,t.setbgfg(this,"black","white"),this.event_cb=void 0,this.warpbox=void 0,this.rmode=!1,this.linewidth=1,this.style=void 0,this.xi=!1,this.button_release=0,this.button_press=0,this.state_mask=0,this.l=0,this.r=this.width,this.t=0,this.b=this.height,this.scrollbar_x=new t.SCROLLBAR,this.scrollbar_y=new t.SCROLLBAR,this.prompt=void 0,this.pixel=void 0,this._renderCanvas=document.createElement("canvas"),this._syncRender=!1}function s(n,o,m){var S=!1,C=!1;return n>=o&&(S=!0),n<=m&&(C=!0),S===!0&&C===!0}t.open=function(n){var o=new h(n);return o.wid_canvas.oncontextmenu=function(m){return m.preventDefault(),!1},this._ctx=o.active_canvas.getContext("2d"),o.onmousemove=function(m){return function(S){var C=S.target.getBoundingClientRect();m.x=S.x||S.clientX,m.y=S.y||S.clientY,m.xpos=S.offsetX===void 0?S.pageX-C.left-window.scrollX:S.offsetX,m.ypos=S.offsetY===void 0?S.pageY-C.top-window.scrollY:S.offsetY,m.warpbox&&((S.ctrlKey||S.metaKey)&&m.warpbox.alt_style!==void 0?m.warpbox.style=m.warpbox.alt_style:m.warpbox.style=m.warpbox.def_style,t.redraw_warpbox(m)),t.widget_callback(m,S)}}(o),o.onmouseup=function(m){return function(S){if(m.warpbox){t.onWidgetLayer(m,function(){t.erase_window(m)});var C=m.warpbox;if(m.warpbox=void 0,(S.which===1||S.which===3)&&C.func){var v=C.xo,k=C.yo,A=C.xl,z=C.yl;C.mode==="vertical"?(v=m.l,A=m.r):C.mode==="horizontal"&&(k=m.t,z=m.b),C.func(S,v,k,A,z,C.style.return_value,C.mode)}}t.widget_callback(m,S)}}(o),o.onmousedown=function(m){return function(S){return S.preventDefault(),t.widget_callback(m,S),!1}}(o),o.onmouseover=function(m){return function(S){return m.mouseOver=!0,!1}}(o),o.onmouseleave=function(m){return function(S){return m.mouseOver=!1,!1}}(o),o.onkeydown=function(m){return function(S){if(m.warpbox){var C=u.getKeyCode(S);(C===17||C===224||C===91||C===93)&&m.warpbox.style!==m.warpbox.alt_style&&(m.warpbox.style=m.warpbox.alt_style,t.redraw_warpbox(m))}t.widget_callback(m,S)}}(o),o.onkeyup=function(m){return function(S){if(m.warpbox){var C=u.getKeyCode(S);(C===17||C===224||C===91||C===93)&&m.warpbox.style!==m.warpbox.def_style&&(m.warpbox.style=m.warpbox.def_style,t.redraw_warpbox(m))}}}(o),o.ontouchend=function(m){return function(S){m.onmouseup({which:1})}}(o),o.ontouchmove=function(m){return function(S){var C=m.canvas,v=0,k=0;if(C.offsetParent!==void 0)do v+=C.offsetLeft,k+=C.offsetTop;while(C=C.offsetParent);m.xpos=S.targetTouches[0].pageX-v,m.ypos=S.targetTouches[0].pageY-k,t.redraw_warpbox(m)}}(o),t.enableListeners(o),o},t.enableListeners=function(n){t.addEventListener(n,"mousemove",n.onmousemove,!1),window.addEventListener("mouseup",n.onmouseup,!1),t.addEventListener(n,"mousedown",n.onmousedown,!1),t.addEventListener(n,"mouseover",n.onmouseover,!1),t.addEventListener(n,"mouseleave",n.onmouseleave,!1),window.addEventListener("keydown",n.onkeydown,!1),window.addEventListener("keyup",n.onkeyup,!1)},t.disableListeners=function(n){t.removeEventListener(n,"mousemove",n.onmousemove,!1),window.removeEventListener("mouseup",n.onmouseup,!1),t.removeEventListener(n,"mousedown",n.onmousedown,!1),t.removeEventListener(n,"mouseover",n.onmouseover,!1),t.removeEventListener(n,"mouseleave",n.onmouseleave,!1),window.removeEventListener("keydown",n.onkeydown,!1),window.removeEventListener("keyup",n.onkeyup,!1)},t.addEventListener=function(n,o,m,S){return n.wid_canvas.addEventListener(o,m,S)},t.removeEventListener=function(n,o,m,S){return n.wid_canvas.removeEventListener(o,m,S)},t.dispatchEvent=function(n,o){return n.wid_canvas.dispatchEvent(o)},t.onWidgetLayer=function(n,o){t.onCanvas(n,n.wid_canvas,o)},t.onCanvas=function(n,o,m){var S=n.active_canvas;n.active_canvas=o;try{if(m)return m()}finally{n.active_canvas=S}},t.withWidgetLayer=function(n,o){var m=function(){t.onWidgetLayer(n,o)};return m},t.render=function(n,o){if(!!o){var m=n.active_canvas;n._syncRender===!1?m._animationFrameHandle||(m._animationFrameHandle=requestAnimFrame(function(){m._animationFrameHandle=void 0,o()})):o()}},t.fullscreen=function(n,o){o===void 0&&(o=!n.fullscreen),o?(n.fullscreen={position:n.root.style.position,height:n.root.style.height,width:n.root.style.width,left:n.root.style.left,top:n.root.style.top,zIndex:n.root.style.zIndex},n.root.style.position="fixed",n.root.style.height="100%",n.root.style.width="100%",n.root.style.left="0px",n.root.style.top="0px",n.root.style.zIndex=16777271):(n.root.style.position=n.fullscreen.position,n.root.style.height=n.fullscreen.height,n.root.style.width=n.fullscreen.width,n.root.style.left=n.fullscreen.left,n.root.style.top=n.fullscreen.top,n.root.style.zIndex=n.fullscreen.zIndex,n.fullscreen=void 0),t.checkresize(n)},t.checkresize=function(n){var o=n.canvas;return o.height!==n.root.clientHeight||o.width!==n.root.clientWidth?(n.height=n.root.clientHeight,n.width=n.root.clientWidth,n.canvas.height=n.height,n.canvas.width=n.width,n.wid_canvas.height=n.height,n.wid_canvas.width=n.width,!0):!1},t.invertbgfg=function(n){t.setbgfg(n,n.fg,n.bg,!n.xi)},t.mixcolor=function(n,o,m){var S=p(n).toRgb(),C=p(o).toRgb(),v=1-m;return C.r=S.r*v+C.r*m,C.g=S.g*v+C.g*m,C.b=S.b*v+C.b*m,p(C).toHexString(!0)},t.linear_gradient=function(n,o,m,S,C,v){for(var k=n.active_canvas.getContext("2d"),A=1/v.length,z=k.createLinearGradient(o,m,S,C),T=0;T<v.length-1;T++)z.addColorStop(A*T,v[T]);return z.addColorStop(1,v[v.length-1]),z},t.setbgfg=function(n,o,m,S){if(n.bg=p(o).toHexString(),n.fg=p(m).toHexString(),n.xi=p(S).toHexString(),p.equals(n.bg,"black")&&p.equals(n.fg,"white"))n.xwfg=n.fg,n.xwbg="rgb(35%,35%,30%)",n.xwts="rgb(60%,60%,55%)",n.xwbs="rgb(25%,25%,20%)",n.xwms=t.mixcolor(n.xwts,n.xwbs,.5),n.xwlo="rgb(15%,15%,10%)",n.hi=n.xwts;else if(p.equals(n.bg,"white")&&p.equals(n.fg,"black"))n.xwfg=n.fg,n.xwbg="rgb(60%,60%,55%)",n.xwts="rgb(80%,80%,75%)",n.xwbs="rgb(40%,40%,35%)",n.xwms=t.mixcolor(n.xwts,n.xwbs,.5),n.xwlo="rgb(70%,70%,65%)",n.hi=n.xwbs;else{var C=p(n.bg).toRgb(),v=Math.sqrt(.299*(C.r*C.r)+.587*(C.g*C.g)+.114*(C.b*C.b));v>127.5?(n.xwfg="black",n.xwbg="rgb(60%,60%,55%)",n.xwts="rgb(80%,80%,75%)",n.xwbs="rgb(40%,40%,35%)",n.xwms=t.mixcolor(n.xwts,n.xwbs,.5),n.xwlo="rgb(70%,70%,65%)",n.hi=n.xwts):(n.xwfg="white",n.xwbg="rgb(35%,35%,30%)",n.xwts="rgb(60%,60%,55%)",n.xwbs="rgb(25%,25%,20%)",n.xwms=t.mixcolor(n.xwts,n.xwbs,.5),n.xwlo="rgb(15%,15%,10%)",n.hi=n.xwbs)}},t.settheme=function(n,o){n.bg=o.bg,n.fg=o.fg,n.xi=o.xi,n.xwfg=o.xwfg,n.xwbg=o.xwbg,n.xwts=o.xwts,n.xwbs=o.xwbs,n.xwlo=o.xwlo,n.hi=o.hi},t.close=function(n){var o=n.wid_canvas;o.removeEventListener("mousemove",n.onmousemove,!1),o.removeEventListener("mouseup",n.onmouseup,!1),n.parent&&n.parent.parentNode&&n.parent.parentNode.removeChild(n.parent)},t.scrollbar=function(n,o,m,S,C,v,k,A,z,T,I){var D,L,Y,ie=0,ne,E,N,R=new t.SCROLLBAR;switch(D=o.flag!==void 0?o.flag:o,L=Math.abs(D),v-C>S-m?n.origin<3?Y=2:Y=4:n.origin&2?Y=3:Y=1,L<10&&(o=R),(L<10||o.action===0)&&(t.scroll(n,o,t.XW_INIT,void 0,I),o.flag=D,o.initial_pause=-1,t.scroll_loc(o,m,C,S-m+1,v-C+1,Y,I)),o.srange=k.pe-k.ps,L){case 0:ne=E=N=1;break;case 1:case 11:ne=E=.9*o.srange,N=2;break;case 2:case 12:ne=.1*o.srange,E=9*ne,N=2;break;case 3:case 13:ne=1,E=o.srange-1,N=1;break;default:return 0}return t.scroll_vals(o,k.ps,o.srange,A,z-A,ne,E,N,I),D===0?t.scroll(n,o,t.XW_DRAW,void 0,void 0):t.scroll(n,o,t.XW_EVENT,T,I)&&(k.ps!==o.smin&&(k.ps=o.smin,ie+=1),k.pe!==o.smin+o.srange&&(k.pe=o.smin+o.srange,ie+=2)),ie},t.scroll=function(n,o,m,S,C){var v,k,A,z;if(o===void 0)return!1;switch(m){case t.XW_INIT:t.scroll_loc(o,0,0,n.width,20,1,C),t.scroll_vals(o,0,10,0,100,1,10,1,C),o.flag=0,o.action=0,o.initial_pause=.25,o.repeat_pause=.05,o.mxevent=!0,o.repeat_count=0;break;case t.XW_EVENT:if(v=0,o.mxevent)v=n.button_release?-n.button_release:n.button_press;else if(S.type==="mousedown"||S.type==="mouseup"){switch(S.which){case 1:v=1;break;case 2:v=2;break;case 3:v=3;break;case 4:v=4;break;case 5:v=5;break}S.type==="mouseup"&&(v=-v)}else(S.type==="mousewheel"||S.type==="DOM-MouseScroll")&&(S.wheelDelta&&S.wheelDelta>0?v=4:S.wheelDelta&&S.wheelDelta<0&&(v=5));if(o.action===0){if((v===4||v===5)&&(n.xpos=o.x),v!==1&&v!==2&&v!==4&&v!==5||n.xpos<o.x||n.ypos<o.y||n.xpos>o.x+o.w||n.ypos>o.y+o.h)return!1}else if(v<0)return o.action=o.repeat_count=0,!0;if(o.origin&1?(z=n.xpos-o.x,o.origin&2&&(z=o.w-z)):(z=n.ypos-o.y,o.origin<=2&&(z=o.h-z)),o.action===0){o.repeat_count=0;var T=t.scroll_real2pix(o);if(o.s1=C.s1=T.s1,o.sw=C.sw=T.sw,o.soff=C.soff=z-o.s1,o.trange===0)o.smin=C.smin=o.tmin,o.srange=C.srange=0;else switch(v){case 1:z>o.a1&&z<o.a2?o.action=o.soff>0?t.SB_PAGEINC:t.SB_PAGEDEC:o.action=o.soff>0?t.SB_STEPINC:t.SB_STEPDEC;break;case 4:o.action=t.SB_WHEELUP;break;case 5:o.action=t.SB_WHEELDOWN;break}}else switch(o.action){case t.SB_WHEELUP:case t.SB_WHEELDOWN:case t.SB_EXPAND:case t.SB_SHRINK:case t.SB_FULL:o.action=o.repeat_count=0}case t.XW_COMMAND:switch(k=o.smin,A=o.srange,o.action){case t.SB_STEPINC:k+=o.step;break;case t.SB_STEPDEC:k-=o.step;break;case t.SB_PAGEINC:k+=o.page;break;case t.SB_PAGEDEC:k-=o.page;break;case t.SB_FULL:k=o.tmin,A=o.trange;break;case t.SB_EXPAND:A=A*o.scale,k<=0&&k+o.srange>=0?k*=o.scale:k-=(A-o.srange)/2;break;case t.SB_SHRINK:A=A/o.scale,k<0&&k+o.srange>=0?k+=A/o.scale:k===0&&k+o.srange>=0?k=A/o.scale:k+=(o.srange-A)/2;break;case t.SB_WHEELUP:k-=o.page;break;case t.SB_WHEELDOWN:k+=o.page;break}o.trange>0?(k=Math.max(o.tmin,Math.min(k,o.tmin+o.trange-A)),A=Math.min(A,o.trange)):(k=Math.min(o.tmin,Math.max(k,o.tmin+o.trange-A)),A=Math.max(A,o.trange)),o.smin===k&&o.srange===A?o.action!==t.SB_DRAG&&(o.action=o.repeat_count=0):(o.smin=C.smin=k,o.srange=C.srange=A,o.repeat_count++),m===t.XW_COMMAND&&(t.scroll(n,o,t.XW_UPDATE,void 0),o.action=0);break;case t.XW_DRAW:case t.XW_UPDATE:t.redrawScrollbar(o,n,m)}return!0},t.scroll_loc=function(n,o,m,S,C,v,k){n!==void 0&&(n.x=k.x=o,n.y=k.y=m,n.w=k.w=S,n.h=k.h=C,n.origin=k.origin=Math.max(1,Math.min(4,v)),n.origin&1?(n.a2=k.a2=n.w,n.arrow=k.arrow=Math.min(l.trunc((n.w-l.trunc(2*t.GBorder))/3),n.h+t.GBorder)):(n.a2=k.a2=n.h,n.arrow=k.arrow=Math.min(l.trunc((n.h-l.trunc(2*t.GBorder))/3),n.w+t.GBorder)),n.a1=k.a1=n.arrow+t.GBorder,n.a2-=n.arrow+t.GBorder,k.a2-=n.arrow+t.GBorder,n.swmin=k.swmin=Math.min(10,n.a2-n.a1),n.s1=k.s1=0,n.sw=k.sw=0,n.action=k.action=0)},t.scroll_vals=function(n,o,m,S,C,v,k,A,z){n!==void 0&&(n.smin=z.smin=o,n.srange=z.srange=m,n.tmin=z.tmin=S,n.trange=z.trange=C,n.step=z.step=v,n.page=z.page=k,n.scale=z.scale=Math.max(A,1))},t.draw_symbol=function(n,o,m,S,C,v,k){for(var A=n.active_canvas.getContext("2d"),z=0,T=0,I=0,D=!1,L=!1,Y=[],ie=0;ie<4;ie++)Y[ie]={x:0,y:0};var ne="";if(L=v<0,z=Math.abs(v),T=z*2,A.fillStyle=o,A.strokeStyle=o,typeof C=="function")C(A,k,m,S);else switch(C){case t.L_CircleSymbol:A.beginPath(),L?(A.arc(m,S,z,0,360),A.fill()):(A.arc(m,S,z,0,360),A.stroke());break;case t.L_SquareSymbol:L?Me(A,m-z,S-z,T,T):Ee(A,m-z,S-z,T,T);break;case t.L_PixelSymbol:T=1,A.beginPath(),A.arc(m,S,1,0,2*Math.PI,!0),A.fill();break;case t.L_ITriangleSymbol:z=-z;case t.L_TriangleSymbol:T=l.trunc(z*1.5),I=l.trunc(z*.8),Y[1].x=-I,Y[1].y=T,Y[2].x=I*2,Y[2].y=0,Y[3].x=-I,Y[3].y=-T;for(var E=[],ie=0;ie<4;ie++)E[ie]={x:0,y:0};L?(E[0].x=m,E[0].y=S-z,E[1].x=E[0].x+Y[1].x,E[1].y=E[0].y+Y[1].y,E[2].x=E[1].x+Y[2].x,E[2].y=E[1].y+Y[2].y,E[3].x=E[2].x+Y[3].x,E[3].y=E[2].y+Y[3].y,ue(A,E)):(E[0].x=m,E[0].y=S-z,E[1].x=E[0].x+Y[1].x,E[1].y=E[0].y+Y[1].y,E[2].x=E[1].x+Y[2].x,E[2].y=E[1].y+Y[2].y,E[3].x=E[2].x+Y[3].x,E[3].y=E[2].y+Y[3].y,Ae(A,E));break;case t.L_PlusSymbol:ae(A,m,S+z,m,S-z),ae(A,m+z,S,m-z,S);break;case t.L_HLineSymbol:ae(A,m+z,S,m-z,S);break;case t.L_VLineSymbol:ae(A,m,S+z,m,S-z);break;case t.L_XSymbol:ae(A,m-z,S-z,m+z,S+z),ae(A,m+z,S-z,m-z,S+z);break;default:ne=C,z=l.trunc(n.text_w/2),L&&!D&&A.fillText(ne.substring(0,2),m-z,S+z);break}},t.draw_symbols=function(n,o,m,S,C,v,k,A){for(var z=0;z<C;z++)t.draw_symbol(n,o,m[z],S[z],v,k,z+A)};function c(n,o,m,S,C,v){return(m-n)*(v-o)-(C-n)*(S-o)}function _(n,o,m,S,C,v,k){return C<=m?k>m&&c(o,m,S,C,v,k)>0&&(n+=1):k<=m&&c(o,m,S,C,v,k)<0&&(n-=1),n}t.trace=function(n,o,m,S,C,v,k,A,z,T,I){if(m===void 0||S===void 0)throw"mx.trace requires xpoint and ypoint";if(k===void 0&&(k=1),A===void 0&&(A=1),z===void 0&&(z=0),T===void 0&&(T=0),I===void 0&&(I={}),C<=0){l.log.warn("No points to draw");return}if(A===0&&z===0){l.log.warn("No line or symbol to draw");return}var D;I.dashed&&(D={mode:"dashed",on:4,off:4});var L=t.origin(n.origin,4,n.stk[n.level]);if(!(L.xscl===0||L.yscl===0)){var Y=L.x1,ie=L.y1,ne=L.xmin,E=1/L.xscl,N=L.ymin,R=1/L.yscl;I.noclip||t.clip(n,Y,ie,L.x2-Y+1,L.y2-ie+1);var V=Math.abs(L.xmax-L.xmin),te=Math.abs(L.ymax-L.ymin),Q=Math.min(L.xmin,L.xmax),fe=Math.min(L.ymin,L.ymax),me=Q+V,we=fe+te;I.pixels&&(E=1,ne=0,R=1,N=0,Q=0,fe=0,me=Math.round(n.r-n.l),we=Math.round(n.b-n.t));var Se=4*Math.ceil(2*m.length),pe=new Int32Array(new ArrayBuffer(Se)),ke=new Int32Array(new ArrayBuffer(Se)),_e=0;if(A===0&&z!==0)for(var Ce=k-1;Ce<C;Ce+=k){var Le=m[Ce],ge=S[Ce],He=Le>=Q&&Le<=me&&ge>=fe&&ge<=we;He&&(pe[0]=Math.round((Le-ne)*E)+Y,ke[0]=Math.round((ge-N)*R)+ie,t.draw_symbol(n,o,pe[0],ke[0],z,T,v+Ce))}if(I.vertsym===!0)for(var Ce=k-1;Ce<C;Ce+=k){var Le=m[Ce],ge=S[Ce];if(Le>=Q&&Le<=me){var Ue=Math.round((Le-ne)*E)+Y;t.draw_line(n,o,Ue,0,Ue,n.height),ge>=fe&&ge<=we&&(pe[0]=Ue,ke[0]=Math.round((ge-N)*R)+ie,t.draw_symbol(n,o,pe[0],ke[0],z,T,v+Ce))}}if(I.horzsym===!0)for(var Ce=k-1;Ce<C;Ce+=k){var Le=m[Ce],ge=S[Ce];if(ge>=fe&&ge<=we){var Ue=Math.round((ge-N)*R)+ie;t.draw_line(n,o,0,Ue,n.width,Ue),Le>=Q&&Le<=me&&(pe[0]=Math.round((Le-ne)*E)+Y,ke[0]=Ue,t.draw_symbol(n,o,pe[0],ke[0],z,T,v+Ce))}}else if(A!==0){var We;if(I&&I.highlight){We=[];for(var ze=0;ze<I.highlight.length;ze++)if(!(I.highlight[ze].xstart>=me)&&!(I.highlight[ze].xend<=Q)){var ft=Math.max(I.highlight[ze].xstart,Q),rt=Math.min(I.highlight[ze].xend,me);if(ft<rt){for(var je=Math.round((ft-ne)*E)+Y,Xe=Math.round((rt-ne)*E)+Y,i=We.length-1;i>=0;i--){if(je<=We[i].start&&Xe>=We[i].end){We.splice(i,1);continue}else je>=We[i].start&&Xe<=We[i].end?(We.push({start:Xe,end:We[i].end,color:We[i].color}),We[i].end=je):je<=We[i].start&&Xe>=We[i].start?We[i].start=Xe:je<=We[i].end&&Xe>=We[i].end&&(We[i].end=je);We[i].end<=We[i].start&&We.splice(i,1)}We.push({start:je,end:Xe,color:I.highlight[ze].color})}}We.push({start:Y,color:o}),We.sort(function(de,Ge){return de.start-Ge.start})}else We=o;var e=0,d=(n.stk[n.level].xmax+n.stk[n.level].xmin)/2,f=(n.stk[n.level].ymax+n.stk[n.level].ymin)/2,Le=m[0],ge=S[0];e=_(e,d,f,n.stk[n.level].xmin,n.stk[n.level].ymin,Le,ge);var He=Le>=Q&&Le<=me&&ge>=fe&&ge<=we;He?(pe[_e]=Math.round((Le-ne)*E)+Y,ke[_e]=Math.round((ge-N)*R)+ie,_e+=1,z!==0&&t.draw_symbols(n,o,pe,ke,1,z,T,v)):_e=0;for(var w=0,b=!1,Ce=k;Ce<=k*(C-1);Ce+=k){var M=Le,O=ge;if(Le=m[Ce],ge=S[Ce],e=_(e,d,f,M,O,Le,ge),b=Le>=Q&&Le<=me&&ge>=fe&&ge<=we,He&&b)pe[_e]=Math.round((Le-ne)*E)+Y,ke[_e]=Math.round((ge-N)*R)+ie,_e+=1;else if(He=b,V=M-Le,te=O-ge,V!==0||te!==0){var q={tL:1,tE:0};oe(V,Q-Le,q)&&oe(-V,Le-me,q)&&oe(te,fe-ge,q)&&oe(-te,ge-we,q)&&(q.tL<1&&(pe[_e]=Math.round((Le-ne+q.tL*V)*E)+Y,ke[_e]=Math.round((ge-N+q.tL*te)*R)+ie,_e+=1),q.tE>0?(pe[_e]=Math.round((Le-ne+q.tE*V)*E)+Y,ke[_e]=Math.round((ge-N+q.tE*te)*R)+ie,_e+=1,t.draw_lines(n,We,pe.subarray(w,_e),ke.subarray(w,_e),_e-w,A,D),z!==0&&_e-w>2&&t.draw_symbols(n,o,pe.subarray(w+1,_e-1),ke.subarray(w+1,_e-1),_e-w-2,z,T,v+Ce-(_e-w-2)),w=_e):(pe[_e]=Math.round((Le-ne)*E)+Y,ke[_e]=Math.round((ge-N)*R)+ie,_e+=1))}}if(e=_(e,d,f,Le,ge,n.stk[n.level].xmax,n.stk[n.level].ymin),e=_(e,d,f,n.stk[n.level].xmax,n.stk[n.level].ymin,n.stk[n.level].xmin,n.stk[n.level].ymin),_e-w>0&&(t.draw_lines(n,We,pe.subarray(w,_e),ke.subarray(w,_e),_e-w,A,D),b&&(w=w+1),z!==0&&_e-w>1&&t.draw_symbols(n,o,pe.subarray(w,_e),ke.subarray(w,_e),_e-w,z,T,Ce-_e+v)),I.fillStyle&&!n.fillMin&&!n.fillMax&&(_e>1||e!==0)&&t.fill_trace(n,I.fillStyle,pe,ke,_e),I.highlight)for(var Ue=0;Ue<I.highlight.length;Ue++){var ee=I.highlight[Ue];if(!!ee.fill){var re=ee.xstart,he=ee.xend;if(console.log("x start ",re),console.log("x end ",he),!(re>=n.stk[n.level].xmax)&&!(he<=n.stk[n.level].xmin)&&(_e>1||e!==0)){for(var le=t.real_to_pixel(n,re,0),K=t.real_to_pixel(n,he,0),j=le.x,xe=K.x,ce=[],Ne=[],Oe=0;Oe<_e;Oe++){var Te=pe[Oe],qe=ke[Oe];s(Te,j,xe)===!0&&(ce.push(Te),Ne.push(qe))}(ce.length>0||e!==0)&&(j=Math.max(j,ce[0]),xe=Math.min(xe,ce[ce.length-1]),t.fill_trace(n,ee.fill,ce,Ne,ce.length,j,xe))}}}}I.noclip||t.clip(n,0,0,0,0)}},t.draw_mode=function(n,o,m){n.linewidth=o===void 0?1:o,n.style=m},t.draw_line=function(n,o,m,S,C,v,k,A){var z=n.active_canvas.getContext("2d");if(k===void 0&&(k=n.linewidth),A===void 0&&(A=n.style),typeof o=="number")if(!n.pixel)l.log.warn("COLORMAP not initialized, defaulting to foreground"),o=n.fg;else{isNaN(o)&&(o=0);var T=Math.max(0,Math.min(n.pixel.map.length,o));o=n.pixel.getColor(o),o=ve(o.red,o.green,o.blue)}ae(z,m,S,C,v,A,o,k)},t.rubberline=function(n,o,m,S,C){var v=n.active_canvas.getContext("2d");ae(v,o,m,S,C,{mode:"xor"},"white",1)},t.fill_trace=function(n,o,m,S,C,v,k){var A=n.active_canvas.getContext("2d");if(Array.isArray(o)?A.fillStyle=t.linear_gradient(n,0,0,0,n.b-n.t,o):A.fillStyle=o,C<1){A.fillRect(n.l,n.t,n.r-n.l,n.b-n.t);return}if(v===void 0&&(v=n.l),k===void 0&&(k=n.r),o){var z=m[0],T=S[0];A.beginPath(),T===n.t?A.lineTo(v,n.t):A.lineTo(v,n.b),A.lineTo(z,T);for(var I=1;I<C;I++)z=m[I],T=S[I],A.lineTo(z,T);T===n.t&&A.lineTo(k,n.t),A.lineTo(k,n.b),S[0]===n.t&&A.lineTo(v,n.b),A.closePath(),A.fill("evenodd")}},t.draw_lines=function(n,o,m,S,C,v,k){var A=n.active_canvas.getContext("2d");if(!(C<1)){var z=m[0],T=S[0];if(v===void 0&&(v=n.linewidth),k===void 0&&(k=n.style),k&&k.mode==="dashed"){var I=u.dashOn(A,k.on,k.off);I||l.log.warn("WARNING: Dashed lines aren't supported on your browser")}A.lineWidth=v;var D=0;typeof o=="string"?o=[{start:0,color:o}]:o instanceof Array||(o.start===void 0&&(o.start=0),o=[o]);var L;for(L=o.length-1;L>=0;L--)o[L].end!=null&&o[L].end<z&&o.splice(L,1);for(L=0;L<o.length;L++)o[L].start<z&&(D=L);A.strokeStyle=o[D].color,A.beginPath(),A.moveTo(z,T);for(var Y=0;Y<C;Y++)if(!(z===m[Y]&&T===S[Y])){z=m[Y],T=S[Y];var ie=!1;if(D>0&&o[D].end!=null&&o[D].end<z)for(ie=!0;o[D].end!=null&&o[D].end<z&&(o.splice(D,1),D-=1,D!==0););if(D+1<o.length&&o[D+1].start<=z)for(ie=!0;D+1<o.length&&o[D+1].start<=z;)D++;A.lineTo(z,T),ie&&(A.stroke(),A.strokeStyle=o[D].color,A.beginPath(),A.lineTo(z,T))}A.stroke(),u.dashOff(A),A.beginPath()}},t.clip=function(n,o,m,S,C){var v=n.active_canvas.getContext("2d");if(o===0&&m===0&&S===0&&C===0){v.restore();return}v.save(),v.beginPath(),v.rect(o,m,S,C),v.clip()},t.clear_window=function(n){var o=n.active_canvas.getContext("2d");o.fillStyle=n.bg,o.fillRect(0,0,n.width,n.height)},t.erase_window=function(n){var o=n.active_canvas.getContext("2d");o.clearRect(0,0,n.width,n.height)},t.rubberbox=function(n,o,m,S,C){t.warpbox(n,n.xpos,n.ypos,n.xpos,n.ypos,0,n.width,0,n.height,o,m,S,C)},t.warpbox=function(n,o,m,S,C,v,k,A,z,T,I,D,L){D||(D={}),n.warpbox=new a,n.warpbox.xo=o,n.warpbox.yo=m,n.warpbox.xl=S,n.warpbox.yl=C,n.warpbox.xmin=v,n.warpbox.xmax=k,n.warpbox.ymin=A,n.warpbox.ymax=z,n.warpbox.func=T,n.warpbox.mode=I,n.warpbox.style=D,n.warpbox.def_style=D,n.warpbox.alt_style=L},t.origin=function(n,o,m){n=Math.max(1,n),o=Math.max(1,o);var S=new t.STKSTRUCT;if(S.xmin=m.xmin,S.xmax=m.xmax,S.ymin=m.ymin,S.ymax=m.ymax,S.xscl=m.xscl,S.yscl=m.yscl,S.x1=m.x1,S.y1=m.y1,S.x2=m.x2,S.y2=m.y2,n!==o){var C=Math.abs(o-n),v=o+n;(C===2||v!==5)&&(S.xmin=m.xmax,S.xmax=m.xmin,S.xscl=-m.xscl),(C===2||v===5)&&(S.ymin=m.ymax,S.ymax=m.ymin,S.yscl=-m.yscl)}return S},t.mult=function(n,o){var m=Math.max(Math.abs(n),Math.abs(o));if(m===0)return 1;var S=.1447648*Math.log(m);return S=S|S,m<1&&(S=S-1),S<0?1/Math.pow(10,-3*S):Math.pow(10,3*S)},t.widget_callback=function(n,o){n.prompt&&o.which===3&&n.prompt.input.onsubmit(),n.widget&&(o.type==="mouseup"&&n.mouseUpLatch?n.mouseUpLatch=void 0:n.widget.callback(o))},t.prompt=function(n,o,m,S,C,v,k,A,z){if(v!==void 0){var T=m(v);if(!T.valid)throw"Prompt default input value not valid due to '"+T.reason+"'"}t.onWidgetLayer(n,function(){var I=n.active_canvas.getContext("2d"),D=30,L=I.font.indexOf("px"),Y=L+3,ie=I.font.substr(0,L),ne=I.font.substr(Y,I.font.length).toString(),E=new r({height:n.text_h,fontFamily:ne,fontSize:new Number(ie),backgroundColor:n.bg,fontColor:n.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:n.text_w*D,value:v!==void 0?v.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),N=function(te,Q){return function(){var fe=this.value(),me=m(fe);me.valid?(n.prompt=void 0,this.cleanup(),t.onWidgetLayer(n,function(){t.erase_window(n)}),S(fe)):(t.message(n,"Value: '"+fe+"' isn't valid due to '"+me.reason+"' - RETRY",void 0,te,Q),setTimeout(function(){t.onWidgetLayer(n,function(){t.erase_window(n)}),n.widget=null},z??4e3))}},R=function(te,Q,fe){return function(me,we){t.onWidgetLayer(te,function(){var Se=3,pe=(fe.length+2)*te.text_w,ke=pe+(D+1)*te.text_w,_e=2*te.text_h,Ce=ke+2*Se,Le=_e+2*Se;me||(me=te.xpos),we||(we=te.ypos);var ge=Math.max(0,Math.min(me,te.width-Ce)),He=Math.max(0,Math.min(we,te.height-Le)),Ue=ge+Se,We=He+Se,ze=We+te.text_h*1.5,ft=Ue+te.text_w;t.widgetbox(te,ge,He,Ce,Le,Ue,We,0,""),t.text(te,ft,ze,fe);var rt=ze-te.text_h*1.15;Q.x(Ue+te.text_w+pe-te.text_w),Q.y(rt),Q.onsubmit(N(ge,rt-75)),Q.canvas()?Q.render():Q.canvas(te.active_canvas)})}},V=R(n,E,o);V(k,A),E.focus(),n.prompt={redraw:V,input:E}})},t.floatValidator=function(n,o){return!((o===void 0||o===!1)&&n==="")&&isNaN(parseFloat(n))||!isFinite(n)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}},t.intValidator=function(n,o){return(o===void 0||o===!1)&&n===""||parseFloat(n)===parseInt(n,10)&&!isNaN(n)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}},t.hexValidator=function(n,o){var m=/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/;return(o===void 0||o===!1)&&n===""||m.test(n)!==!1?{valid:!0,reason:""}:{valid:!1,reason:"Failed hexcode validation: not a valid hexcode"}},t.message=function(n,o,m,S,C,v){t.onWidgetLayer(n,function(){t.render_message_box(n,o,S,C),n.widget={type:v||"ONESHOT",callback:function(k){(k.type==="mousedown"||k.type==="keydown")&&(n.widget=null,t.onWidgetLayer(n,function(){t.erase_window(n)}))}}})},t.render_message_box=function(n,o,m,S,C){var v=3,k=o.split(/\r\n|\r|\n/g),A=0,z;if(k.length===1){k=[];var T=40;if(A=Math.min((n.width-2*v)/n.text_w-2,o.length),A<=0)return;for(;A>T&&2.5*n.text_h*o.length<n.height*A;)A-=5;var E=0,I=0,_e=0,ke=0,D=0,L=0,k=[];for(z=!0;I<o.length;){D=I+A-1,L=D=Math.min(D,o.length-1);var Y=!1;for(E=I;E<=D&&!Y;E++)switch(o[E]){case",":case";":case" ":case":":L=E;break;case"-":case"/":L!==E-1&&(L=E);break;case"@":case`
`:case"\r":z=!1,Y=!0,L=E;break}if(E===o.length&&(L=D),Y)k.push(o.substring(I,L));else{var ie=o.substring(I,L+1).replace(/^\s+/,"");k.push(ie)}I=L+1,ke=Math.max(ke,k[_e].length)}}else for(var _e=0;_e<k.length;_e++)A=Math.min((n.width-2*v)/n.text_w-2,Math.max(A,k[_e].length));var ne=k.length;ne>6&&(z=!1);var E=0,N=Math.max(1,n.height/n.text_h),R=Math.min(ne,E+N-1),V=(A+2)*n.text_w,te=(R-E+1)*n.text_h,Q=V+2*v,fe=te+2*v;m||(m=n.xpos),S||(S=n.ypos);var me=Math.max(n.l,Math.min(m,n.r-Q)),we=Math.max(n.t,Math.min(S,n.b-fe)),Se=me+v,pe=we+v;t.widgetbox(n,me,we,Q,fe,Se,pe,0,"");for(var ke=pe+n.text_h/3,_e=Se+n.text_w;E<R;)ke+=n.text_h,z&&(_e=me+Q/2-k[E].length*n.text_w/2),t.text(n,_e,ke,k[E],C),E++},t.draw_round_box=function(n,o,m,S,C,v,k,A,z){var T=n.active_canvas.getContext("2d");if(z||(z=5),T.beginPath(),T.moveTo(m+z,S),T.lineTo(m+C-z,S),T.quadraticCurveTo(m+C,S,m+C,S+z),T.lineTo(m+C,S+v-z),T.quadraticCurveTo(m+C,S+v,m+C-z,S+v),T.lineTo(m+z,S+v),T.quadraticCurveTo(m,S+v,m,S+v-z),T.lineTo(m,S+z),T.quadraticCurveTo(m,S,m+z,S),T.closePath(),T.lineWidth=1,T.strokeStyle=o,T.stroke(),k!==void 0&&k>0){var I=T.globalAlpha;T.globalAlpha=k,A?T.fillStyle=A:T.fillStyle=o,T.fill(),T.globalAlpha=I}},t.draw_box=function(n,o,m,S,C,v,k,A){var z=n.active_canvas.getContext("2d");if(o!=="xor")z.lineWidth=1,z.strokeStyle=o,z.strokeRect(m,S,C,v);else if(typeof Uint8ClampedArray>"u")z.lineWidth=1,z.strokeStyle=n.fg,z.strokeRect(m,S,C,v);else{m=Math.floor(m),S=Math.floor(S),C=Math.floor(C),v=Math.floor(v);for(var T=n.canvas.getContext("2d"),D=T.getImageData(m,S,C,1),L=D.data,I=0;I<D.data.length;I++)L[I*4]=255-L[I*4],L[I*4+1]=255-L[I*4+1],L[I*4+2]=255-L[I*4+2],L[I*4+3]=255;z.putImageData(D,m,S),D=T.getImageData(m,S+v,C,1),L=D.data;for(var I=0;I<D.data.length;I++)L[I*4]=255-L[I*4],L[I*4+1]=255-L[I*4+1],L[I*4+2]=255-L[I*4+2],L[I*4+3]=255;z.putImageData(D,m,S+v);for(var D=T.getImageData(m,S,1,v),L=D.data,I=0;I<v;I++)L[I*4]=255-L[I*4],L[I*4+1]=255-L[I*4+1],L[I*4+2]=255-L[I*4+2],L[I*4+3]=255;z.putImageData(D,m,S),D=T.getImageData(m+C,S,1,v),L=D.data;for(var I=0;I<v;I++)L[I*4]=255-L[I*4],L[I*4+1]=255-L[I*4+1],L[I*4+2]=255-L[I*4+2],L[I*4+3]=255;z.putImageData(D,m+C,S)}if(k!==void 0&&k>0){var Y=z.globalAlpha;z.globalAlpha=k,A?z.fillStyle=A:z.fillStyle=o,z.fillRect(m+1,S+1,C-1,v-1),z.globalAlpha=Y}},t.set_font=function(n,o){var m=n.canvas.getContext("2d"),S=n.wid_canvas.getContext("2d");if(n.font&&n.font.width===o)m.font=n.font.font,S.font=n.font.font;else{var C=1;do{C=C+1,m.font=C+"px "+n.font_family,S.font=C+"px "+n.font_family;var v=m.measureText("M");n.text_w=v.width,n.text_h=C}while(n.text_w<o);n.font={font:C+"px "+n.font_family,width:o}}},t.textline=function(n,o,m,S,C,v){var k=n.active_canvas.getContext("2d");v||(v={}),v.color||(v.color=n.fg),v.width||(v.width=1),ae(k,o,m,S,C,v,v.color,v.width)},t.tics=function(n,o,m,S){var C=1,v=n;if(o===n)return{dtic:1,dtic1:n};var k=Math.abs(o-n),A=k/m,z=Je(Math.max(A,1e-36)),T;z<0?(T=Math.ceil(z),T=T-1):T=Math.floor(z);var I=A*Math.pow(10,-T);z=Math.pow(10,T);var D=I*z;if(S&&D>=5&&D<=59.5*3600*24){var L;D<17.5?L=5:D<37.5?L=15:D<4.5*60?L=60:D<17.5*60?L=5*60:D<37.5*60?L=15*60:D<2*3600?L=1*3600:D<4.5*3600?L=3*3600:D<9*3600?L=6*3600:D<1.5*3600*24?L=12*3600:D<6*3600*24?L=1*3600*24:L=1*3600*24*7,C=Math.round(D/L)*L}else I<1.75?C=z:I<2.25?C=2*z:I<3.5?C=2.5*z:I<7?C=5*z:C=10*z;C===0&&(C=1);var Y;return o>=n?(n>=0?Y=n/C+.995:Y=n/C-.005,Y=Math.floor(Y),v=Y*C):(n>=0?Y=n/C+.005:Y=n/C-.995,Y=Math.floor(Y),v=Y*C,C=-1*C),v+C===v&&(C=o-n),{dtic:C,dtic1:v}},t.drawaxis=function(n,o,m,S,C,v,k){var A=t.origin(o.origin,1,o.stk[o.level]),z=0,T=0,I=0,D=0,L=0,Y=0;C=C===void 0?30:C,v=v===void 0?30:v,k.exactbox?(z=Math.floor(A.x1),T=Math.floor(A.y1),I=Math.floor(A.x2),D=Math.floor(A.y2),L=I-z,Y=D-T):(z=Math.max(Math.floor(A.x1)-2,0),T=Math.max(Math.floor(A.y1)-2,0),I=Math.min(Math.floor(A.x2)+2,o.width),D=Math.min(Math.floor(A.y2)+2,o.height),L=I-z-4,Y=D-T-4);var ie=o.active_canvas.getContext("2d");k.fillStyle?Array.isArray(k.fillStyle)?ie.fillStyle=t.linear_gradient(o,0,0,0,D-T,k.fillStyle):ie.fillStyle=k.fillStyle:ie.fillStyle=o.bg,ie.fillRect(z,T,I-z,D-T),k.noaxisbox||(t.textline(o,z,T,I,T),t.textline(o,I,T,I,D),t.textline(o,I,D,z,D),t.textline(o,z,D,z,T));var ne={dtic:0,dtic1:0},E={dtic:0,dtic1:0};m<0?(ne.dtic1=A.xmin,ne.dtic=(A.xmin-A.xmax)/m):ne=t.tics(A.xmin,A.xmax,m,k.xtimecode);var N=1;k.xmult?N=k.xmult:k.xtimecode||(N=t.mult(A.xmin,A.xmax)),S<0?(E.dtic1=A.ymin,E.dtic=(A.ymin-A.ymax)/S):E=t.tics(A.ymin,A.ymax,S,k.ytimecode);var R=1;k.ymult?R=k.ymult:k.ytimecode||(R=t.mult(A.ymin,A.ymax));var V=!k.noxtlab,te=!k.noytlab,Q=Math.max(0,z-4*o.text_w),fe=0;k.ontop?fe=Math.min(o.height,Math.floor(D+1.5*o.text_h)):fe=Math.max(o.text_h,Math.floor(T-.5*o.text_h));var me,we;if(fe>0){var Se=0;k.noyplab||(k.ylabel instanceof Function?we=k.ylabel(v,R):k.ylabel!==void 0?we=k.ylabel:we=l.label(v,R)),k.noxplab||(k.xlabel instanceof Function?me=k.xlabel(C,N):k.xlabel!==void 0?me=k.xlabel:me=l.label(C,N))}me&&we?t.text(o,Q,fe,we+" vs "+me):me?t.text(o,Q,fe,me):we&&t.text(o,Q,fe,we);var pe=5.5*o.text_w,ke=0;k.ontop?k.inside?ke=T+1*o.text_h:ke=T-.2*o.text_h:k.inside?ke=D-.5*o.text_h:ke=D+1*o.text_h+2;var _e;A.xmin!==A.xmax?_e=L/(A.xmax-A.xmin):_e=L/1;var Ce;N!==0?Ce=1/N:Ce=1;var Le=Math.min(12,Math.round(_e*ne.dtic)/o.text_w),ge=1,He,Ue="";if(V)if(k.xtimecode)Ue=l.sec2tod(ne.dtic1),ge=Ue.length*o.text_w<(I-z)/2;else{var We;for(He=ne.dtic1;He<=A.xmax;He=He+ne.dtic){if(Ue=t.format_f(He*Ce,Le,Le/2),Ue===We){ge=0;break}We=Ue}}ne.dtic===0&&(ne.dtic=A.xmax-ne.dtic1+1);var ze;for(Q=0,Ue="",He=ne.dtic1;He<=A.xmax;He=He+ne.dtic)if(ze=z+Math.round(_e*(He-A.xmin))+2,!(ze<z)&&(k.grid&&k.grid!=="y"?(k.gridStyle||(t.LEGACY_RENDER?k.gridStyle={mode:"dashed",on:1,off:3}:k.gridStyle={color:o.xwms,mode:"dashed",on:1,off:3}),t.textline(o,ze,D,ze,T,k.gridStyle)):(t.textline(o,ze,D-2,ze,D+2),t.textline(o,ze,T-2,ze,T+2)),V))if(ge){if(Ue=null,k.xtimecode?ze>Q&&(Ue=l.sec2tod(He,!0),Q=ze+o.text_w*(Ue.length+1)):(Ue=t.format_f(He*Ce,Le,Le/2),Ue=Ke(Ue,!0)),Ue){var ft=Math.round(Ue.length/2)*o.text_w;k.inside&&(ze=Math.max(z+ft,ze),ze=Math.min(I-ft,ze)),ze-ft>=0&&t.text(o,ze-ft,ke,Ue)}}else He===ne.dtic1&&(k.xtimecode?(Ue=l.sec2tod(He,!0),k.inside&&(ze=Math.floor(Math.max(z+pe,ze))),t.text(o,ze-pe,ke,Ue+" +\u0394 "+l.sec2tod(ne.dtic))):(Ue=(ne.dtic1*Ce).toString(),k.inside&&(ze=Math.floor(Math.max(z+pe,ze))),t.text(o,ze-pe,ke,Ue+" +\u0394 "+ne.dtic*Ce)));k.yonright?k.inside?pe=Math.min(I-6*o.text_w,o.width-5*o.text_w):pe=Math.min(I+o.text_w,o.width-5*o.text_w):k.inside?pe=Math.max(0,z+o.text_w):pe=Math.max(0,Math.floor(z-(o.l-.5)*o.text_w)),ke=.4*o.text_h,A.ymin!==A.ymax?_e=-Y/(A.ymax-A.ymin):_e=-Y/1,R!==0?Ce=1/R:Ce=1;var rt,je,Xe;E.dtic===0&&(rt=A.ymax-je+1),A.ymax>=A.ymin?Xe=function(w){return w<=A.ymax}:Xe=function(w){return w>=A.ymax};for(var i,e=E.dtic1;Xe(e);e=e+E.dtic)if(ze=D+Math.round(_e*(e-A.ymin))-2,!(ze>D)&&(k.grid&&k.grid!=="x"?(k.gridStyle||(k.gridStyle={mode:"dashed",on:1,off:3}),t.textline(o,z,ze,I,ze,k.gridStyle)):(t.textline(o,z-2,ze,z+2,ze),t.textline(o,I-2,ze,I+2,ze)),te&&!(k.inside&&(ze<T+o.text_h||ze>D-o.text_h*2))))if(k.ytimecode){i=l.sec2tod(e);var d=ze+ke-o.text_h,f=i.indexOf("::");f!==-1&&(d>T&&d<D&&t.text(o,pe,d,i.substring(0,f)),f+=1),t.text(o,pe,Math.min(D,ze+ke),i.substring(f+1,f+6)),d=ze+ke+o.text_h,d>T&&d<D&&i.substring(f+7,f+9)!=="00"&&(i=i+".00",t.text(o,pe,d,i.substring(f+7,f+12)))}else i=t.format_f(e*Ce,12,6),i=Ke(i,k.inside),t.text(o,pe,Math.min(D,ze+ke),i)},t.inrect=function(n,o,m,S,C,v){return n>=m&&n<=m+C&&o>=S&&o<=S+v};var g={GBorder:3,sidelab:0,toplab:1,n_show:0};function P(n,o){if(!o.animationFrameHandle){var m=n.canvas.height,S=35,C=m-2*S,v=n.text_h*1.5,k=Math.floor(C/v);k>=o.items.length?g.n_show=o.items.length:g.n_show=k,o.animationFrameHandle=requestAnimFrame(t.withWidgetLayer(n,function(){t.erase_window(n),o.animationFrameHandle=void 0;var A=n.text_h*1.5;o.x=Math.max(o.x,0),o.y=Math.max(o.y,0),o.x=Math.min(o.x,n.width-o.w),o.y=Math.min(o.y,n.height-o.h);var z=o.x+g.GBorder+Math.max(0,g.sidelab),T=o.y+g.GBorder+g.toplab*(A+g.GBorder),I=o.w-2*g.GBorder-Math.abs(g.sidelab),D=o.h-2*g.GBorder-g.toplab*(A+g.GBorder);t.widgetbox(n,o.x,o.y,o.w,o.h,z,T,I,D,o.title);var L=n.wid_canvas.getContext("2d");L.lineWidth=1,L.strokeStyle=n.xwbs,L.beginPath(),L.moveTo(z,T-4+.5),L.lineTo(z+I-1,T-4+.5),L.stroke(),L.strokeStyle=n.xwts,L.beginPath(),L.moveTo(z,T-3+.5),L.lineTo(z+I-1,T-3+.5),L.stroke();var Y=o.queue[0],ie=o.queue[g.n_show-1];if(ie===0){for(var ne=0;ne<g.n_show;ne++)o.queue[ne]=ne;Y=o.queue[0],ie=o.queue[g.n_show-1]}for(var E=0,N=Y;N<=ie;N++){var R=o.items[N],V=T+A*E;E=E+1,R.style==="separator"?(L.fillStyle=n.xwbs,L.fillRect(z,V,I,A),L.beginPath(),L.moveTo(z,V+.5),L.lineTo(z+I,V+.5),L.stroke(),L.textBaseline="middle",L.textAlign="left",L.fillStyle=n.xwfg,L.fillText(" "+R.text+" ",z+n.text_w*2,V+A/2)):(t.LEGACY_RENDER?(L.fillStyle=n.xwlo,L.fillRect(z,V,I,A),L.beginPath(),L.moveTo(z,V+.5),L.lineTo(z+I,V+.5),L.stroke(),R.selected&&t.shadowbox(n,z-1,V,I+2,A,1,2,"",.75)):(L.save(),L.globalAlpha=.75,R.selected?L.fillStyle=n.xwts:L.fillStyle=n.xwlo,L.fillRect(z,V,I,A),L.restore(),L.strokeStyle=n.bg,L.beginPath(),L.moveTo(z,V+.5),L.lineTo(z+I,V+.5),L.stroke()),L.textBaseline="middle",L.textAlign="left",L.fillStyle=n.xwfg,R.style==="checkbox"?(L.fillText(" "+R.text+" ",z+n.text_w*2,V+A/2),L.strokeStyle=n.xwfg,L.strokeRect(z+1+n.text_w,V+(A-n.text_w)/2,n.text_w,n.text_w),R.checked&&(L.beginPath(),L.moveTo(z+1+n.text_w,V+(A-n.text_w)/2),L.lineTo(z+1+n.text_w+n.text_w,V+(A-n.text_w)/2+n.text_w),L.stroke(),L.beginPath(),L.moveTo(z+1+n.text_w+n.text_w,V+(A-n.text_w)/2),L.lineTo(z+1+n.text_w,V+(A-n.text_w)/2+n.text_w),L.stroke())):(L.fillText(" "+R.text+" ",z,V+A/2),R.checked&&(L.beginPath(),L.moveTo(z+1,V+n.text_h/4),L.lineTo(z+1+n.text_w-2,V+n.text_h/4+n.text_h/2),L.lineTo(z+1,V+n.text_h/4+n.text_h),L.lineTo(z+1,V+n.text_h/4),L.fill())))}}))}}function U(n,o){t.onWidgetLayer(n,function(){t.erase_window(n)}),n.menu=void 0,n.widget=null;for(var m=0;m<o.items.length;m++){var S=o.items[m];if(S.selected){if(S.handler)S.handler();else if(S.menu){var C=S.menu;typeof S.menu=="function"&&(C=S.menu()),C.finalize=o.finalize,t.menu(n,C)}break}}!n.menu&&o.finalize&&o.finalize()}function B(n,o){t.onWidgetLayer(n,function(){t.erase_window(n)}),n.useDomMenu&&n.menu.remove(),n.menu=void 0,n.widget=null,!n.menu&&o.finalize&&o.finalize()}function Z(n,o,m){var S=o.queue[0],C=o.queue[g.n_show-1];if(m===void 0)P(n,o);else if(m.type==="mousemove"){o.drag_x!==void 0&&o.drag_y!==void 0&&Math.abs(n.xpos-o.drag_x)>2&&Math.abs(n.ypos-o.drag_y)>2&&(o.x+=n.xpos-o.drag_x,o.y+=n.ypos-o.drag_y,o.drag_x=n.xpos,o.drag_y=n.ypos);for(var v=o.x+g.GBorder+Math.max(0,g.sidelab),k=o.w-2*g.GBorder-Math.abs(g.sidelab),A=n.text_h*1.5,z=o.y+g.GBorder+g.toplab*(A+g.GBorder),T=S;T<=C;T++){var I=z+A*T,D=o.items[T];D.selected=!1,t.inrect(n.xpos,n.ypos,v,I,k,A)&&(D.selected=!0)}P(n,o)}else if(m.type==="mouseup")m.which===1?o.drag_x!==void 0&&o.drag_y!==void 0?(o.drag_x=void 0,o.drag_y=void 0):U(n,o):m.which===3&&B(n,o);else if(m.type==="mousedown")m.preventDefault(),m.which===1?n.xpos>o.x&&n.xpos<o.x+o.w&&n.ypos>o.y&&n.ypos<o.y+n.text_h*1.5&&(o.drag_x=n.xpos,o.drag_y=n.ypos):m.which===2&&U(n,o);else if(m.type==="keydown"&&n.menu){var o=n.menu;m.preventDefault();var L=u.getKeyCode(m);if(L===13)U(n,o);else if(L===38){for(var T=S;T<C;T++){var D=o.items[T];if(D.selected){D.selected=!1,o.items[T-1]!==void 0&&(o.items[T-1].selected=!0);break}else T===S&&S!==0?(o.queue.pop(),o.queue.unshift(S-1),P(n,o),o.items[C-1].selected=!0):S===0&&o.items[S].selected===!0&&(P(n,o),o.items[0].selected=!0)}P(n,o)}else if(L===40){for(var T=S;T<C;T++){var D=o.items[T];if(D.selected){D.selected=!1,o.items[T+1]!==void 0&&(o.items[T+1].selected=!0);break}else if(T===C-1){var Y=C+1;C+1===o.items.length&&(Y=0),o.queue.shift(),o.queue.push(Y),o.items[C].selected=!1,o.items[Y].selected=!0,P(n,o)}}P(n,o)}else if(L>=48&&L<=57||L>=65&&L<=90){var ie=String.fromCharCode(L).toUpperCase();o.keypresses===void 0?o.keypresses=ie:o.keypresses=o.keypresses+ie;for(var ne=0,T=0;T<o.items.length;T++){var D=o.items[T];D.selected=!1,!!D.text&&D.text.toUpperCase().indexOf(o.keypresses)===0&&(ne===0&&(D.selected=!0),ne++)}ne===0?(o.keypresses=void 0,P(n,o)):ne===1?U(n,o):P(n,o)}}}t.menu=function(n,o){if(n.useDomMenu){new t.DomMenu(n,o);return}var m=n.text_h*1.5,S=n.canvas.height,C=35,v=S-2*C,k=n.text_h*1.5,A=Math.floor(v/k);if(A>=o.items.length?g.n_show=o.items.length:g.n_show=A,o){if(!n.widget){o.x=n.xpos,o.y=n.ypos,o.val=0,o.h=g.GBorder*2+m*g.n_show+g.toplab*(m+g.GBorder)-1,o.y=o.y-((g.toplab+Math.max(1,o.val)-.5)*m+(1+g.toplab)*g.GBorder)+1;for(var z=o.title.length,T=0,I=0;I<o.items.length;I++){var D=o.items[I];z=Math.max(z,D.text.length),D.style==="checkbox"&&(z+=2),D.style==="separator"&&(z+=2),D.checked&&D.style!=="checkbox"&&(T=m*I)}o.queue=[];for(var L=0;L<g.n_show;L++)o.queue.push(L);o.y=o.y-T,z+=2,z=z*n.text_w,o.w=g.GBorder*2+Math.abs(g.sidelab)+z-1,o.x=o.x-o.w/2,n.menu=o,n.widget={type:"MENU",callback:function(Y){Z(n,o,Y)}}}P(n,o)}},t.widgetbox=function(n,o,m,S,C,v,k,A,z,T){var I=3;if(t.shadowbox(n,o,m,S,C,1,2,"",.75),T){var D=T.length;D=Math.min(D,S/n.text_w),D=Math.max(D,1);var L=o+(S-D*n.text_w)/2;m+=I;var Y=m+(k-m+.7*n.text_h)/2;t.text(n,L,Y,T,n.xwfg)}if(A>0&&z>0){var ie=n.active_canvas.getContext("2d");t.LEGACY_RENDER?(ie.fillStyle=n.bg,ie.fillRect(v,k,A,z)):(ie.save(),ie.globalAlpha=.1,ie.fillStyle=n.bg,ie.fillRect(v,k,A,z),ie.restore())}},t.text=function(n,o,m,S,C){var v=n.active_canvas.getContext("2d");if(o=Math.max(0,o),m=Math.max(0,m),o<0||m<0)throw"On No!";v.textBaseline="bottom",v.textAlign="left",v.font=n.font.font,C===void 0?v.fillStyle=n.fg:v.fillStyle=C,v.fillText(S,o,m)};function oe(n,o,m){var S=!0,C;return C=o/n,n>0?C>m.tL?S=!1:C>m.tE&&(m.tE=C):n<0?C<m.tE?S=!1:C<m.tL&&(m.tL=C):o>0&&(S=!1),S}function ae(n,o,m,S,C,v,k,A){if(o<0&&(o=0),m<0&&(m=0),S<0&&(S=0),C<0&&(C=0),A&&(n.lineWidth=A),k&&(n.strokeStyle=k),n.lineWidth%2===1&&(o===S&&(o=Math.floor(o)+.5,S=o),m===C&&(m=Math.floor(m)+.5,C=m)),!v||!v.mode)n.beginPath(),n.moveTo(o,m),n.lineTo(S,C),n.stroke(),n.beginPath();else if(v.mode==="dashed"){var z=u.dashOn(n,v.on,v.off);if(z)n.beginPath(),n.moveTo(o,m),n.lineTo(S,C),n.stroke(),u.dashOff(n),n.beginPath();else{if(n.beginPath(),m===C){var T=Math.min(o,S);for(S=Math.max(o,S);T<S;)n.moveTo(T,m),n.lineTo(T+v.on,m),n.stroke(),T+=v.on+v.off}else if(o===S){var I=Math.min(m,C);for(C=Math.max(m,C);I<C;)n.moveTo(o,I),n.lineTo(o,I+v.on),n.stroke(),I+=v.on+v.off}else throw"Only horizontal or vertical dashed lines are supported";n.beginPath()}}else if(v.mode==="xor")if(typeof Uint8ClampedArray>"u")n.beginPath(),n.moveTo(o,m),n.lineTo(S,C),n.stroke(),n.beginPath();else{var D=0,L=0;if(m===C)D=Math.abs(S-o),L=A,o=Math.min(o,S);else if(o===S)D=A,L=Math.abs(C-m),m=Math.min(m,C);else throw"Only horizontal and vertical lines can be drawn with XOR";if(D===0||L===0)return;o=Math.floor(o),m=Math.floor(m);for(var Y=n.getImageData(o,m,D,L),ie=Y.data,ne=0,E=ie.length;ne<E;ne+=4)ie[ne]=255-ie[ne],ie[ne+1]=255-ie[ne+1],ie[ne+2]=255-ie[ne+2],ie[ne+3]=255;n.putImageData(Y,o,m),n.clearRect(0,0,1,1)}}function Ae(n,o,m,S){be(n,o,S),m&&(n.strokeStyle=m),n.stroke(),n.closePath()}function ue(n,o,m,S,C){be(n,o,C),m&&(n.strokeStyle=m),S&&(n.fillStyle=S),n.fill(),n.closePath()}function be(n,o,m){if(!(o.length<1)){var S=o[0].x,C=o[0].y;m?n.lineWidth=m:n.lineWidth=1,n.beginPath(),n.moveTo(S,C);for(var v=0;v<o.length;v++)S=o[v].x,C=o[v].y,n.lineTo(S,C)}}function Ee(n,o,m,S,C,v,k){k&&(n.lineWidth=k),v&&(n.strokeStyle=v),n.strokeRect(o,m,S,C)}function Me(n,o,m,S,C,v,k,A){A&&(n.lineWidth=A),k&&(n.strokeStyle=k),v&&(n.fillStyle=v),n.fillRect(o,m,S,C)}function Be(n){return Math.floor(Math.round(255*(n/100)))}function ve(n,o,m){return"rgb("+Math.round(n)+", "+Math.round(o)+", "+Math.round(m)+")"}t.getcolor=function(n,o,m){for(var S=0;S<6&&o[S+1].pos===0;S++);for(;m>o[S].pos&&S<6;)S++;if(S===0||m>=o[S].pos)return ve(Be(o[S].red),Be(o[S].green),Be(o[S].blue));var C=(m-o[S-1].pos)/(o[S].pos-o[S-1].pos),v=Be(C*100),k=255-v;return ve(v*(o[S].red/100)+k*(o[S-1].red/100),v*(o[S].green/100)+k*(o[S-1].green/100),v*(o[S].blue/100)+k*(o[S-1].blue/100))};function Ke(n,o){var m,S;if(n.substring(5,8)===".000000")m=4;else for(m=n.length-1;n[m]==="0";)m=m-1;for(S=0;n[S]===" "&&(m-S+1>5||o);)S=S+1;var C=n.substring(S,m+1);return C.indexOf(".")===-1&&(C+="."),C}t.redraw_warpbox=function(n){n.warpbox&&(n._animationFrameHandle&&cancelAnimFrame(n._animationFrameHandle),n._animationFrameHandle=requestAnimFrame(function(){Ie(n)}))};function Ie(n){n._animationFrameHandle=void 0;var o=n.warpbox,m=n.active_canvas.getContext("2d");if(!!o&&n.xpos>=o.xmin&&n.xpos<=o.xmax&&n.ypos>=o.ymin&&n.ypos<=o.ymax){t.LEGACY_BEHAVIOR?(o.xl=n.xpos,o.yl=n.ypos):(o.xl=Math.min(n.r,Math.max(n.xpos,n.l)),o.yl=Math.min(n.b,Math.max(n.ypos,n.t)));var S=Math.min(o.xo,o.xl),C=Math.min(o.yo,o.yl),v=Math.abs(o.xl-o.xo),k=Math.abs(o.yl-o.yo);if(v===0||k===0)return;o.mode==="vertical"?(S=n.l,v=n.r-n.l):o.mode==="horizontal"&&(C=n.t,k=n.b-n.t),t.onWidgetLayer(n,function(){t.erase_window(n),t.draw_box(n,"xor",S,C,v,k,o.style.opacity,o.style.fill_color)})}}function Je(n){return Math.log(n)/Math.log(10)}t.format_g=function(n,C,m,S){var C=Math.min(C,m+7),v=Math.abs(n).toString(),k=v.indexOf(".");k===-1&&(v=v+".",k=v.length);var A=0,z=v.indexOf("e");z!==-1&&(A=parseInt(v.slice(z+1,v.length),10),v=v.slice(0,z));for(var T=Math.min(m-(v.length-k)+1,m),I=0;I<T;I++)v=v+"0";if(n!==0)if(Math.abs(n)<1)if(v.slice(0,2)==="0.")for(var I=2;I<v.length;I++)if(v[I]==="0")A-=1;else{v="0."+v.slice(I,I+m);break}else v=v.slice(0,m+2);else if(k>m){var A=Math.max(0,k-1);v=v[0]+"."+v.slice(1,m+1)}else v=v.slice(0,m+2);if(A===0)v=v+"    ";else{var D=t.pad(Math.abs(A).toString(),2,"0");A<0?v=v+"E-"+D:v=v+"E+"+D}return n<0?v="-"+v:v=" "+v,v},t.format_f=function(n,o,m){m=Math.max(Math.min(m,20),0);var S=n.toFixed(m).toString();return S=t.pad(S,o+m," "),S},t.pad=function(n,o,m){for(;n.length<o;)n=m+n;return n},t.legacy_shadowbox=function(n,o,m,S,C,v,k,A){for(var z=A.length,T=0,I=0,D=0,L=[],Y=0;Y<11;Y++)L[Y]={x:0,y:0};var ie=!(k===1||k===-1),ne=v===t.L_ArrowLeft||v===t.L_ArrowUp?1:2;if(k!==0&&t.GBorder>0&&(D=l.trunc(Math.min(S,C)/3),D=Math.max(1,Math.min(D,t.GBorder))),D>0){switch(L[0].x=L[1].x=o,L[8].x=L[9].x=o+S,L[1].y=L[8].y=m,L[0].y=L[9].y=m+C,v){case t.L_ArrowLeft:L[0].y=L[1].y=m+l.trunc(C/2),o+=2,--S;break;case t.L_ArrowRight:L[8].y=L[9].y=m+l.trunc(C/2),--o,--S;break;case t.L_ArrowUp:L[1].x=L[8].x=o+l.trunc(S/2),m+=2,--C;break;case t.L_ArrowDown:L[0].x=L[9].x=o+l.trunc(S/2),--m,--C;break}L[2]=L[8],L[10]=L[0],o+=D,m+=D,S-=2*D,C-=2*D}switch(L[4].x=L[5].x=o,L[3].x=L[6].x=o+S,L[3].y=L[4].y=m,L[5].y=L[6].y=m+C,v){case t.L_ArrowLeft:L[4].y=L[5].y=m+l.trunc(C/2);break;case t.L_ArrowRight:L[3].y=L[6].y=m+l.trunc(C/2);break;case t.L_ArrowUp:L[3].x=L[4].x=o+l.trunc(S/2);break;case t.L_ArrowDown:L[5].x=L[6].x=o+l.trunc(S/2);break}L[7]=L[3];var E=n.active_canvas.getContext("2d");D>0&&(E.fillStyle=k>0?n.xwts:n.xwbs,ue(E,L.slice(0,7)),E.fillStyle=k<0?n.xwts:n.xwbs,ue(E,L.slice(5,11))),ie&&(E.fillStyle=n.xwbg,ue(E,L.slice(3,8))),E.fillStyle=n.xwfg,E.textBaseline="alphabetic",ie&&z>0&&(z=Math.min(z,l.trunc(S/n.text_w)),z=Math.max(z,1),T=o+l.trunc((S-z*n.text_w)/2),I=m+l.trunc((C+.7*n.text_h)/2),E.fillText(A,T,I))},t.sigplot_shadowbox=function(n,o,m,S,C,v,k,A,z){var T=n.active_canvas.getContext("2d"),I=A.length,D=k<0?n.xwts:n.xwbs;z=z||1;for(var L=[],Y=0;Y<11;Y++)L[Y]={x:0,y:0};switch(v){case t.L_ArrowLeft:case t.L_ArrowRight:case t.L_ArrowUp:case t.L_ArrowDown:var L=t.chevron(v,o,m,S,C);T.fillStyle=k>0?n.xwts:n.xwbs,ue(T,L.slice(0,6));break;default:t.draw_round_box(n,D,o,m,S,C,z,n.xwbg,5,n.xwbs);break}T.fillStyle=n.xwfg,T.textBaseline="alphabetic";var ie=!(k===1||k===-1);if(ie&&I>0){I=Math.min(I,l.trunc(S/n.text_w)),I=Math.max(I,1);var ne=o+l.trunc((S-I*n.text_w)/2),E=m+l.trunc((C+.7*n.text_h)/2);T.fillText(A,ne,E)}},t.LEGACY_RENDER?t.shadowbox=t.legacy_shadowbox:t.shadowbox=t.sigplot_shadowbox,t.chevron=function(n,o,m,S,C,v){var k=Math.min(S,C);v||(v=k*.25);for(var A=[],z=0;z<6;z++)A[z]={x:0,y:0};var T=l.trunc((S-k)/2+k/4-v/(2*1.414)),I=l.trunc((C-k)/2+k/4-v/(2*1.414));switch(n){case t.L_ArrowLeft:A[0].x=o+T,A[0].y=m+l.trunc(k/2),A[1].x=o+T+l.trunc(k/2),A[1].y=m,A[2].x=o+T+l.trunc(k/2+v/1.414),A[2].y=m+l.trunc(v/1.414),A[3].x=o+T+l.trunc(2*v/1.414),A[3].y=m+l.trunc(k/2),A[4].x=o+T+l.trunc(k/2+v/1.414),A[4].y=m+C-l.trunc(v/1.414),A[5].x=o+T+l.trunc(k/2),A[5].y=m+k;break;case t.L_ArrowRight:A[0].x=o+S-T,A[0].y=m+l.trunc(k/2),A[1].x=o+S-T-l.trunc(k/2),A[1].y=m,A[2].x=o+S-T-l.trunc(k/2+v/1.414),A[2].y=m+l.trunc(v/1.414),A[3].x=o+S-T-l.trunc(2*v/1.414),A[3].y=m+l.trunc(k/2),A[4].x=o+S-T-l.trunc(k/2+v/1.414),A[4].y=m+C-l.trunc(v/1.414),A[5].x=o+S-T-l.trunc(k/2),A[5].y=m+k;break;case t.L_ArrowUp:A[0].x=o+l.trunc(k/2),A[0].y=m+I,A[1].x=o,A[1].y=m+I+l.trunc(k/2),A[2].x=o+l.trunc(v/1.414),A[2].y=m+I+l.trunc(k/2+v/1.414),A[3].x=o+l.trunc(k/2),A[3].y=m+I+l.trunc(2*v/1.414),A[4].x=o+S-l.trunc(v/1.414),A[4].y=m+I+l.trunc(k/2+v/1.414),A[5].x=o+k,A[5].y=m+I+l.trunc(k/2);break;case t.L_ArrowDown:A[0].x=o+l.trunc(k/2),A[0].y=m+C-I,A[1].x=o,A[1].y=m+C-I-l.trunc(k/2),A[2].x=o+l.trunc(v/1.414),A[2].y=m+C-I-l.trunc(k/2+v/1.414),A[3].x=o+l.trunc(k/2),A[3].y=m+C-I-l.trunc(2*v/1.414),A[4].x=o+S-l.trunc(v/1.414),A[4].y=m+C-I-l.trunc(k/2+v/1.414),A[5].x=o+k,A[5].y=m+C-I-l.trunc(k/2);break}return A},t.ifevent=function(n,o){n.button_press=0,n.button_release=0,n.state_mask=0;var m=o.target.getBoundingClientRect(),S=o.offsetX===void 0?o.pageX-m.left-window.scrollX:o.offsetX,C=o.offsetX===void 0?o.pageY-m.top-window.scrollY:o.offsetY;switch(o.type){case"mousedown":switch(n.xpos=l.bound(S,0,n.width),n.ypos=l.bound(C,0,n.height),o.which){case 1:n.button_press=1;break;case 2:n.button_press=2;break;case 3:n.button_press=3;break;case 4:n.button_press=4;break;case 5:n.button_press=5}break;case"mouseup":switch(n.xpos=l.bound(S,0,n.width),n.ypos=l.bound(C,0,n.height),o.which){case 1:n.button_release=1;break;case 2:n.button_release=2;break;case 3:n.button_release=3;break;case 4:n.button_release=4;break;case 5:n.button_release=5}break}},t.scroll_real2pix=function(n){if(n.range===0)return{s1:n.a1,sw:n.a2-n.a1};var o,m,S;return o=(n.a2-n.a1)/n.trange,m=n.a1+Math.floor(.5+(n.smin-n.tmin)*o),S=m+Math.floor(.5+n.srange*o),m>n.a2-n.swmin?m=n.a2-n.swmin:m=Math.max(m,n.a1),S<n.a1+n.swmin?S=n.a1+n.swmin:S=Math.min(S,n.a2),{s1:m,sw:Math.max(S-m,n.swmin)}},t.redrawScrollbar=function(n,o,m){var S,C,v,k,A,z,T,I,D,L,Y=o.active_canvas.getContext("2d"),ie=t.scroll_real2pix(n);if(D=ie.s1,L=ie.sw,T=D,I=n.s1,v=n.x,k=n.y,A=n.w,z=n.h,n.origin&1){if(C=k+z/2,n.origin&2&&(I=A-I-n.sw,T=A-T-L),m===t.XW_DRAW){var ne=n.arrow;t.shadowbox(o,v,k,ne,z-1,t.L_ArrowLeft,2,"",0),t.shadowbox(o,v+A-ne,k,ne-1,z,t.L_ArrowRight,2,"",0)}if(t.LEGACY_RENDER)t.draw_line(o,o.fg,v+n.a1,C,v+n.a2,C),t.shadowbox(o,v+T,k,L+1,z,1,2,"",0);else{var E=Y.createLinearGradient(v+n.a1,0,v+n.a2,0);E.addColorStop(0,o.xwbs),E.addColorStop(.5,o.xwts),E.addColorStop(1,o.xwbs),t.draw_line(o,E,v+n.a1,C,v+n.a2,C,1);var E=Y.createLinearGradient(0,k,0,k+z);E.addColorStop(.1,o.xwts),E.addColorStop(.75,o.xwbs),t.draw_round_box(o,o.xwbg,v+T,k,L+1,z,1,E,8,o.xwbs)}}else{if(S=v+l.trunc(A/2),n.origin<=2&&(I=z-I-n.sw,T=z-T-L),m===t.XW_DRAW){var ne=n.arrow;t.shadowbox(o,v,k,A-1,ne,t.L_ArrowUp,2,"",0),t.shadowbox(o,v,k+z-ne,A-1,ne,t.L_ArrowDown,2,"",0)}if(t.LEGACY_RENDER)t.draw_line(o,o.fg,S,k+n.a1,S,k+n.a2),t.shadowbox(o,v,k+T,A,L+1,1,2,"",0);else{var E=Y.createLinearGradient(0,k+n.a1,0,k+n.a2);E.addColorStop(0,o.xwbs),E.addColorStop(.5,o.xwts),E.addColorStop(1,o.xwbs),t.draw_line(o,E,S,k+n.a1,S,k+n.a2,1);var E=Y.createLinearGradient(v,0,v+A,0);E.addColorStop(.1,o.xwts),E.addColorStop(.75,o.xwbs),t.draw_round_box(o,o.xwbg,v-1,k+T,A,L+1,1,E,8,o.xwbs)}}n.s1=D,n.sw=L},t.real_distance_to_pixel=function(n,o,m,S,C,v){var k=t.real_to_pixel(n,o,m,v),A=t.real_to_pixel(n,S,C,v),z=A.x-k.x,T=A.y-k.y;return{x:z,y:T,d:Math.sqrt(z*z+T*T),clipped:k.clipped||A.clipped}},t.real_box_to_pixel=function(n,o,m,S,C,v){var k,A;return n.origin===1?(k=t.real_to_pixel(n,o,m,v),A=t.real_to_pixel(n,o+S,m-C,v)):n.origin===2?(k=t.real_to_pixel(n,o,m,v),A=t.real_to_pixel(n,o-S,m-C,v)):n.origin===3?(k=t.real_to_pixel(n,o,m,v),A=t.real_to_pixel(n,o-S,m+C,v)):n.origin===4&&(k=t.real_to_pixel(n,o,m,v),A=t.real_to_pixel(n,o+S,m+C,v)),{ul:k,lr:A,w:A.x-k.x,h:A.y-k.y,clipped:k.clipped||A.clipped}},t.real_to_pixel=function(n,o,m,S){var C=t.origin(n.origin,4,n.stk[n.level]);if(C.xscl===0||C.yscl===0)return{x:0,y:0};var v=C.x1,k=C.y1,A=C.xmin,z=1/C.xscl,T=C.ymin,I=1/C.yscl,D=!1,L=!1;return o!==null&&(n.origin===1||n.origin===4?(D=o>C.xmax||o<C.xmin,S&&(o=Math.min(o,C.xmax),o=Math.max(o,C.xmin))):(D=o<C.xmax||o>C.xmin,S&&(o=Math.max(o,C.xmax),o=Math.min(o,C.xmin))),o=Math.round((o-A)*z)+v),m!==null&&(n.origin===1||n.origin===2?(L=m>C.ymin||m<C.ymax,S&&(m=Math.min(m,C.ymin),m=Math.max(m,C.ymax))):(L=m<C.ymin||m>C.ymax,S&&(m=Math.max(m,C.ymin),m=Math.min(m,C.ymax))),m=Math.round((m-T)*I)+k),o=Math.round(o),m=Math.round(m),{x:o,y:m,clipped_x:D,clipped_y:L,clipped:D||L}},t.pixel_to_real=function(n,o,m){var S=Math.min(n.r,Math.max(n.l,o)),C=Math.min(n.b,Math.max(n.t,m)),v,k,A=n.level;return n.origin!==2&&n.origin!==3?v=n.stk[A].xmin+(S-n.stk[A].x1)*n.stk[A].xscl:v=n.stk[A].xmin+(n.stk[A].x2-S)*n.stk[A].xscl,n.origin>2?k=n.stk[A].ymin+(C-n.stk[A].y1)*n.stk[A].yscl:k=n.stk[A].ymin+(n.stk[A].y2-C)*n.stk[A].yscl,{x:v,y:k}},t.colormap=function(n,o,m){n.pixel=new y(o,{ncolors:m})},t.colorbar=function(n,o,m,S,C){if(!n.pixel){l.log.warn("COLORMAP not initialized, cannot draw colorbar");return}n.pixel.setRange(0,n.pixel.map.length);for(var v=1;v<C;v++){var k=Math.floor(n.pixel.map.length*(v-1)/C);t.draw_line(n,k,o,m+C-v,o+S,m+C-v)}t.draw_box(n,n.fg,o+.5,m,S,C)},t.legend_colorbar=function(n,o,m,S,C){if(!n.pixel){l.log.warn("COLORMAP not initialized, cannot draw colorbar");return}n.pixel.setRange(0,n.pixel.map.length);for(var v=1;v<S;v++){var k=Math.floor(n.pixel.map.length*(v-1)/S);t.draw_line(n,k,o+S-v,m,o+S-v,m+C)}t.draw_box(n,n.fg,o+.5,m,S,C)};function Ze(n,o,m,S,C,v,k,A,z,T,I,D,L,Y,ie){I===void 0&&(I=0),D===void 0&&(D=0),L===void 0&&(L=m.width-I),Y===void 0&&(Y=m.height-D),n._renderCanvas.width=m.width,n._renderCanvas.height=m.height;for(var ne=n._renderCanvas.getContext("2d"),E=ne.createImageData(n._renderCanvas.width,n._renderCanvas.height),N=new Uint32Array(m),R=0;R<N.length;++R){var V=R*4,te=n.pixel.getColorByIndex(N[R]);E.data[V]=te.red,E.data[V+1]=te.green,E.data[V+2]=te.blue,E.data[V+3]=255}ne.putImageData(E,0,0),o.save(),o.globalAlpha=S,v||(o.imageSmoothingEnabled=!1,o.mozImageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1),ie?(o.translate(k+z/2,A+T/2),o.rotate(-Math.PI/2),o.translate(-(k+T/2),-(A+z/2)),o.drawImage(n._renderCanvas,I,D,L,Y,k,A,T,z)):o.drawImage(n._renderCanvas,I,D,L,Y,k,A,z,T),o.restore()}function et(n,o,m,S,C,v,k,A,z,T,I,D,L,Y,ie){if(I===void 0&&(I=0),D===void 0&&(D=0),L===void 0&&(L=m.width-I),Y===void 0&&(Y=m.height-D),m.width<32768&&m.height<32768){n._renderCanvas.width=m.width,n._renderCanvas.height=m.height;var ne=n._renderCanvas.getContext("2d"),E=ne.createImageData(n._renderCanvas.width,n._renderCanvas.height),N=new Uint32Array(m),R=new Uint32Array(E.data.buffer);if(m.contents!=="rgba")for(var V=0;V<N.length;V++)R[V]=n.pixel.getColorByIndex(N[V]).color;else for(var V=0;V<N.length;V++)R[V]=N[V];ne.putImageData(E,0,0)}else C?(n._renderCanvas.width=z,n._renderCanvas.height=T,tt(n,n._renderCanvas,m,I,D,L,Y,C),L=n._renderCanvas.width,Y=n._renderCanvas.height):L<32767&&Y<32767?(n._renderCanvas.width=L,n._renderCanvas.height=Y,tt(n,n._renderCanvas,m,I,D,L,Y)):(n._renderCanvas.width=Math.min(z*2,m.width),n._renderCanvas.height=Math.min(T*2,m.height),tt(n,n._renderCanvas,m,I,D,L,Y),L=n._renderCanvas.width,Y=n._renderCanvas.height),I=0,D=0;o.save(),o.globalAlpha=S,v||(o.imageSmoothingEnabled=!1,o.mozImageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1),ie?(o.translate(k+z/2,A+T/2),o.rotate(ie),o.translate(-(k+T/2),-(A+z/2)),o.drawImage(n._renderCanvas,I,D,L,Y,k,A,T,z)):o.drawImage(n._renderCanvas,I,D,L,Y,k,A,z,T),o.restore()}function tt(n,o,m,S,C,v,k,A){let z=n.pixel;var T=new Uint32Array(m);v||(v=m.width),k||(k=m.height),S||(S=0),C||(C=0);var I=o.width,D=o.height,L=o.getContext("2d");(!n.scaledImgd||n.scaledImgd.width!==I||n.scaledImgd.height!==D)&&(n.scaledImgd=L.createImageData(I,D));var Y=new Uint32Array(n.scaledImgd.data.buffer),ie=v/I,ne=k/D,E=0,N=0,R=0,V,te=z.getNColors()/2;if(!A||m.contents==="rgba")for(var Q=0;Q<Y.length;Q++)E=Math.floor(Q%I*ie)+S,N=Math.floor(Q/I*ne)+C,R=Math.floor(N*m.width+E),V=T[R],m.contents!=="rgba"?Y[Q]=z.getColorByIndex(V).color:Y[Q]=T[R];else for(var Q=0;Q<Y.length;Q++){if(E=Math.floor(Q%I*ie)+S,N=Math.floor(Q/I*ne)+C,R=Math.floor(N*m.width+E),V=T[R],A==="avg"){for(var fe=1;fe<ie;fe++)V+=T[R+fe];V=Math.round(V/ie)}else if(A==="min")for(var fe=1;fe<ie;fe++)V=Math.min(V,T[R+fe]);else if(A==="max")for(var fe=1;fe<ie;fe++)V=Math.max(V,T[R+fe]);else if(A==="minmax")for(var fe=1;fe<ie;fe++)V=Math.abs(V-te)>Math.abs(T[R+fe]-te)?V:T[R+fe];Y[Q]=z.getColorByIndex(V).color}L.putImageData(n.scaledImgd,0,0)}var it=typeof Uint8ClampedArray>"u"?Ze:et;t.shift_image_rows=function(n,o,m,S){var C=new Uint32Array(o);return m>0?(m=m*o.width,C.set(C.subarray(0,C.length-m),m),S&&C.fill(0,0,m)):m<0&&(m=Math.abs(m)*o.width,C.set(C.subarray(m)),S&&C.fill(0,C.length-m)),o},t.update_image_row=function(n,o,m,S,C,v,k){var A=new Uint32Array(o,S*o.width*4,o.width);n.pixel.setRange(C,v);for(var z=Math.max(1,m.length/o.width),T=0;T<o.width;T++){var I=Math.floor(T*z),D=m[I];if(z>1){if(k===1){for(var L=1;L<z;L++)D+=m[I+L];D=D/z}else if(k===2)for(var L=1;L<z;L++)D=Math.min(D,m[I+L]);else if(k===3)for(var L=1;L<z;L++)D=Math.max(D,m[I+L]);else if(k===4)D=m[T];else if(k===5)for(var L=1;L<z;L++)D=Math.max(Math.abs(D),Math.abs(m[I+L]))}var Y=n.pixel.getColorIndex(D);A[T]=Y}return A},t.update_image_col=function(n,o,m,S,C,v,k){var A=new Uint32Array(o);n.pixel.setRange(C,v);for(var z=Math.max(1,m.length/o.height),T=0;T<o.height;T++){var I=Math.floor(T*z),D=m[I];if(z>1){if(k===1){for(var L=1;L<z;L++)D+=m[I+L];D=D/z}else if(k===2)for(var L=1;L<z;L++)D=Math.min(D,m[I+L]);else if(k===3)for(var L=1;L<z;L++)D=Math.max(D,m[I+L]);else if(k===4)D=m[T];else if(k===5)for(var L=1;L<z;L++)D=Math.max(Math.abs(D),Math.abs(m[I+L]))}var Y=n.pixel.getColorIndex(D);A[(o.height-T)*o.width+S]=Y}return A},t.create_image=function(n,o,m,S,C,v,k,A,z){var T=n.active_canvas.getContext("2d");if(n.pixel||(console.log("COLORMAP not initialized, defaulting to foreground"),n.pixel=new y(l.Mc.colormap[1].colors)),z==="horizontal"){let te=S;S=C,C=te}n.pixel.setRange(v,k),S=Math.ceil(S),C=Math.ceil(C);var I=new ArrayBuffer(S*C*4);I.width=S,I.height=C;var D;z!=="horizontal"?D=Math.max(1,m/S):D=Math.max(1,m/C);var L=new Uint32Array(I);if(o)for(var Y=0;Y<L.length;Y++){var ie,ne,E;n.origin===1||n.origin===4?ie=Math.floor(Y%S):ie=S-Math.floor(Y%S)-1,n.origin===3||n.origin===4?ne=Math.floor(Y/S):ne=C-Math.floor(Y/S)-1,z!=="horizontal"?E=ne*m+Math.floor(ie*D):E=ie*m+Math.floor(ne*D);var N=o[E];if(D>1){if(A===1){for(var R=1;R<D;R++)N+=o[E+R];N=N/D}else if(A===2)for(var R=1;R<D;R++)N=Math.min(N,o[E+R]);else if(A===3)for(var R=1;R<D;R++)N=Math.max(N,o[E+R]);else if(A===4)N=o[E];else if(A===5)for(var R=1;R<D;R++)N=Math.max(Math.abs(N),Math.abs(o[E+R]))}var V=n.pixel.getColorIndex(N);L[Y]=V}return I},t.resize_image_height=function(n,o,m){if(o.height===m)return o;var S=ArrayBuffer.transfer(o,o.width*m*4);return Object.assign(S,o),S.height=m,S},t.put_image=function(n,o,m,S,C,v,k,A,z,T,I,D){var L=n.active_canvas.getContext("2d");n.pixel||(l.log.warn("COLORMAP not initialized, defaulting to foreground"),n.pixel=new y(l.Mc.colormap[1].colors));var Y,ie;C>0?Y=m*C:Y=-C,Y=Math.floor(Y),ie=Math.floor(S*v);var ne=new ArrayBuffer(Y*ie*4);ne.width=Y,ne.height=ie;for(var E=new Uint32Array(ne),N=0;N<E.length;N++){var R=n.pixel.getColorIndex(o[N]);R&&(E[N]=R.color)}return it(n,L,ne,T,D,I,k,A,Y,ie),ne},t.draw_image=function(n,o,m,S,C,v,k,A,z,T,I,D){var L=Math.max(m,n.stk[n.level].xmin),Y=Math.min(C,n.stk[n.level].xmax),ie=Math.max(S,n.stk[n.level].ymin),ne=Math.min(v,n.stk[n.level].ymax);if(!(Y<L)&&!(ne<ie)&&!(o.width<=1||Math.abs(C-m)===0)&&!(o.height<=1||Math.abs(v-S)===0)){var E=o.width/(C-m),N=o.height/(v-S),R,V,te,Q,fe,me,we,Se,pe,ke;if(n.origin===1)if(!T)te=Math.max(0,Math.floor((v-ne)*N)),me=Math.min(o.height-te,Math.ceil((ne-ie)*N)+1),Q=Math.max(0,Math.floor((L-m)*E)),fe=Math.min(o.width-Q,Math.ceil((Y-L)*E)+1),we=Q/E+m,Se=(Q+fe)/E+m,pe=v-(te+me)/N,ke=v-te/N,R=t.real_to_pixel(n,we,ke),V=t.real_to_pixel(n,Se,pe);else if(Math.abs(T- -Math.PI/2)<1e-12)E=o.height/(C-m),N=o.width/(v-S),Q=Math.max(0,Math.floor((ie-S)*N)),fe=Math.min(o.width-Q,Math.ceil((ne-ie)*N)+1),te=Math.max(0,Math.floor((L-m)*E)),me=Math.min(o.height-te,Math.ceil((Y-L)*E)+1),pe=Q/N+S,ke=(Q+fe)/N+S,we=te/E+m,Se=(te+me)/E+m,R=t.real_to_pixel(n,we,ke),V=t.real_to_pixel(n,Se,pe);else throw new RangeError(`Rotation angle ${T} rad not supported. Must be -Math.PI/2.`);else n.origin===2?(te=Math.max(0,Math.floor((v-ne)*N)),me=Math.min(o.height-te,Math.ceil((ne-ie)*N)+1),Q=Math.max(0,Math.floor((Y-C)*E)),fe=Math.min(o.width-Q,Math.floor((Y-L)*E)),we=C-(Q+fe)/E,Se=C-Q/E,pe=v-(te+me)/N,ke=v-te/N,R=t.real_to_pixel(n,Se,ke),V=t.real_to_pixel(n,we,pe)):n.origin===3?(te=Math.max(0,Math.floor((ie-S)*N)),me=Math.min(o.height-te,Math.ceil((ne-ie)*N)+1),Q=Math.max(0,Math.floor((Y-C)*E)),fe=Math.min(o.width-Q,Math.ceil((Y-L)*E)+1),we=C-(Q+fe)/E,Se=C-Q/E,pe=te/N+S,ke=(te+me)/N+S,R=t.real_to_pixel(n,Se,pe),V=t.real_to_pixel(n,we,ke)):n.origin===4&&(te=Math.max(0,Math.floor((ie-S)*N)),me=Math.min(o.height-te,Math.ceil((ne-ie)*N)+1),Q=Math.max(0,Math.floor((L-m)*E)),fe=Math.min(o.width-Q,Math.ceil((Y-L)*E)+1),we=Q/E+m,Se=(Q+fe)/E+m,pe=te/N+S,ke=(te+me)/N+S,R=t.real_to_pixel(n,we,pe),V=t.real_to_pixel(n,Se,ke));var _e=V.x-R.x,Ce=V.y-R.y;if(fe=Math.max(1,fe),me=Math.max(1,me),typeof A=="number"){var Le=(n.r-n.l)/fe;A=Le<=A}var ge=n.active_canvas.getContext("2d");ge.save(),ge.beginPath(),ge.rect(n.l,n.t,n.r-n.l,n.b-n.t),ge.clip(),it(n,ge,o,k,z,A,R.x,R.y,_e,Ce,Q,te,fe,me,T),I&&(ge.strokeStyle=I,ge.strokeRect(R.x,R.y,_e,Ce)),D&&t.text(n,R.x,R.y+n.text_h,D,n.fg),ge.restore()}},Qr.exports=t})()});var tn=$e((Es,en)=>{(function(){var p=pt(),y=mt(),u=function(l){this.plot=l,this.xbuf=void 0,this.ybuf=void 0,this.offset=0,this.xstart=0,this.xdelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.size=0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.opacity=1,this.fillStyle=null,this.preferred_origin=1,this.pointbufsize=0,this.xptr=null,this.yptr=null,this.xpoint=null,this.ypoint=null,this.options={}};u.prototype={init:function(l,t){var a=this.plot._Gx;if(this.hcb=l,this.hcb.buf_type="D",this.offset=0,this.size=0,this.xbufn=0,this.ybufn=0,this.hcb.pipe?l.class===2&&(p.force1000(l),this.size=l.subsize):l.class===2?(p.force1000(l),this.size=l.subsize):this.size=l.size,t.framesize&&(this.size=t.framesize),this.hcb.pipe&&!this.size)throw"1D layer could not determine appropriate size for pipe, use framesize option";if(l.class<=2&&(this.xsub=-1,this.ysub=1,this.cx=l.format[0]==="C"),this.skip=1,this.cx&&(this.skip=2),this.xstart=l.xstart,this.xdelta=l.xdelta,this.size>0){var h=l.xstart+l.xdelta*(this.size-1);this.xmin=Math.min(l.xstart,h),this.xmax=Math.max(l.xstart,h)}else this.xmin=0,this.xmax=0;if(this.xlab=l.xunits,this.ylab=l.yunits,this.hcb.pipe){this.drawmode="scrolling",this.position=0,this.tle=t.tl,this.ybufn=this.size*Math.max(this.skip*p.PointArray.BYTES_PER_ELEMENT,p.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn);var s=this;p.addPipeWriteListener(this.hcb,function(){s._onpipewrite()})}},_onpipewrite:function(){var l=new p.PointArray(this.ybuf),t=this.tle;t===void 0&&(t=Math.floor(p.pavail(this.hcb))/this.hcb.spa);for(var a=t*this.hcb.spa;p.pavail(this.hcb)>=a;){if(this.drawmode==="lefttoright")this.position=0,l.set(l.subarray(0,this.size-a),a);else if(this.drawmode==="righttoleft")this.position=this.size-t,l.set(l.subarray(a),0);else if(this.drawmode!=="scrolling")throw"Invalid draw mode";var h=p.grabx(this.hcb,l,Math.min(t,this.size-this.position)*this.hcb.spa,this.position*this.hcb.spa);if(h===0)break;this.position=(this.position+t)%this.size,this.tle===void 0&&(t=Math.floor(p.pavail(this.hcb))/this.hcb.spa),a=t*this.hcb.spa}},get_data:function(l,t){var a=this.plot._Gx,h=this.hcb,s=this.skip,c;h.class===2?c=h.subsize:c=h.size;var _=0,g=0;a.index?(_=Math.floor(l),g=Math.floor(t+.5)):h.xdelta>=0?(_=Math.floor((l-h.xstart)/h.xdelta)-1,g=Math.floor((t-h.xstart)/h.xdelta+.5)):(_=Math.floor((t-h.xstart)/h.xdelta)-1,g=Math.floor((l-h.xstart)/h.xdelta+.5)),_=Math.max(0,_),g=Math.min(c-1,g);var P=Math.max(0,Math.min(g-_+1,a.bufmax));if(h.xdelta<0&&(_=g-P+1),!(_>=this.imin&&_+P<=this.imin+this.size&&this.ybuf!==void 0)){if(!this.modified){if(h.class<=2){var U=this.offset+_,s=this.skip;this.ybufn=P*Math.max(s*p.PointArray.BYTES_PER_ELEMENT,p.PointArray.BYTES_PER_ELEMENT),(this.ybuf===void 0||this.ybuf.byteLength<this.ybufn)&&(this.ybuf=new ArrayBuffer(this.ybufn));var B=new p.PointArray(this.ybuf),Z=p.grab(h,B,U,P);this.imin=_,this.xstart=h.xstart+_*this.xdelta,this.size=Z}}}},change_settings:function(l){if(l.index!==void 0)if(l.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;var t=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,t),this.xmax=Math.max(this.hcb.xstart,t)}if(l.drawmode!==void 0&&(this.drawmode=l.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*p.PointArray.BYTES_PER_ELEMENT,p.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)),l.framesize!==void 0){this.size=l.framesize,this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;var t=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,t),this.xmax=Math.max(this.hcb.xstart,t),this.ybufn=this.size*Math.max(this.skip*p.PointArray.BYTES_PER_ELEMENT,p.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)}},reload:function(l,t){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var a=this.hcb.dview.length!==l.length||t;if(t)for(var h in t)this.hcb[h]=t[h],(h==="xstart"||h==="xdelta")&&(a=!0);this.hcb.setData(l),this.imin=-1,this.size=this.hcb.size;var s=this.xmin,c=this.xmax;if(a){this.hcb.class===2&&p.force1000(this.hcb);var _=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1);this.xmin=Math.min(this.hcb.xstart,_),this.xmax=Math.max(this.hcb.xstart,_),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,s=void 0,c=void 0}return{xmin:s,xmax:c}},push:function(l,t,a){if(t){for(var h in t)this.hcb[h]=t[h],h==="type"&&(this.hcb.class=t[h]/1e3);t.subsize&&this.hcb.class===2&&(p.force1000(this.hcb),this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*p.PointArray.BYTES_PER_ELEMENT,p.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));var s=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,s),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,s),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart}return l.length>0&&p.filad(this.hcb,l,a),!!t},prep:function(l,t){var a=this.plot._Gx,h=this.plot._Mx;this.get_data(l,t);var s=Math.ceil(this.size),c=this.skip;if(s===0)return{num:0,start:0,end:0};s*p.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=s*p.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new p.PointArray(this.xptr),this.ypoint=new p.PointArray(this.yptr));var _=new p.PointArray(this.ybuf),g=this.xmin,P=this.xmax,U,B,Z;if(a.cmode===5||this.xsub>0)s<=0?(g=a.panxmin,P=a.panxmax):a.cmode!==5?this.xpoint=new p.PointArray(this.xbuf):this.cx?p.vmov(_,c,this.xpoint,1,s):this.line!==0?(Z=p.vmxmn(_,s),this.xpoint[0]=Z.smax,this.xpoint[1]=Z.smin,U=0,B=2,s=2):this.xpoint=_,s>0&&(Z=p.vmxmn(this.xpoint,s),P=Z.smax,g=Z.smin,U=0,B=s);else if(s>0){var oe=this.xstart,ae=this.xdelta,Ae=s;a.index?(U=0,B=s-1):ae>=0?(U=Math.max(1,Math.min(Ae,Math.round((l-oe)/ae)))-1,B=Math.max(1,Math.min(Ae,Math.round((t-oe)/ae)+2))-1):(U=Math.max(1,Math.min(Ae,Math.round((t-oe)/ae)-1))-1,B=Math.max(1,Math.min(Ae,Math.round((l-oe)/ae)+2))-1),s=B-U+1,s<0&&(p.log.debug("Nothing to plot"),s=0),_=new p.PointArray(this.ybuf).subarray(U*c),oe=oe+ae*U;for(var ue=0;ue<s;ue++)a.index?this.xpoint[ue]=this.imin+ue+1:this.xpoint[ue]=oe+ue*ae}if(s<=0)return p.log.debug("Nothing to plot"),{num:s,start:U,end:B};if(this.cx)a.cmode===1?p.cvmag(_,this.ypoint,s):a.cmode===2?a.plab===25?(p.cvpha(_,this.ypoint,s),p.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,s)):a.plab!==24?p.cvpha(_,this.ypoint,s):p.cvphad(_,this.ypoint,s):a.cmode===3?p.vmov(_,c,this.ypoint,1,s):a.cmode>=6?p.cvmag2(_,this.ypoint,s):a.cmode>=4&&p.vmov(_.subarray(1),c,this.ypoint,1,s);else if(a.cmode===5)p.vfill(this.ypoint,0,s);else if(a.cmode===1||a.cmode>=6)for(var ue=0;ue<s;ue++)this.ypoint[ue]=Math.abs(_[ue]);else for(var ue=0;ue<s;ue++)this.ypoint[ue]=_[ue];if(a.cmode>=6){p.vlog10(this.ypoint,a.dbmin,this.ypoint);var be=10;a.cmode===7&&(be=20),a.lyr.length>0&&a.lyr[0].cx&&(be=be/2),p.vsmul(this.ypoint,be,this.ypoint)}Z=p.vmxmn(this.ypoint,s),P=Z.smax,g=Z.smin;var Ee=P-g;return Ee<0&&(P=g,g=P+Ee,Ee=-Ee),Ee<=1e-20?(g=g-1,P=P+1):(g=g-.02*Ee,P=P+.02*Ee),{num:s,start:U,end:B,panxmin:this.xmin,panxmax:this.xmax,panymin:g,panymax:P}},get_pan_bounds:function(l){var t=this.plot._Mx,a=this.plot._Gx,h=this.xmin,s=Math.min(h+this.size*this.xdelta,h+a.bufmax*this.xdelta);l?(h=l.xmin,s=l.xmax):a.all&&a.expand&&(h=this.xmin,s=this.xmax);let c,_,g=0;for(;h<s;){let P=this.prep(h,s);c=c===void 0?P.panymin:Math.min(c,P.panymin),_=_===void 0?P.panymax:Math.max(_,P.panymax),g+=P.num,a.all?this.size===0?h=s:a.index?h=h+P.num:this.xdelta>=0?h=h+P.num*this.xdelta:s=s+P.num*this.xdelta:h=s}return c===void 0&&(c=0),_===void 0&&(_=0),this.ymin=c,this.ymax=_,{num:g,xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}},draw:function(){var l=this.plot._Mx,t=this.plot._Gx,a=this.color,h=this.symbol,s=this.radius,c=0,_=0,g={};this.fillStyle?g.fillStyle=this.fillStyle:t.fillStyle&&(g.fillStyle=t.fillStyle),this.options&&(g.highlight=this.options.highlight,g.noclip=this.options.noclip),this.line===0?_=0:(_=1,this.thick>0?_=this.thick:this.thick<0&&(_=Math.abs(this.thick),g.dashed=!0),this.line===1&&(g.vertsym=!0),this.line===2&&(g.horzsym=!0),this.line===4&&(g.horzsym=!0,g.vertsym=!0));var P=t.segment&&t.cmode!==5&&this.xsub>0&&c===0,U=this.xdelta,B,Z;if(this.xdata?(B=this.xmin,Z=this.xmax):(B=Math.max(this.xmin,l.stk[l.level].xmin),Z=Math.min(this.xmax,l.stk[l.level].xmax),B>=Z&&(t.panxmin=Math.min(t.panxmin,this.xmin),t.panxmax=Math.max(t.panxmax,this.xmax))),_===0&&h===0)return{num:0};let oe,ae,Ae=0;for(;B<Z;){var ue=this.prep(B,Z);oe=oe===void 0?ue.panymin:Math.min(oe,ue.panymin),ae=ae===void 0?ue.panymax:Math.max(ae,ue.panymax),Ae+=ue.num,ue.num>0&&(P||y.trace(l,a,new p.PointArray(this.xptr),new p.PointArray(this.yptr),ue.num,ue.start,1,_,h,s,g)),this.size===0?B=Z:t.index?B=B+ue.num:U>=0?B=B+this.size*U:Z=Z+this.size*U}if(this.position&&this.drawmode==="scrolling"){var be=y.real_to_pixel(l,this.position*this.xdelta,0);be.x>l.l&&be.x<l.r&&y.draw_line(l,"white",be.x,l.t,be.x,l.b)}return this.ymin=oe,this.ymax=ae,{num:Ae,xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}},add_highlight:function(l){this.options.highlight||(this.options.highlight=[]);var t=l.xstart,a=l.xend,h=isNaN(t),s=isNaN(a);(h===!0||t===null||t===void 0)&&(this.options.highlight=[]),(s===!0||a===null||a===void 0)&&(this.options.highlight=[]),l instanceof Array?this.options.highlight.push.apply(this.options.highlight,l):this.options.highlight.push(l),this.plot.refresh()},remove_highlight:function(l){if(this.options.highlight){for(var t=this.options.highlight.length;t--;)(l===this.options.highlight[t]||l===this.options.highlight[t].id)&&this.options.highlight.splice(t,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=void 0,this.plot.refresh())}};var r=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];u.overlay=function(l,t,a){var h=l._Gx,s=l._Mx;t.class===2&&p.force1000(t),t.buf_type="D";var c=0,_=1;if(t.class===2&&t.size>0){var g=t.size/t.subsize;_=Math.min(g,16-h.lyr.length)}var P=a.name;delete a.name;for(var U=[],B=c;B<_;B++){var Z=new u(l);Z.init(t,a);var oe=h.lyr.length%r.length;Z.color=y.getcolor(s,p.Mc.colormap[3].colors,r[oe]),t.class===2?(P!==void 0&&(Array.isArray(P)?Z.name=P[B]:(Z.name=P,Z.name=Z.name+"."+y.pad((B+1).toString(),3,"0"))),Z.name||(t.file_name?Z.name=p.trim_name(t.file_name):Z.name="layer_"+h.lyr.length,Z.name=Z.name+"."+y.pad((B+1).toString(),3,"0")),Z.offset=B*t.subsize):(P!==void 0?Z.name=P:t.file_name?Z.name=p.trim_name(t.file_name):Z.name="layer_"+h.lyr.length,Z.offset=0);for(var ae in a)Z[ae]!==void 0&&(Z[ae]=a[ae]);l.add_layer(Z)&&U.push(Z)}return U},en.exports=u})()});var nn=$e((Ms,rn)=>{(function(){var p=pt(),y=mt(),u=function(r){this.plot=r,this.offset=0,this.xstart=0,this.xdelta=0,this.ystart=0,this.ydelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.drawmode="scrolling",this.hcb=void 0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.preferred_origin=4,this.opacity=1,this.xcompression=r._Gx.xcompression,this.downscale=r._Gx.rasterDownscale,this.lpb=void 0,this.yc=1,this.options={}};u.prototype={init:function(r){var l=this.plot._Gx,t=this.plot._Mx;if(this.hcb=r,this.hcb.buf_type="D",this.hcb.pipe){var a=this;this.position=0,this.frame=0,this.drawdirection!=="horizontal"?this.lps=this.hcb.lps||Math.ceil(Math.max(1,t.b-t.t)):this.lps=this.hcb.lps||Math.ceil(Math.max(1,t.r-t.l)),p.addPipeWriteListener(this.hcb,function(){a._onpipewrite()})}else this.lps=this.hcb.lps||Math.ceil(r.size);this.offset=0,this.xbufn=0,this.ybufn=0,r.class<=2&&(this.xsub=-1,this.ysub=1,this.cx=r.format[0]==="C"),this.skip=1,this.cx&&(this.skip=2),this.init_axes()},init_axes:function(){var r=this.plot._Gx,l=this.plot._Mx;if(r.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.ystart=1,this.ydelta=1,this.ymin=1,this.drawdirection!=="horizontal"?(this.xmax=this.hcb.subsize,this.ymax=this.size):(this.xmax=this.size,this.ymax=this.hcb.subsize);else if(this.drawdirection!=="horizontal"){this.xstart=this.hcb.xstart,this.xdelta=this.hcb.xdelta;var t=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,t),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,t),this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta;var t=this.hcb.ystart+this.hcb.ydelta*this.lps;this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,t),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,t)}else{this.ystart=this.hcb.xstart,this.ydelta=this.hcb.xdelta;var t=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.ymin=this.hcb.xmin||Math.min(this.hcb.xstart,t),this.ymax=this.hcb.xmax||Math.max(this.hcb.xstart,t),this.xstart=this.hcb.ystart,this.xdelta=this.hcb.ydelta;var t=this.hcb.ystart+this.hcb.ydelta*this.lps;this.xmin=this.hcb.ymin||Math.min(this.hcb.ystart,t),this.xmax=this.hcb.ymax||Math.max(this.hcb.ystart,t)}this.xframe=this.hcb.subsize,this.yframe=this.lps*this.hcb.subsize/this.xframe,this.lpb===0&&(this.lpb=this.yframe),(!this.lpb||this.lpb<=0)&&(this.lpb=16),this.lpb=Math.max(1,this.lpb/this.yc)*this.yc,this.drawdirection!=="horizontal"?(this.xlab=this.hcb.xunits,this.ylab=this.hcb.yunits):(this.xlab=this.hcb.yunits,this.ylab=this.hcb.xunits),this.drawmode==="falling"||this.drawdirection==="horizontal"?(this.plot._Mx.origin=1,this.preferred_origin=1):(this.plot._Mx.origin=4,this.preferred_origin=4)},_onpipewrite:function(){for(var r=this.plot._Gx,l=this.plot._Mx;p.pavail(this.hcb)>=this.hcb.subsize*this.hcb.spa;){if(this.drawmode!=="scrolling"&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart),this.drawmode==="falling"&&this.drawdirection!=="horizontal")this.position=0,this.img&&y.shift_image_rows(l,this.img,1);else if(this.drawmode==="rising"&&this.drawdirection!=="horizontal")this.position=this.lps-1,this.img&&y.shift_image_rows(l,this.img,-1);else if(this.drawmode==="scrolling"){var t=Math.abs(this.ymax-this.ymin);this.ystart=0,this.ymin=0,this.ymax=t,this.position>=this.lps&&(this.position=0)}else throw"Invalid draw mode";if(!this.buf)return;var a=p.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa);if(a===0){p.log.error("Internal error");return}var h=new p.PointArray(this.hcb.subsize);this.cx?r.cmode===1?p.cvmag(this.buf,h,h.length):r.cmode===2?r.plab===25?(p.cvpha(this.buf,h,h.length),p.vsmul(h,1/(2*Math.PI),h,h.length)):r.plab!==24?p.cvpha(this.buf,h,h.length):p.cvphad(this.buf,h,h.length):r.cmode===3?p.vmov(this.buf,this.skip,h,1,h.length):r.cmode===4?p.vmov(this.buf.subarray(1),this.skip,h,1,h.length):r.cmode===5?p.vfill(h,0,h.length):r.cmode===6?p.cvmag2logscale(this.buf,r.dbmin,10,h):r.cmode===7&&p.cvmag2logscale(this.buf,r.dbmin,20,h):r.cmode===1?p.vabs(this.buf,h):r.cmode===2?p.vfill(h,0,h.length):r.cmode===3?p.vmov(this.buf,this.skip,h,1,h.length):r.cmode===4||r.cmode===5?p.vfill(h,0,h.length):r.cmode===6?p.vlogscale(this.buf,r.dbmin,10,h):r.cmode===7&&p.vlogscale(this.buf,r.dbmin,20,h);for(var s=h[0],c=h[0],_=0;_<h.length;_++)h[_]<s&&(s=h[_]),h[_]>c&&(c=h[_]);var g,P;if(r.autol===1)g=s,P=c;else if(r.autol>1){var U=1/Math.max(r.autol,1);g=r.zmin*U+s*(1-U),P=r.zmax*U+c*(1-U)}else if(r.autol<0){var U=1/Math.max(5,1);g=r.zmin*U+s*(1-U),P=r.zmax*U+c*(1-U)}if((r.autoz&1)!==0&&(r.zmin=g),(r.autoz&2)!==0&&(r.zmax=P),r.p_cuts){if(this.drawmode==="scrolling")for(var B=this.position*this.hcb.subsize,Z=B+this.hcb.subsize,oe=0,_=B;_<Z;_++)this.zbuf[_]=h[oe],oe++;if(this.drawmode==="falling"){var ae=(this.lps-1)*this.hcb.subsize,Ae=this.zbuf.slice(0,ae);this.zbuf=[];for(var _=0;_<this.hcb.subsize;_++)this.zbuf.push(h[_]);this.zbuf.push.apply(this.zbuf,Ae),Ae=[]}if(this.drawmode==="rising"){var ae=this.lps*this.hcb.subsize,Ae=this.zbuf.slice(this.hcb.subsize,ae);this.zbuf=[],this.zbuf.push.apply(this.zbuf,Ae);for(var _=0;_<this.hcb.subsize;_++)this.zbuf.push(h[_]);Ae=[]}}this.img&&(this.drawdirection!=="horizontal"?y.update_image_row(l,this.img,h,this.position,r.zmin,r.zmax,this.xcompression):y.update_image_col(l,this.img,h,this.position,r.zmin,r.zmax,this.xcompression)),this.frame+=1,this.drawmode==="scrolling"&&(this.position=(this.position+1)%this.lps),l.level===0&&(r.panymin=this.ymin,r.panymax=this.ymax,l.stk[0].ymin=this.ymin,l.stk[0].ymax=this.ymax)}},get_data:function(){var r=this.hcb;this.buf||(this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.lps*this.hcb.subsize))),this.hcb.pipe||p.grab(r,this.buf,0,r.subsize)},get_z:function(r,l){var t=Math.floor(r/this.hcb.xdelta),a=Math.floor(l/this.hcb.ydelta),h=a*this.hcb.subsize+t;return this.zbuf[h]},change_settings:function(r){var l=this.plot._Gx;if(r.subsize){this.hcb.subsize=r.subsize,this.hcb.ape=r.subsize,this.hcb.size=this.hcb.dview.length/(this.hcb.spa*this.hcb.ape),this.lps=Math.ceil(this.hcb.size);var t=this.hcb.ystart+this.hcb.ydelta*this.lps;this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,t),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,t)}if(r.cmode!==void 0&&(this.img=void 0,(l.autoz&1)!==0&&(l.zmin=void 0),(l.autoz&2)!==0&&(l.zmax=void 0)),(r.zmin!==void 0||r.zmax!==void 0||r.autoz!==void 0)&&(this.img=void 0),r.drawmode!==void 0&&(this.drawmode=r.drawmode),r.drawdirection!==void 0&&(this.drawdirection=r.drawdirection),(r.drawmode!==void 0||r.xmin!==void 0||r.xmax!==void 0||r.xdelta!==void 0||r.xstart!==void 0||r.drawdirection!==void 0)&&(this.position=0,this.frame=0,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.lps*this.hcb.subsize)),this.img=void 0,this.init_axes()),r.opacity!==void 0&&(this.opacity=r.opacity),r.p_cuts!==void 0){var a=l.p_cuts;r.p_cuts===null?a=!a:a=r.p_cuts,this.hcb.pipe&&(a?(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.lps*this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.hcb.subsize)))}r.xcmp!==void 0&&(r.xcmp==="smooth"?this.xcompression=0:r.xcmp==="avg"?this.xcompression=1:r.xcmp==="min"?this.xcompression=2:r.xcmp==="max"?this.xcompression=3:r.xcmp==="first"?this.xcompression=4:r.xcmp==="maxabs"?this.xcompression=5:this.xcompression=r.xcmp),r.name!==void 0&&(this.name=r.name),r.downscale!==void 0&&(this.downscale=r.downscale)},reload:function(r,l){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var t=this.hcb.dview.length!==r.length||l;if(l)for(var a in l)this.hcb[a]=l[a],(a==="xstart"||a==="xdelta"|a==="ystart"||a==="ydelta"||a==="subsize")&&(t=!0);Array.isArray(r)&&Array.isArray(r[0])&&(this.hcb.type=2e3,this.hcb.class=2,this.hcb.subsize=r[0].length,this.hcb.size=r.length,t=!0),this.hcb.setData(r),this.init(this.hcb),this.img=null,this.buf=null;var h=this.xmin,s=this.xmax;if(t){var c=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=Math.min(this.hcb.xstart,c),this.xmax=Math.max(this.hcb.xstart,c),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,h=void 0,s=void 0}return{xmin:h,xmax:s}},push:function(r,l,t){var a=this.plot._Gx,h=!1,s=null;if(l){l.timestamp&&(s=l.timestamp,delete l.timestamp),l.subsize&&l.subsize!==this.hcb.subsize&&(this.hcb.subsize=l.subsize,this.hcb.pipe&&!a.p_cuts?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.hcb.subsize),this.img=void 0):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new p.PointArray(this.lps*this.hcb.subsize),this.img=void 0),h=!0);for(var c in l)this.hcb[c]!==l[c]&&(this.hcb[c]=l[c],c==="type"&&(this.hcb.class=l[c]/1e3),h=!0);if(l.lps&&(this.lps=l.lps),h){var _=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=Math.min(this.hcb.xstart,_),this.xmax=Math.max(this.hcb.xstart,_),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta;var _=this.hcb.ystart+this.hcb.ydelta*this.lps;this.ymin=Math.min(this.hcb.ystart,_),this.ymax=Math.max(this.hcb.ystart,_)}}return(this.hcb.yunits===1||this.hcb.yunits===4)&&!this.hcb.timecode&&s&&(this.hcb.timecode=p.j1970toj1950(s),this.hcb.ystart=0,h=!0),r.length>0&&p.filad(this.hcb,r,t),h},get_pan_bounds:function(r){let l=this.prep();return l?{num:l.num,xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}:{num:0}},prep:function(r,l){var t=this.plot._Gx,a=this.plot._Mx,h=this.lps,s=this.skip,c=this.xmin,_=this.xmax,g,P,U=this.hcb.subsize;if(this.xcompression>0&&(this.drawdirection!=="horizontal"?U=Math.min(this.hcb.subsize,Math.ceil(a.r-a.l)):U=Math.min(this.hcb.subsize,Math.ceil(a.t-a.b))),this.get_data(),this.hcb.pipe)this.img||(t.zmin===void 0&&(t.zmin=0),t.zmax===void 0&&(t.zmax=0),this.img=y.create_image(a,null,this.hcb.subsize,U,this.lps,t.zmin+t.zoff,t.zmax+t.zoff,this.xcompression,this.drawdirection));else{if(!(t.cmode===5||this.xsub>0)){if(h>0){var B=this.xstart,Z=this.xdelta,oe=h;t.index?(g=0,P=h-1):Z>=0?(g=Math.max(1,Math.min(oe,Math.round((r-B)/Z)))-1,P=Math.max(1,Math.min(oe,Math.round((l-B)/Z)+2))-1):(g=Math.max(1,Math.min(oe,Math.round((l-B)/Z)-1))-1,P=Math.max(1,Math.min(oe,Math.round((r-B)/Z)+2))-1),h=P-g+1,h<0&&(p.log.debug("Nothing to plot"),h=0)}}if(h<=0){p.log.debug("Nothing to plot");return}if(!(t.cmode===5||this.ysub>0)){if(h>0){var ae=this.ystart,Ae=this.ydelta,oe=h;t.index?(g=0,P=h-1):Ae>=0?(g=Math.max(1,Math.min(oe,Math.round((r-ae)/Ae)))-1,P=Math.max(1,Math.min(oe,Math.round((l-ae)/Ae)+2))-1):(g=Math.max(1,Math.min(oe,Math.round((l-ae)/Ae)-1))-1,P=Math.max(1,Math.min(oe,Math.round((r-ae)/Ae)+2))-1),h=P-g+1,h<0&&(p.log.debug("Nothing to plot"),h=0)}}this.cx?t.cmode===1?p.cvmag(this.buf,this.zbuf,this.zbuf.length):t.cmode===2?t.plab===25?(p.cvpha(this.buf,this.zbuf,this.zbuf.length),p.vsmul(this.zbuf,1/(2*Math.PI),this.zbuf,this.zbuf.length)):t.plab!==24?p.cvpha(this.buf,this.zbuf,this.zbuf.length):p.cvphad(this.buf,this.zbuf,this.zbuf.length):t.cmode===3?p.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):t.cmode===4?p.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):t.cmode===5?p.vfill(this.zbuf,0,this.zbuf.length):t.cmode===6?p.cvmag2logscale(this.buf,t.dbmin,10,this.zbuf):t.cmode===7&&p.cvmag2logscale(this.buf,t.dbmin,20,this.zbuf):t.cmode===1?p.vabs(this.buf,this.zbuf):t.cmode===2?p.vfill(this.zbuf,0,this.zbuf.length):t.cmode===3?p.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):t.cmode===4?p.vfill(this.zbuf,0,this.zbuf.length):t.cmode===5?p.vfill(this.zbuf,0,this.zbuf.length):t.cmode===6?p.vlogscale(this.buf,t.dbmin,10,this.zbuf):t.cmode===7&&p.vlogscale(this.buf,t.dbmin,20,this.zbuf);var ue=this.zbuf,be=0,Ee=0;if(t.autol<=0||this.hcb.pipe){if(ue.length>0){be=ue[0],Ee=ue[0];for(var Me=0;Me<ue.length&&!(Me/this.xframe>=this.lpb);Me++)ue[Me]<be&&(be=ue[Me]),ue[Me]>Ee&&(Ee=ue[Me])}(t.autoz&1)!==0&&(t.zmin!==void 0?t.zmin=Math.min(t.zmin,be):t.zmin=be),(t.autoz&2)!==0&&(t.zmax!==void 0?t.zmax=Math.min(t.zmax,Ee):t.zmax=Ee),this.img=y.create_image(a,this.zbuf,this.hcb.subsize,U,this.lps,t.zmin+t.zoff,t.zmax+t.zoff,this.xcompression,this.drawdirection)}else{var Be=this.hcb.size,ve=1/Math.max(t.autol,1);if(this.img||(this.img=y.create_image(a,this.zbuf,this.hcb.subsize,U,this.lps,t.zmin+t.zoff,t.zmax+t.zoff,this.drawdirection)),t.zmin=0,t.zmax=0,ue.length>0)for(var Ke=0;Ke<Be;Ke++){for(var Ie=Ke*this.xframe,be=ue[Ie],Ee=ue[Ie],Me=0;Me<this.xframe;Me++)be=Math.min(ue[Ie+Me],be),Ee=Math.max(ue[Ie+Me],Ee);t.autoz!==2&&be!==void 0&&(t.zmin=be*ve+t.zmin*(1-ve)),t.autoz!==1&&Ee!==void 0&&(t.zmax=Ee*ve+t.zmax*(1-ve)),y.update_image_row(a,this.img,ue.subarray(Ie,Ie+this.xframe),Ke,t.zmin,t.zmax)}}}if(this.img.cmode=t.cmode,this.img.cmap=t.cmap,this.img.origin=a.origin,this.hcb.pipe&&this.frame<this.lps){var Je=new Uint32Array(this.img);if(this.drawdirection!=="horizontal")if(this.drawmode==="rising")for(var Me=0;Me<Je.length-this.frame*U;Me++)Je[Me]=0;else for(var Me=this.frame*U;Me<Je.length;Me++)Je[Me]=0;else for(var Ze=this.frame;Ze<this.lps;Ze++)for(var Me=0;Me<this.img.height;Me++)Je[Me*this.img.width+Ze]=0}return{num:h,panxmin:this.xmin,panxmax:this.xmax,panymin:this.ymin,panymax:this.ymax}},xCutData:function(r,l){var t=this.plot._Gx,a=this.plot._Mx,h=this.lps,s=this.xframe,c;if(this.hcb.pipe&&!t.p_cuts)return null;var _;if(this.drawdirection!=="horizontal"){var g;if(this.hcb.pipe?g=Math.floor(h*(a.ypos-a.t)/(a.b-a.t)):g=Math.floor((r-this.ystart)/this.ydelta),g<0||g>this.lps)return null;var P=g*s,U=P+s;l||this.hcb.pipe?_=this.zbuf.slice(P,U):_=this.buf.slice(P,U)}else{_=[];var B=Math.round((r-this.ystart)/this.ydelta);for(c=B;c<s*h;c+=s)l||this.hcb.pipe?_.push(this.zbuf[c]):_.push(this.buf[c])}return _},xCut:function(r){var l=this.plot._Mx,t=this.plot._Gx;if(r!==void 0){this.cut_stash={},this.cut_stash.ylabel=t.ylabel,this.cut_stash.xlabel=t.xlabel,this.cut_stash.level=l.level,this.cut_stash.stk=JSON.parse(JSON.stringify(l.stk)),this.cut_stash.panymin=t.panymin,this.cut_stash.panymax=t.panymax,this.cut_stash.panxmin=t.panxmin,this.cut_stash.panxmax=t.panxmax;var a=this.xCutData(r);if(!a)return;this.old_drawmode=this.drawmode,this.old_autol=t.autol,this.plot.change_settings({drawmode:"undefined",autol:-1});var h=t.lyr.length>0&&this.cx;t.cmode===1?t.ylabel=p.UNITS[28][0]:t.cmode===2?t.ylabel=t.plab:t.cmode===3&&h?t.ylabel=p.UNITS[21][0]:t.cmode===4||t.cmode===5?t.ylabel=p.UNITS[22][0]:t.cmode===6?t.ylabel=p.UNITS[26][0]:t.cmode===7?t.ylabel=p.UNITS[27][0]:t.ylabel="Intensity",p.UNITS[t.xlab][0]!=="None"&&p.UNITS[t.xlab][0]!=="Unknown"?t.xlabel=p.UNITS[t.xlab][0]:t.xlabel="Frequency",t.xlabel+="    CURRENTLY IN X_CUT MODE",l.origin=1,this.xcut_layer=this.plot.overlay_array(a,{xstart:this.xstart,xdelta:this.xdelta},{name:"x_cut_data",line:3});for(var s=this.plot.get_lyrn(this.xcut_layer),c=0;c<t.lyr.length;c++)c!==s&&(t.lyr[c].display=!t.lyr[c].display);t.x_cut_press_on=!0;var _=p.vmxmn(a,this.xframe),g=_.smax,P=_.smin,U=g-P;U<0&&(g=P,P=g+U,U=-U),U<=1e-20?(P=P-1,g=g+1):(P=P-.02*U,g=g+.02*U),t.panymin=_.smin,t.panymax=_.smax;for(var B=1;B<l.level+1;B++)l.stk[B].ymin=P,l.stk[B].ymax=g,l.stk[B].yscl=(l.stk[B].ymax-l.stk[B].ymin)/(l.b-l.t);this.plot.rescale()}else if(t.x_cut_press_on){t.x_cut_press_on=!1;for(var B=0;B<t.lyr.length;B++)B!==this.xcut_layer&&(t.lyr[B].display=!t.lyr[B].display),this.plot.deoverlay(this.xcut_layer),t.xlabel=this.cut_stash.xlabel,t.ylabel=this.cut_stash.ylabel,l.level=this.cut_stash.level,l.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),t.panymin=this.cut_stash.panymin,t.panymax=this.cut_stash.panymax,t.panxmin=this.cut_stash.panxmin,t.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,this.plot.rescale(),this.plot.refresh(),this.xcut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})}},yCutData:function(r,l){var t=this.plot._Gx,a=this.plot._Mx,h=this.lps,s=this.xframe,c=0;if(this.hcb.pipe&&!t.p_cuts)return null;var _;if(this.drawdirection!=="horizontal"){_=[];var g;if(!this.hcb.pipe||l)if(g=Math.floor((r-this.xstart)/this.xdelta),l)for(c=g;c<s*h;c+=s)_.push(this.zbuf[c]);else for(c=g;c<s*h;c+=s)_.push(this.buf[c]);else for(g=Math.floor(s*(a.xpos-a.l)/(a.r-a.l)),c=g;c<s*h;c+=s)_.push(this.zbuf[c])}else{var P=Math.round((r-this.xstart)/this.xdelta);if(P<0||P>this.lps)return;var U=P*s,B=U+s;!this.hcb.pipe||l?_=this.zbuf.slice(U,B):_=this.buf.slice(U,B)}return _},yCut:function(r){var l=this.plot._Mx,t=this.plot._Gx;if(r!==void 0){this.cut_stash={},this.cut_stash.xlabel=t.xlabel,this.cut_stash.ylabel=t.ylabel,this.cut_stash.level=l.level,this.cut_stash.stk=JSON.parse(JSON.stringify(l.stk)),this.cut_stash.ymax=l.stk[l.level].ymax,this.cut_stash.panymin=t.panymin,this.cut_stash.panymax=t.panymax,this.cut_stash.panxmin=t.panxmin,this.cut_stash.panxmax=t.panxmax;var a=this.yCutData(r);this.old_drawmode=this.drawmode,this.old_autol=t.autol,this.plot.change_settings({drawmode:"undefined",autol:-1});var h=t.lyr.length>0&&this.cx;t.cmode===1?t.ylabel=p.UNITS[28][0]:t.cmode===2?t.ylabel=t.plab:t.cmode===3&&h?t.ylabel=p.UNITS[21][0]:t.cmode===4||t.cmode===5?t.ylabel=p.UNITS[22][0]:t.cmode===6?t.ylabel=p.UNITS[26][0]:t.cmode===7?t.ylabel=p.UNITS[27][0]:t.ylabel="Intensity",p.UNITS[t.ylab][0]!=="None"&&p.UNITS[t.ylab][0]!=="Unknown"?t.xlabel=p.UNITS[t.ylab][0]:t.xlabel="Time",t.xlabel+="    CURRENTLY IN Y_CUT MODE",l.origin=1,this.ycut_layer=this.plot.overlay_array(a,{xstart:this.ystart,xdelta:this.ydelta},{name:"y_cut_data",line:3});for(var s=this.plot.get_lyrn(this.ycut_layer),c=0;c<t.lyr.length;c++)c!==s&&(t.lyr[c].display=!t.lyr[c].display);t.y_cut_press_on=!0;var _=p.vmxmn(a,this.lps),g=_.smax,P=_.smin,U=g-P;U<0&&(g=P,P=g+U,U=-U),U<=1e-20?(P=P-1,g=g+1):(P=P-.02*U,g=g+.02*U),t.panymin=_.smin,t.panymax=_.smax;for(var B=1;B<l.level+1;B++)l.stk[B].xmin=l.stk[B].ymin,l.stk[B].xmax=l.stk[B].ymax,l.stk[B].xscl=(l.stk[B].xmax-l.stk[B].xmin)/(l.r-l.t),l.stk[B].ymin=P,l.stk[B].ymax=g,l.stk[B].yscl=(l.stk[B].ymax-l.stk[B].ymin)/(l.b-l.t);this.plot.rescale()}else if(t.y_cut_press_on){t.y_cut_press_on=!1;for(var Z=0;Z<t.lyr.length;Z++)Z!==this.ycut_layer&&(t.lyr[Z].display=!t.lyr[Z].display),this.plot.deoverlay(this.ycut_layer),t.xlabel=this.cut_stash.xlabel,t.ylabel=this.cut_stash.ylabel,l.level=this.cut_stash.level,l.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),t.panymin=this.cut_stash.panymin,t.panymax=this.cut_stash.panymax,t.panxmin=this.cut_stash.panxmin,t.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,this.plot.rescale(),this.plot.refresh(),this.ycut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})}},draw:function(){var r=this.plot._Mx,l=this.plot._Gx,t=this.hcb;if(this.hcb.pipe&&this.img){var a;if(this.drawdirection!=="horizontal"?a=this.hcb.lps||Math.ceil(Math.max(1,r.b-r.t)):a=this.lps,a!==this.lps&&this.buf){var h=a-this.lps;if(this.lps=a,this.position>=this.lps&&(this.position=0),this.drawmode==="scrolling"){if(this.drawdirection!=="horizontal"){var s=t.ystart+t.ydelta*this.lps;this.ymin=Math.min(t.ystart,s),this.ymax=Math.max(t.ystart,s),this.img=y.resize_image_height(r,this.img,this.lps)}}else this.drawmode==="falling"?(this.ymax=this.ymin+t.ydelta*this.lps,this.img=y.resize_image_height(r,this.img,this.lps)):this.drawmode==="rising"&&(this.ymin=this.ymax-t.ydelta*this.lps,h>0?(this.img=y.resize_image_height(r,this.img,this.lps),y.shift_image_rows(r,this.img,h,!0)):(y.shift_image_rows(r,this.img,h,!0),this.img=y.resize_image_height(r,this.img,this.lps)));this.plot.rescale()}}var c=Math.max(this.xmin,r.stk[r.level].xmin),_=Math.min(this.xmax,r.stk[r.level].xmax);if(c>=_){l.panxmin=Math.min(l.panxmin,this.xmin),l.panxmax=Math.max(l.panxmax,this.xmax);return}var g=Math.max(this.ymin,r.stk[r.level].ymin),P=Math.min(this.ymax,r.stk[r.level].ymax),U=Math.abs(_-c)+1,B=Math.abs(P-g)+1;U=Math.floor(U/t.xdelta),B=Math.floor(B/t.ydelta),U=Math.min(U,t.subsize),B=Math.min(B,t.size);var Z=y.real_to_pixel(r,c,g),oe=y.real_to_pixel(r,_,P),ae=oe.x-Z.x,Ae=oe.y-Z.y,ue=ae/U,be=Ae/B;if(l.xe=Math.max(1,Math.round(ue)),l.ye=Math.max(1,Math.round(be)),(!this.img||!this.buf||l.cmode!==this.img.cmode||r.origin!==this.img.origin)&&this.prep(c,_),this.img&&y.draw_image(r,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,l.rasterSmoothing,this.downscale),this.position!==null&&this.drawmode==="scrolling"){var Ee;this.drawdirection!=="horizontal"?(Ee=y.real_to_pixel(r,0,this.position*this.ydelta),Ee.y>r.t&&Ee.y<r.b&&y.draw_line(r,"white",r.l,Ee.y,r.r,Ee.y)):(Ee=y.real_to_pixel(r,this.position*this.xdelta,0),Ee.x>r.l&&Ee.x<r.r&&y.draw_line(r,"white",Ee.x,r.t,Ee.x,r.b))}}},u.overlay=function(r,l,t){var a=r._Gx,h=r._Mx;l.buf_type="D",l.ystart||(l.ystart=0),l.ydelta||(l.ydelta=1);var s=new u(r);s.init(l),l.file_name?s.name=p.trim_name(l.file_name):s.name="layer_"+a.lyr.length,s.change_settings(t);var c=[];return r.add_layer(s)&&c.push(s),c},rn.exports=u})()});var on=$e((As,sn)=>{function at(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}sn.exports=at;at.EventEmitter=at;at.prototype._events=void 0;at.prototype._maxListeners=void 0;at.defaultMaxListeners=10;at.prototype.setMaxListeners=function(p){if(!Qa(p)||p<0||isNaN(p))throw TypeError("n must be a positive number");return this._maxListeners=p,this};at.prototype.emit=function(p){var y,u,r,l,t,a;if(this._events||(this._events={}),p==="error"&&(!this._events.error||qt(this._events.error)&&!this._events.error.length)){if(y=arguments[1],y instanceof Error)throw y;var h=new Error('Uncaught, unspecified "error" event. ('+y+")");throw h.context=y,h}if(u=this._events[p],an(u))return!1;if(Et(u))switch(arguments.length){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),u.apply(this,l)}else if(qt(u))for(l=Array.prototype.slice.call(arguments,1),a=u.slice(),r=a.length,t=0;t<r;t++)a[t].apply(this,l);return!0};at.prototype.addListener=function(p,y){var u;if(!Et(y))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",p,Et(y.listener)?y.listener:y),this._events[p]?qt(this._events[p])?this._events[p].push(y):this._events[p]=[this._events[p],y]:this._events[p]=y,qt(this._events[p])&&!this._events[p].warned&&(an(this._maxListeners)?u=at.defaultMaxListeners:u=this._maxListeners,u&&u>0&&this._events[p].length>u&&(this._events[p].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[p].length),typeof console.trace=="function"&&console.trace())),this};at.prototype.on=at.prototype.addListener;at.prototype.once=function(p,y){if(!Et(y))throw TypeError("listener must be a function");var u=!1;function r(){this.removeListener(p,r),u||(u=!0,y.apply(this,arguments))}return r.listener=y,this.on(p,r),this};at.prototype.removeListener=function(p,y){var u,r,l,t;if(!Et(y))throw TypeError("listener must be a function");if(!this._events||!this._events[p])return this;if(u=this._events[p],l=u.length,r=-1,u===y||Et(u.listener)&&u.listener===y)delete this._events[p],this._events.removeListener&&this.emit("removeListener",p,y);else if(qt(u)){for(t=l;t-- >0;)if(u[t]===y||u[t].listener&&u[t].listener===y){r=t;break}if(r<0)return this;u.length===1?(u.length=0,delete this._events[p]):u.splice(r,1),this._events.removeListener&&this.emit("removeListener",p,y)}return this};at.prototype.removeAllListeners=function(p){var y,u;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[p]&&delete this._events[p],this;if(arguments.length===0){for(y in this._events)y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events={},this}if(u=this._events[p],Et(u))this.removeListener(p,u);else if(u)for(;u.length;)this.removeListener(p,u[u.length-1]);return delete this._events[p],this};at.prototype.listeners=function(p){var y;return!this._events||!this._events[p]?y=[]:Et(this._events[p])?y=[this._events[p]]:y=this._events[p].slice(),y};at.prototype.listenerCount=function(p){if(this._events){var y=this._events[p];if(Et(y))return 1;if(y)return y.length}return 0};at.listenerCount=function(p,y){return p.listenerCount(y)};function Et(p){return typeof p=="function"}function Qa(p){return typeof p=="number"}function qt(p){return typeof p=="object"&&p!==null}function an(p){return p===void 0}});var ln=$e((Ls,Ri)=>{typeof Object.create=="function"?Ri.exports=function(y,u){u&&(y.super_=u,y.prototype=Object.create(u.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}))}:Ri.exports=function(y,u){if(u){y.super_=u;var r=function(){};r.prototype=u.prototype,y.prototype=new r,y.prototype.constructor=y}}});var Di=$e((Cs,fn)=>{var hn=on(),es=ln();fn.exports=ct;function ct(p){if(!(this instanceof ct))return new ct(p);typeof p=="number"&&(p={max:p}),p||(p={}),hn.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=p.max||1e3,this.maxAge=p.maxAge||0}es(ct,hn.EventEmitter);Object.defineProperty(ct.prototype,"keys",{get:function(){return Object.keys(this.cache)}});ct.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};ct.prototype.remove=function(p){if(typeof p!="string"&&(p=""+p),!!this.cache.hasOwnProperty(p)){var y=this.cache[p];return delete this.cache[p],this._unlink(p,y.prev,y.next),y.value}};ct.prototype._unlink=function(p,y,u){this.length--,this.length===0?this.head=this.tail=null:this.head===p?(this.head=y,this.cache[this.head].next=null):this.tail===p?(this.tail=u,this.cache[this.tail].prev=null):(this.cache[y].next=u,this.cache[u].prev=y)};ct.prototype.peek=function(p){if(!!this.cache.hasOwnProperty(p)){var y=this.cache[p];if(!!this._checkAge(p,y))return y.value}};ct.prototype.set=function(p,y){typeof p!="string"&&(p=""+p);var u;if(this.cache.hasOwnProperty(p)){if(u=this.cache[p],u.value=y,this.maxAge&&(u.modified=Date.now()),p===this.head)return y;this._unlink(p,u.prev,u.next)}else u={value:y,modified:0,next:null,prev:null},this.maxAge&&(u.modified=Date.now()),this.cache[p]=u,this.length===this.max&&this.evict();return this.length++,u.next=null,u.prev=this.head,this.head&&(this.cache[this.head].next=p),this.head=p,this.tail||(this.tail=p),y};ct.prototype._checkAge=function(p,y){return this.maxAge&&Date.now()-y.modified>this.maxAge?(this.remove(p),this.emit("evict",{key:p,value:y.value}),!1):!0};ct.prototype.get=function(p){if(typeof p!="string"&&(p=""+p),!!this.cache.hasOwnProperty(p)){var y=this.cache[p];if(!!this._checkAge(p,y))return this.head!==p&&(p===this.tail?(this.tail=y.next,this.cache[this.tail].prev=null):this.cache[y.prev].next=y.next,this.cache[y.next].prev=y.prev,this.cache[this.head].next=p,y.prev=this.head,y.next=null,this.head=p),y.value}};ct.prototype.evict=function(){if(!!this.tail){var p=this.tail,y=this.remove(this.tail);this.emit("evict",{key:p,value:y})}}});var cn=$e((zs,un)=>{(function(){var p=pt(),y=mt(),u=vt(),r=Di(),l=function(a){this.plot=a,this.options={},this.size=0,this.color=0,this.line=3,this.thick=1,this.opacity=1,this.fillStyle=null,this.symbol=0,this.radius=3,this.display=!0,this.xptr=null,this.yptr=null,this.xpoint=null,this.ypoint=null,this.server_data=null,this.ymax=-1,this.ymin=0,this.localpanymin=0,this.localpanymax=-1,this.xmax=-1,this.xmin=0,this.localpanxmin=0,this.localpanxmax=-1,this.xlab=0,this.ylab=0,this.mode="lds",this.xypos_index=0,this.y_value_change=!1,this.pendingurl=""};l.prototype={init:function(a,h){var s=this.plot._Gx,c=this.plot._Mx;this.hcb=a,this.hcb.buf_type="I",a.file_type===2e3?(p.force1000(a),this.size=a.subsize):this.size=a.size,this.mode==="lds"||this.mode==="xcut"?(this.xmin=this.hcb.xstart,this.xmax=this.hcb.xstart+this.hcb.xdelta*this.size):this.mode==="ycut"&&(this.xmin=this.hcb.ystart,a.file_type===2e3?this.xmax=this.hcb.ystart+this.hcb.ydelta*this.hcb.size:this.xmax=this.hcb.ystart+this.hcb.ydelta*(this.hcb.size/this.hcb.subsize)),this.set_pan_values(),this.cache=new r(20),this.debounceSend=u.debounce(function(_){_.send(null)},100,!1)},get_data:function(){},change_settings:function(a){var h=this.plot._Gx;a.cmode!==void 0&&((h.autoz&1)!==0&&(this.ymin=0,this.localpanymin=0),(h.autoz&2)!==0&&(this.ymax=-1,this.localpanymax=-1))},reload:function(a,h){},push:function(a,h,s){},set_pan_values(){this.localpanxmin>this.localpanxmax?(this.localpanxmin=this.xmin,this.localpanxmax=this.xmax):(this.localpanxmin=Math.min(this.localpanxmin,this.xmin),this.localpanxmax=Math.max(this.localpanxmax,this.xmax)),this.localpanymin>this.localpanymax?(this.localpanymin=this.ymin,this.localpanymax=this.ymax):(this.localpanymin=Math.min(this.localpanymin,this.ymin),this.localpanymax=Math.max(this.localpanymax,this.ymax))},prep:function(a,h){},make_request_url:function(a,h,s,c,_,g){var P=this.plot._Gx,U=this.plot._Mx,Z,B=this.hcb.url.split("/sds/hdr/"),Z="";if(this.mode==="lds"?Z=B[0]+"/sds/lds/"+a+"/"+s+"/"+Math.round(U.r-U.l)+"/"+Math.round(U.b-U.t)+"/"+B[1]:this.mode==="xcut"?Z=B[0]+"/sds/rdsxcut/"+a+"/"+this.xypos_index+"/"+s+"/"+Math.round(this.xypos_index+1)+"/"+Math.round(U.r-U.l)+"/"+Math.round(U.b-U.t)+"/"+B[1]:this.mode==="ycut"&&(Z=B[0]+"/sds/rdsycut/"+this.xypos_index+"/"+h+"/"+Math.round(this.xypos_index+1)+"/"+c+"/"+Math.round(U.r-U.l)+"/"+Math.round(U.b-U.t)+"/"+B[1]),_!==void 0&&(Z.includes("?")?Z=Z+"&zmin="+_:Z=Z+"?zmin="+_),g!==void 0&&(Z.includes("?")?Z=Z+"&zmax="+g:Z=Z+"?zmax="+g),P.cmode!==void 0){var oe=["Ma","Ph","Re","Im","IR","Lo","L2"];Z.includes("?")?Z=Z+"&cxmode="+oe[P.cmode-1]:Z=Z+"?cxmode="+oe[P.cmode-1]}return Z},send_request_to_server:function(a){if(this.pendingurl!==a){var h;h=new XMLHttpRequest,h.open("GET",a,!0),h.responseType="arraybuffer",h.overrideMimeType("text/plain; charset=x-user-defined");var s=this;h.onload=function(c){s.load_data_from_server(a,this,c)},h.onerror=function(c){},this.debounceSend(h),this.pendingurl=a}},load_data_from_server:function(a,h,s){var c=this.plot._Mx;if(h.readyState===4&&(h.status===200||h.status===0)){var c=this.plot._Mx,_=this.plot._Gx,g=null;h.response&&(g=h.response),this.server_data=new Int16Array(g);var P=parseFloat(h.getResponseHeader("Zmin")),U=parseFloat(h.getResponseHeader("Zmax"));this.ymin=P,this.ymax=U,this.set_pan_values(),g.zmin=this.ymin,g.zmax=this.ymax,this.cache.set(a,g),this.plot.refresh()}},process_plot_data:function(){var a=this.plot._Gx,h=this.plot._Mx,s=this.server_data.length/2;this.xptr=new ArrayBuffer(s*2),this.yptr=new ArrayBuffer(s*2),this.xpoint=new Int16Array(this.xptr),this.ypoint=new Int16Array(this.yptr),p.vmov(this.server_data,1,this.xpoint,1,s),p.vmov(this.server_data.subarray(s),1,this.ypoint,1,s);var c={};this.fillStyle?c.fillStyle=this.fillStyle:a.fillStyle&&(c.fillStyle=a.fillStyle),this.options&&(c.highlight=this.options.highlight,c.noclip=this.options.noclip);var _=0;this.line===0?_=0:(_=1,this.thick>0?_=this.thick:this.thick<0&&(_=Math.abs(this.thick),c.dashed=!0),this.line===1&&(c.vertsym=!0),this.line===2&&(c.horzsym=!0),this.line===4&&(c.horzsym=!0,c.vertsym=!0)),c.pixels=!0,y.trace(h,this.color,this.xpoint,this.ypoint,this.xpoint.length,0,1,_,this.symbol,this.radius,c)},get_pan_bounds:function(a){var h=this.get_data_from_cache();h.plotData&&(this.ymin=h.plotData.zmin,this.ymax=h.plotData.zmax,this.set_pan_values());var s,c,_,g;return this.localpanxmin<this.localpanxmax&&(s=this.localpanxmin,c=this.localpanxmax),this.localpanymin<this.localpanymax&&(_=this.localpanymin,g=this.localpanymax),{xmin:s,xmax:c,ymin:_,ymax:g}},get_data_from_cache(){var a=this.plot._Mx,h=Math.round((a.stk[a.level].xmin-this.xmin)/this.hcb.xdelta),s=Math.round((a.stk[a.level].xmax-this.xmin)/this.hcb.xdelta),c=Math.round((a.stk[a.level].xmin-this.xmin)/this.hcb.ydelta),_=Math.round((a.stk[a.level].xmax-this.xmin)/this.hcb.ydelta),g,P;a.stk[a.level].ymin<a.stk[a.level].ymax&&(g=a.stk[a.level].ymin,P=a.stk[a.level].ymax);var U;U=this.make_request_url(h,c,s,_,g,P);var B=this.cache.get(U);if(!B){var Z=this.make_request_url(h,c,s,_,void 0,void 0),B=this.cache.get(Z);B&&(B.zmin!==g||B.zmax!==P)&&(B=void 0)}return{url:U,plotData:B}},draw:function(){var a=this.get_data_from_cache();if(a.plotData)return this.server_data=new Int16Array(a.plotData),this.ymin=a.plotData.zmin,this.ymax=a.plotData.zmax,this.set_pan_values(),this.process_plot_data(),{xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax};this.send_request_to_server(a.url)}};var t=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];l.overlay=function(a,h,s){var c=a._Gx,_=a._Mx;h.class===2&&p.force1000(h),h.buf_type="I";var g=s.name;delete s.name;var P=[],U=new l(a),B=c.lyr.length%t.length;U.color=y.getcolor(_,p.Mc.colormap[3].colors,t[B]),g!==void 0?U.name=g:h.file_name?U.name=p.trim_name(h.file_name):U.name="layer_"+c.lyr.length,U.offset=0;for(var Z in s)U[Z]!==void 0&&(U[Z]=s[Z]);return U.init(h,s),a.add_layer(U)&&P.push(U),P},un.exports=l})()});var pn=$e((Ts,dn)=>{(function(){let p=pt(),y=mt(),u=vt(),r={1:1,2:2,4:3,8:4,16:5,32:6,64:7,128:8,256:9,512:10},l=[512,256,128,64,32,16,8,4,2,1],t=function(a){this.plot=a,this.offset=0,this.xstart=0,this.xdelta=0,this.ystart=0,this.ydelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.preferred_origin=4,this.opacity=1,this.xcompression=a._Gx.xcompression,this.lpb=void 0,this.yc=1,this.options={},this.pendingURLs={}};t.prototype={init:function(a){this.debounceSend=u.debounce(function(s){s.send(null)},100,!1),this.hcb=a,this.hcb.buf_type="D",a.file_type===1e3?this.lps=this.hcb.lps||Math.ceil(a.size/a.subsize):this.lps=this.hcb.lps||Math.ceil(a.size),this.hcb.class=2;let h=Di();this.cache=new h(500),this.init_axes()},init_axes:function(){if(this.plot._Gx.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.ystart=1,this.ydelta=1,this.ymin=1,this.hcb.file_type===1e3?this.ymax=this.hcb.size/this.hcb.subsize:this.drawdirection!=="horizontal"?(this.xmax=this.hcb.subsize,this.ymax=this.size):(this.xmax=this.size,this.ymax=this.hcb.subsize);else{let h;this.drawdirection!=="horizontal"?(this.xstart=this.hcb.xstart,this.xdelta=this.hcb.xdelta,h=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize,this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,h),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,h),this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,h=this.hcb.ystart+this.hcb.ydelta*this.lps,this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,h),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,h)):(this.ystart=this.hcb.xstart,this.ydelta=this.hcb.xdelta,h=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize,this.ymin=this.hcb.xmin||Math.min(this.hcb.xstart,h),this.ymax=this.hcb.xmax||Math.max(this.hcb.xstart,h),this.xstart=this.hcb.ystart,this.xdelta=this.hcb.ydelta,h=this.hcb.ystart+this.hcb.ydelta*this.lps,this.xmin=this.hcb.ymin||Math.min(this.hcb.ystart,h),this.xmax=this.hcb.ymax||Math.max(this.hcb.ystart,h))}this.xframe=this.hcb.subsize,this.yframe=this.lps*this.hcb.subsize/this.xframe,this.lpb===0&&(this.lpb=this.yframe),(!this.lpb||this.lpb<=0)&&(this.lpb=16),this.lpb=Math.max(1,this.lpb/this.yc)*this.yc,this.drawdirection!=="horizontal"?(this.xlab=this.hcb.xunits,this.ylab=this.hcb.yunits):(this.xlab=this.hcb.yunits,this.ylab=this.hcb.xunits),this.drawdirection==="horizontal"?(this.plot._Mx.origin=1,this.preferred_origin=1):(this.plot._Mx.origin=4,this.preferred_origin=4)},get_data:function(){},get_z:function(a,h){},change_settings:function(a){let h=this.plot._Gx;if(a.subsize){this.hcb.subsize=a.subsize,this.hcb.ape=a.subsize,this.hcb.file_type===1e3?this.lps=Math.ceil(this.hcb.size/this.hcb.subsize):this.lps=Math.ceil(this.hcb.size);let s=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,s),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,s),s=this.hcb.ystart+this.hcb.ydelta*this.lps,this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,s),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,s)}a.debug&&(this.debug=a.debug),a.cmode!==void 0&&(this.img=void 0,(h.autoz&1)!==0&&(h.zmin=void 0),(h.autoz&2)!==0&&(h.zmax=void 0)),a.drawdirection!==void 0&&(this.drawdirection=a.drawdirection),a.origin!==void 0&&(this.plot._Mx.origin=a.origin,this.preferred_origin=a.origin),this.drawdirection==="horizontal"&&(this.plot._Mx.origin=1,this.preferred_origin=1,this.init_axes()),a.xcmp!==void 0&&(a.xcmp==="smooth"?this.xcompression=0:a.xcmp==="avg"?this.xcompression=1:a.xcmp==="min"?this.xcompression=2:a.xcmp==="max"?this.xcompression=3:a.xcmp==="first"?this.xcompression=4:a.xcmp==="maxabs"?this.xcompression=5:this.xcompression=a.xcmp),a.usetiles!==void 0&&(this.usetiles=a.usetiles),a.opacity!==void 0&&(this.opacity=a.opacity)},reload:function(a,h){},prep:function(a,h){return this.lps},get_pan_bounds:function(a){let h,s,c,_;return this.xmin<this.xmax&&(h=this.xmin,s=this.xmax),this.ymin<this.ymax&&(c=this.ymin,_=this.ymax),{xmin:h,xmax:s,ymin:c,ymax:_}},load_tile:function(a,h,s){if(h.readyState===4&&(h.status===200||h.status===0)){let c=null;h.response&&(c=h.response);let _=parseFloat(h.getResponseHeader("Xmin")),g=parseFloat(h.getResponseHeader("Xmax")),P=parseFloat(h.getResponseHeader("Ymin")),U=parseFloat(h.getResponseHeader("Ymax"));c.width=h.getResponseHeader("Outxsize"),c.height=h.getResponseHeader("Outysize"),c.contents="rgba",c.xmin=_,c.ymin=P,c.xmax=g,c.ymax=U,this.cache.set(a,c),delete this.pendingURLs[a],this.plot.refresh()}},make_tile_request_url:function(a,h,s,c,_,g){let P=this.plot._Gx,U=["Ma","Ph","Re","Im","IR","Lo","L2"],B=["first","mean","min","max","first","absmax"],Z=this.hcb.url.split("/sds/hdr/"),oe=Z[0]+"/sds/rdstile/"+a+"/"+h+"/"+s+"/"+c+"/"+_+"/"+g+"/"+Z[1]+"?outfmt=RGBA&colormap="+p.Mc.colormap[P.cmap].name+"&subsize="+this.hcb.subsize;return P.zmin!==void 0&&(oe=oe+"&zmin="+P.zmin),P.zmax!==void 0&&(oe=oe+"&zmax="+P.zmax),P.cmode!==void 0&&(oe=oe+"&cxmode="+U[P.cmode-1]),this.xcompression!==void 0&&(oe=oe+"&transform="+B[this.xcompression]),oe},sendTileRequest:function(a){if(this.pendingURLs[a])return;let h=new XMLHttpRequest;this.pendingURLs[a]=h,h.open("GET",a,!0),h.responseType="arraybuffer",h.overrideMimeType("text/plain; charset=x-user-defined");let s=this;h.onload=function(c){s.load_tile(a,this,c)},h.onerror=function(c){},h.send(null)},draw:function(){let a=this.plot._Mx,h=this.plot._Gx,s=this.hcb,c,_,g,P;if(this.drawdirection!=="horizontal"){if(c=Math.max(this.xmin,a.stk[a.level].xmin),_=Math.min(this.xmax,a.stk[a.level].xmax),c>=_)return;g=Math.max(this.ymin,a.stk[a.level].ymin),P=Math.min(this.ymax,a.stk[a.level].ymax)}else{if(c=Math.max(this.ymin,a.stk[a.level].ymin),_=Math.min(this.ymax,a.stk[a.level].ymax),c>=_)return;g=Math.max(this.xmin,a.stk[a.level].xmin),P=Math.min(this.xmax,a.stk[a.level].xmax)}let U,B;this.drawmode!=="horizontal"?(U=Math.abs(_-c),B=Math.abs(P-g)):(U=Math.abs(P-g),B=Math.abs(_-c)),U=Math.ceil(U/s.xdelta),B=Math.ceil(B/s.ydelta),U=Math.min(U,s.subsize),s.file_type===1e3?B=Math.min(B,s.size/s.subsize):B=Math.min(B,s.size);let Z,oe,ae,Ae;this.drawdirection!=="horizontal"?(Z=y.real_to_pixel(a,c,g),oe=y.real_to_pixel(a,_,P),ae=Math.abs(oe.x-Z.x),Ae=Math.abs(oe.y-Z.y)):(oe=y.real_to_pixel(a,g,c),Z=y.real_to_pixel(a,P,_),Ae=Math.abs(oe.x-Z.x),ae=Math.abs(oe.y-Z.y));let ue=Math.floor((c-s.xstart)/s.xdelta),be=Math.floor((g-s.ystart)/s.ydelta),Ee=ue+U,Me=be+B,Be=this.drawdirection==="horizontal"?-Math.PI/2:null;if(this.usetiles){let ve=Math.min(Math.max(Math.ceil(ae/300)*100,100),500),Ke=Math.min(Math.max(Math.ceil(Ae/300)*100,100),500),Ie=Math.max(1,U/ae),Je=Math.max(1,B/Ae),Ze=0;for(;l[Ze]>Ie;)Ze++;let et=l[Ze];for(Ze=0;l[Ze]>Je;)Ze++;let tt=l[Ze],it=r[et],n=r[tt],o=ve*et,m=Ke*tt,S=Math.ceil(s.subsize/o),C=Math.ceil(s.size/m),v=Math.max(0,Math.floor(ue/o)),k=Math.max(0,Math.floor(be/m)),A=Math.min(S,Math.ceil(Ee/o)+1),z=Math.min(C,Math.ceil(Me/m)+1);for(let T=k;T<z;T++)for(let I=v;I<A;I++){let D=this.make_tile_request_url(ve,Ke,it,n,I,T),L=this.cache.get(D);if(L){let Y,ie;this.debug&&(Y=a.fg,ie=I.toString()+","+T.toString()),this.drawdirection!=="horizontal"?y.draw_image(a,L,L.xmin,L.ymin,L.xmax,L.ymax,this.opacity,!1,!0,Be,Y,ie):y.draw_image(a,L,L.ymin,L.xmin,L.ymax,L.xmax,this.opacity,!1,!0,Be,Y,ie)}else this.sendTileRequest(D)}}else{let ve=new XMLHttpRequest,[Ke,Ie]=this.hcb.url.split("/sds/hdr/"),Je=`${Ke}/sds`,Ze=`rds/${ue}/${be}/${Ee}/${Me}/${ae}/${Ae}/${Ie}`,et=`?outfmt=RGBA&colormap=${p.Mc.colormap[h.cmap].name}&subsize=${s.subsize}`;h.zmin!==void 0&&(et=`${et}&zmin=${h.zmin}`),h.zmax!==void 0&&(et=`${et}&zmax=${h.zmax}`),h.cmode!==void 0&&(et=`${et}&cxmode=${["Ma","Ph","Re","Im","IR","Lo","L2"][h.cmode-1]}`),this.xcompression!==void 0&&(et=`${et}&transform=${["first","mean","min","max","first","absmax"][this.xcompression]}`);let tt=`${Je}/${Ze}${et}`,it=this.cache.get(tt);if(it)this.drawdirection!=="horizontal"?y.draw_image(a,it,c,g,_,P,this.opacity,!1,!0,Be):y.draw_image(a,it,g,c,P,_,this.opacity,!1,!0,Be);else{ve.open("GET",tt,!0),ve.responseType="arraybuffer",ve.overrideMimeType("text/plain; charset=x-user-defined");let n=this;ve.onload=function(o){if(ve.readyState===4&&(ve.status===200||ve.status===0)){let m=ve.getResponseHeader("Zmin"),S=ve.getResponseHeader("Zmax");a.level===0&&h.zmin===void 0&&(h.autoz&1)!==0&&(h.zmin=m),a.level===0&&h.zmax===void 0&&(h.autoz&2)!==0&&(h.zmax=S);let C=null;ve.response&&(C=ve.response),C.width=ae,C.height=Ae,C.contents="rgba",n.cache.set(tt,C),n.drawdirection!=="horizontal"?y.draw_image(a,C,c,g,_,P,n.opacity,!1,!0,Be):y.draw_image(a,C,g,c,P,_,n.opacity,!1,!0,Be)}},ve.onerror=function(o){},this.debounceSend(ve)}}return{xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}},xCut:function(a){let h=this.plot._Mx,s=this.plot._Gx;if(a!==void 0){this.cut_stash={ylabel:s.ylabel,xlabel:s.xlabel,xlab:s.xlab,ylab:s.ylab,level:h.level,stk:JSON.parse(JSON.stringify(h.stk)),panymin:s.panymin,panymax:s.panymax,panxmin:s.panxmin,panxmax:s.panxmax};let _=Math.round((a-this.ystart)/this.ydelta);if(_<0||_>this.lps)return;for(let B=0;B<h.stk.length;B++)h.stk[B].ymin=void 0,h.stk[B].ymax=void 0;s.panymax=void 0,s.panymin=void 0;let g,P;this.drawdirection!=="horizontal"?(g="x_cut_data",P="xcut"):(g="y_cut_data",P="ycut");var c=s.lyr.length>0&&this.cx;s.cmode===1?s.ylabel=p.UNITS[28][0]:s.cmode===2?s.ylabel=s.plab:s.cmode===3&&c?s.ylabel=p.UNITS[21][0]:s.cmode===4||s.cmode===5?s.ylabel=p.UNITS[22][0]:s.cmode===6?s.ylabel=p.UNITS[26][0]:s.cmode===7?s.ylabel=p.UNITS[27][0]:s.ylabel="Intensity",p.UNITS[s.xlab][0]!=="None"&&p.UNITS[s.xlab][0]!=="Unknown"?s.xlabel=p.UNITS[s.xlab][0]:s.xlabel="Frequency",s.xlabel+="    CURRENTLY IN X_CUT MODE",h.origin=1,this.xcut_layer=this.plot.overlay_href(this.hcb.url,null,{name:g,layerType:"1DSDS",mode:P,xypos_index:_,bottom_level:h.level},{}),h.origin=1;let U=this.plot.get_lyrn(this.xcut_layer);for(let B=0;B<s.lyr.length;B++)B!==U&&(s.lyr[B].display=!s.lyr[B].display);s.x_cut_press_on=!0,this.plot.rescale()}else if(s.x_cut_press_on){s.x_cut_press_on=!1;let _=this.plot.get_lyrn(this.xcut_layer);for(let g=0;g<s.lyr.length;g++)g!==_&&(s.lyr[g].display=!s.lyr[g].display),this.plot.deoverlay(this.xcut_layer),s.xlab=this.cut_stash.xlab,s.ylab=this.cut_stash.ylab,s.xlabel=this.cut_stash.xlabel,s.ylabel=this.cut_stash.ylabel,h.level=this.cut_stash.level,h.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),s.panymin=this.cut_stash.panymin,s.panymax=this.cut_stash.panymax,s.panxmin=this.cut_stash.panxmin,s.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,h.origin=4,this.plot.rescale(),this.plot.refresh(),this.xcut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})}},yCut:function(a){let h=this.plot._Mx,s=this.plot._Gx;if(a!==void 0){this.cut_stash={xlabel:s.xlabel,ylabel:s.ylabel,xlab:s.xlab,ylab:s.ylab,level:h.level,stk:JSON.parse(JSON.stringify(h.stk)),ymax:h.stk[h.level].ymax,panymin:s.panymin,panymax:s.panymax,panxmin:s.panxmin,panxmax:s.panxmax};let _=Math.round((a-this.xstart)/this.xdelta);if(_<0)return;for(let B=0;B<h.stk.length;B++)h.stk[B].xmin=h.stk[B].ymin,h.stk[B].xmax=h.stk[B].ymax,h.stk[B].xscl=h.stk[B].yscl,h.stk[B].ymin=void 0,h.stk[B].ymax=void 0,h.stk[B].yscl=void 0;s.panymax=void 0,s.panymin=void 0;let g,P;this.drawdirection!=="horizontal"?(g="y_cut_data",P="ycut"):(g="x_cut_data",P="xcut");var c=s.lyr.length>0&&this.cx;s.cmode===1?s.ylabel=p.UNITS[28][0]:s.cmode===2?s.ylabel=s.plab:s.cmode===3&&c?s.ylabel=p.UNITS[21][0]:s.cmode===4||s.cmode===5?s.ylabel=p.UNITS[22][0]:s.cmode===6?s.ylabel=p.UNITS[26][0]:s.cmode===7?s.ylabel=p.UNITS[27][0]:s.ylabel="Intensity",p.UNITS[s.ylab][0]!=="None"&&p.UNITS[s.ylab][0]!=="Unknown"?s.xlabel=p.UNITS[s.ylab][0]:s.xlabel="Time",s.xlabel+="    CURRENTLY IN Y_CUT MODE",h.origin=1,this.ycut_layer=this.plot.overlay_href(this.hcb.url,null,{name:g,layerType:"1DSDS",mode:P,xypos_index:_,bottom_level:h.level},{}),h.origin=1;let U=this.plot.get_lyrn(this.ycut_layer);for(let B=0;B<s.lyr.length;B++)B!==U&&(s.lyr[B].display=!s.lyr[B].display);s.y_cut_press_on=!0}else if(s.y_cut_press_on){s.y_cut_press_on=!1;for(let _=0;_<s.lyr.length;_++)_!==this.ycut_layer&&(s.lyr[_].display=!s.lyr[_].display),this.plot.deoverlay(this.ycut_layer),s.xlab=this.cut_stash.xlab,s.ylab=this.cut_stash.ylab,s.xlabel=this.cut_stash.xlabel,s.ylabel=this.cut_stash.ylabel,h.level=this.cut_stash.level,h.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),s.panymin=this.cut_stash.panymin,s.panymax=this.cut_stash.panymax,s.panxmin=this.cut_stash.panxmin,s.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,h.origin=4,this.plot.rescale(),this.plot.refresh(),this.ycut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})}}},t.overlay=function(a,h,s){let c=a._Gx;h.buf_type="D";let _=new t(a);_.init(h),h.file_name?_.name=p.trim_name(h.file_name):_.name="layer_"+c.lyr.length,_.change_settings(s);let g=[];return a.add_layer(_)&&g.push(_),g},dn.exports=t})()});var Ni=$e((Gs,mn)=>{(function(){var p=mt(),y=vt();class u{pluginConstructor(){}pluginInit(){}pluginDispose(){}pluginRefresh(){}pluginGetMenu(){}constructor(l){return this.initial_properties=l,this.properties={},this._plot=void 0,this._canvas=void 0,this.defineProperty("display",{defaultValue:!0,refreshOnChange:!0,help:"changes if the plugin is rendered on the plot or not"}),this.pluginSetup(),this}init(l,t){if(this._plot)throw"Plugins can only be added to one plot at a time";this._plot=l,this._canvas=t,this.properties={},this.resetProperties(this.initial_properties),this.pluginInit()}get plot(){return this._plot}get Mx(){return this._plot?this._plot._Mx:null}get Gx(){return this._plot?this._plot._Gx:null}get canvas(){return this._canvas}get Context(){return this._canvas?this._canvas.getContext("2d"):null}dispose(){this.pluginDispose(),this._plot=void 0,this._canvas=void 0,this.properties={}}refresh(){!this._plot||!this._canvas||!this.properties.display||this.pluginRefresh(this.canvas)}menu(){return this.pluginGetMenu()}defineProperty(l,t){this.definedproperties===void 0&&(this.definedproperties={}),t=t||{},this.definedproperties[l]=t,this[l]=function(){if(!arguments.length)return this.properties[l];if(t.readonly)throw"property "+l+" is readonly";if(this.properties[l]!==arguments[0])return this.properties[l]=arguments[0],t.callback&&t.callback(arguments[0]),t.refreshOnChange&&this.refresh(),this}}resetProperties(l){for(let t in this.definedproperties)this.properties[t]=this.definedproperties[t].defaultValue;this.assignProperties(l)}assignProperties(l){let t=!1;for(let a in l)if(!!this.definedproperties.hasOwnProperty(a)&&this.properties[a]!==l[a]){if(this.definedproperties[a].readonly)throw"property "+a+" is readonly";this.properties[a]=l[a],this.definedproperties[a].callback&&this.definedproperties[a].callback(l[a]),this.definedproperties[a].refreshOnChange===!0&&(t=!0)}t&&this.refresh()}on(l,t,a){this._events||(this._events={}),this._events[l]||(this._events[l]=[]),a===this&&(a=void 0),this._events[l].push({cb:t,ctx:a})}emit(l,t){var a=Object.assign({},t,{type:l,target:this});if(this._events){var h=this._events[l];if(h)for(var s=0,c=h.length;s<c;s++){var _=h[s];_.cb.call(_.ctx||this,a)}}return this}off(l,t,a){var h,s,c;if(l||delete this._events,!!this._events&&(h=this._events[l],!!h)){if(a===this&&(a=void 0),h)for(s=0,c=h.length;s<c;s++){var _=h[s];if(_.ctx===a&&_.fn===t){h.splice(s,1);return}}return this}}addListener(l,t){if(!this.Mx)throw"listeners cannot be added until pluginInit is called";p.addEventListener(this.Mx,l,t,!1)}removeListener(l,t){if(!this.Mx)throw"listeners cannot be removed until pluginInit is called";p.removeEventListener(this.Mx,l,t,!1)}}mn.exports={Plugin:u}})()});var yn=$e((Ps,_n)=>{(function(){var p=pt(),y=mt(),u=Ni();class r extends u.Plugin{pluginSetup(){this.defineProperty("center_line_style",{defaultValue:{},refreshOnChange:!0}),this.defineProperty("edge_line_style",{defaultValue:{},refreshOnChange:!0}),this.defineProperty("fill_style",{defaultValue:{},refreshOnChange:!0}),this.defineProperty("direction",{defaultValue:"vertical",refreshOnChange:!0}),this.defineProperty("mode",{defaultValue:"absolute",refreshOnChange:!0}),this.defineProperty("draw_center_line",{defaultValue:!0,refreshOnChange:!0}),this.defineProperty("prevent_drag",{defaultValue:!1,refreshOnChange:!0}),this.defineProperty("prevent_move",{defaultValue:!1,refreshOnChange:!0}),this.defineProperty("prevent_resize",{defaultValue:!1,refreshOnChange:!0}),this.defineProperty("discrete_widths",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("min_width",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("max_width",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("shade_area",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("draw_edge_lines",{defaultValue:!0,refreshOnChange:!0}),this.defineProperty("draw_center_line",{defaultValue:!0,refreshOnChange:!0}),this.defineProperty("center",{refreshOnChange:!0,callback:t=>{this._onCenterChange(t)},help:"center of the accordion in plot units (not pixels)"}),this.defineProperty("highlight",{refreshOnChange:!0,help:"highlight the center of the accordion"}),this.defineProperty("edge_highlight",{refreshOnChange:!0,help:"highlight the edges of the accordion"}),this.defineProperty("width",{refreshOnChange:!0,callback:t=>{this._onWidthChange(t)},help:"width of the accordion in plot units (not pixels)"}),this.defineProperty("center_location",{refreshOnChange:!0,help:"center of the accordion in pixels"}),this.defineProperty("loc_1",{refreshOnChange:!0,help:"location of one of the accordion bars in pixels"}),this.defineProperty("loc_2",{refreshOnChange:!0,help:"location of one of the accordion bars in pixels"}),this.defineProperty("text",{defaultValue:null,refreshOnChange:!0}),this.defineProperty("textFont",{defaultValue:null,refreshOnChange:!0}),this.defineProperty("textStokeStyle",{defaultValue:null,refreshOnChange:!0}),this.defineProperty("textPosition",{defaultValue:{horizontal:"middle",vertical:"middle"},refreshOnChange:!0})}pluginInit(){this.addListener("mmove",t=>{this._onMouseMove(t)}),this.addListener("mdown",t=>{this._onMouseDown(t)}),document.addEventListener("mouseup",()=>{this._onDocMouseUp()},!1)}pluginDispose(){}pluginRefresh(){if(this.properties.center===void 0||this.properties.width===void 0)return;let t=this.Mx,a=this.Context;a.clearRect(0,0,this.canvas.width,this.canvas.height);let h;if(this.properties.mode==="absolute")h=y.real_to_pixel(t,this.properties.center,this.properties.center);else if(this.properties.mode==="relative"){if(this.properties.direction==="vertical"){let _=t.stk[0].x1+(t.stk[0].x2-t.stk[0].x1)*this.properties.center;h=y.real_to_pixel(t,y.pixel_to_real(t,_,_).x,y.pixel_to_real(t,_,_).y)}else if(this.properties.direction==="horizontal"){let _=t.stk[0].y1+(t.stk[0].y2-t.stk[0].y1)*this.properties.center;h=y.real_to_pixel(t,y.pixel_to_real(t,_,_).x,y.pixel_to_real(t,_,_).y)}}let s,c;if(this.properties.mode==="absolute")s=y.real_to_pixel(t,this.properties.center-this.properties.width/2,this.properties.center-this.properties.width/2),c=y.real_to_pixel(t,this.properties.center+this.properties.width/2,this.properties.center+this.properties.width/2);else if(this.properties.mode==="relative"){let _=t.stk[0].x2-t.stk[0].x1,g=t.stk[0].y2-t.stk[0].y1;s={x:h.x-this.properties.width*_/2,y:h.y-this.properties.width*g/2},c={x:h.x+this.properties.width*_/2,y:h.y+this.properties.width*g/2}}if(this.properties.direction==="vertical"?(this.properties.center_location=h.x,this.properties.loc_1=Math.max(t.l,s.x),this.properties.loc_2=Math.min(t.r,c.x)):this.properties.direction==="horizontal"&&(this.properties.center_location=h.y,this.properties.loc_1=Math.max(t.t,c.y),this.properties.loc_2=Math.min(t.b,s.y)),this.properties.shade_area&&Math.abs(this.properties.loc_2-this.properties.loc_1)>0){let _=a.globalAlpha;a.globalAlpha=this.properties.fill_style.opacity!==void 0?this.properties.fill_style.opacity:.4,a.fillStyle=this.properties.fill_style.fillStyle!==void 0?this.properties.fill_style.fillStyle:t.hi,this.properties.direction==="vertical"?a.fillRect(this.properties.loc_1,t.t,this.properties.loc_2-this.properties.loc_1,t.b-t.t):this.properties.direction==="horizontal"&&a.fillRect(t.l,this.properties.loc_1,t.r-t.l,this.properties.loc_2-this.properties.loc_1),a.globalAlpha=_}if((this.properties.draw_edge_lines||this.properties.edge_highlight||this.edge_dragging)&&(a.lineWidth=this.properties.edge_line_style.lineWidth!==void 0?this.properties.edge_line_style.lineWidth:1,a.lineCap=this.properties.edge_line_style.lineCap!==void 0?this.properties.edge_line_style.lineCap:"square",a.strokeStyle=this.properties.edge_line_style.strokeStyle!==void 0?this.properties.edge_line_style.strokeStyle:t.fg,(this.edge_dragging||this.properties.edge_highlight)&&(a.lineWidth=Math.ceil(a.lineWidth*1.2)),this.properties.direction==="vertical"?(a.beginPath(),a.moveTo(this.properties.loc_1+.5,t.t),a.lineTo(this.properties.loc_1+.5,t.b),a.stroke(),a.beginPath(),a.moveTo(this.properties.loc_2+.5,t.t),a.lineTo(this.properties.loc_2+.5,t.b),a.stroke()):this.properties.direction==="horizontal"&&(a.beginPath(),a.moveTo(t.l,this.properties.loc_1+.5),a.lineTo(t.r,this.properties.loc_1+.5),a.stroke(),a.beginPath(),a.moveTo(t.l,this.properties.loc_2+.5),a.lineTo(t.r,this.properties.loc_2+.5),a.stroke())),this.properties.draw_center_line&&(a.lineWidth=this.properties.center_line_style.lineWidth!==void 0?this.properties.center_line_style.lineWidth:1,a.lineCap=this.properties.center_line_style.lineCap!==void 0?this.properties.center_line_style.lineCap:"square",a.strokeStyle=this.properties.center_line_style.strokeStyle!==void 0?this.properties.center_line_style.strokeStyle:t.fg,(this.dragging||this.properties.highlight)&&(a.lineWidth=Math.ceil(a.lineWidth*1.2)),this.properties.direction==="vertical"?(a.beginPath(),a.moveTo(this.properties.center_location+.5,t.t),a.lineTo(this.properties.center_location+.5,t.b),a.stroke()):this.properties.direction==="horizontal"&&(a.beginPath(),a.moveTo(t.l,this.properties.center_location+.5),a.lineTo(t.r,this.properties.center_location+.5),a.stroke())),this.properties.text){a.save(),a.font=this.properties.textFont||t.text_h+"px Courier New, monospace",a.globalAlpha=1,a.fillStyle=this.properties.textStrokeStyle||t.fg;let g=a.measureText("M").width,P,U;this.properties.direction==="vertical"?(this.properties.textPosition.horizontal==="left"?(a.textAlign="end",P=this.properties.center_location-t.text_w):this.properties.textPosition.horizontal==="right"?P=this.properties.center_location+t.text_w:this.properties.textPosition.horizontal==="middle"&&(a.textAlign="center",P=this.properties.center_location),this.properties.textPosition.vertical==="top"?U=t.t+g*2:this.properties.textPosition.vertical==="middle"?U=Math.floor(t.t+t.b)/2:this.properties.textPosition.vertical==="bottom"&&(U=t.b-g)):this.properties.direction==="horizontal"&&(this.properties.textPosition.horizontal==="left"?P=t.l+t.text_w:this.properties.textPosition.horizontal==="right"?(a.textAlign="end",P=t.r-t.text_w):this.properties.textPosition.horizontal==="middle"&&(a.textAlign="center",P=Math.floor(t.r+t.l)/2),this.properties.textPosition.vertical==="top"?U=this.properties.center_location-g:this.properties.textPosition.vertical==="middle"?U=this.properties.center_location:this.properties.textPosition.vertical==="bottom"&&(U=this.properties.center_location+g*2)),a.rect(t.l,t.t,t.r-t.l,t.b-t.t),a.clip(),a.fillText(this.properties.text,P,U),a.restore()}}mimic(t){t instanceof r&&t.on("change",a=>{this.properties.width=a.width,this.properties.center=a.center,this.plot.redraw()})}_onMouseMove(t){let a=this.Mx;if(this.properties.center_location===void 0||this.properties.prevent_drag)return;if(t.xpos<a.l||t.xpos>a.r){this.properties.highlight=!1;return}if(t.ypos>a.b||t.ypos<a.t){this.properties.highlight=!1;return}let h=this.properties.center_line_style.lineWidth!==void 0?this.properties.center_line_style.lineWidth:1,s=this.properties.edge_line_style.lineWidth!==void 0?this.properties.edge_line_style.lineWidth:1;if(!this.dragging&&!this.edge_dragging){if(a.warpbox)return;this.properties.direction==="vertical"?(this.properties.prevent_move||(Math.abs(this.properties.center_location-t.xpos)<h+5?this.properties.highlight=!0:this.properties.highlight=!1),this.properties.prevent_resize||(Math.abs(this.properties.loc_1-t.xpos)<s+5||Math.abs(this.properties.loc_2-t.xpos)<s+5?this.properties.edge_highlight=!0:this.properties.edge_highlight=!1)):this.properties.direction==="horizontal"&&(this.properties.prevent_move||(Math.abs(this.properties.center_location-t.ypos)<h+5?this.properties.highlight=!0:this.properties.highlight=!1),this.properties.prevent_resize||(Math.abs(this.properties.loc_1-t.ypos)<s+5||Math.abs(this.properties.loc_2-t.ypos)<s+5?this.properties.edge_highlight=!0:this.properties.edge_highlight=!1));return}if(this.dragging){var c=y.pixel_to_real(a,t.xpos,t.ypos);this.properties.direction==="vertical"?(this.properties.center_location=t.xpos,this.properties.mode==="absolute"?this.properties.center=c.x:this.properties.mode==="relative"&&(this.properties.center=(t.xpos-a.l)/(a.r-a.l))):this.properties.direction==="horizontal"&&(this.properties.center_location=t.ypos,this.properties.mode==="absolute"?this.properties.center=c.y:this.properties.mode==="relative"&&(this.properties.center=(t.ypos-a.t)/(a.b-a.t)))}if(this.edge_dragging){var c=y.pixel_to_real(a,t.xpos,t.ypos);if(this.properties.direction==="vertical"?this.properties.mode==="absolute"?this.properties.width=2*Math.abs(this.properties.center-c.x):this.properties.mode==="relative"&&(this.properties.width=2*Math.abs(this.properties.center_location-t.xpos)/(a.r-a.l)):this.properties.direction==="horizontal"&&(this.properties.mode==="absolute"?this.properties.width=2*Math.abs(this.properties.center-c.y):this.properties.mode==="relative"&&(this.properties.width=2*Math.abs(this.properties.center_location-t.ypos)/(a.b-a.t))),this.properties.discrete_widths){let g=0,P=Math.abs(this.properties.width-this.properties.discrete_widths[0]),U=0;for(let B=1;B<this.properties.discrete_widths.length;B++)U=Math.abs(this.properties.width-this.properties.discrete_widths[B]),U<P&&(g=B,P=U);this.properties.min_width&&(this.properties.width=Math.max(this.properties.width,this.properties.min_width)),this.properties.max_width&&(this.properties.width=Math.min(this.properties.width,this.properties.max_width))}}this.plot&&this.plot.refresh(),t.preventDefault()}_onMouseDown(t){let a=this.Mx;if(this.properties.center_location===void 0||t.xpos<a.l||t.xpos>a.r||t.ypos>a.b||t.ypos<a.t||this.properties.prevent_drag)return;let h=this.properties.center_line_style.lineWidth!==void 0?this.properties.center_line_style.lineWidth:1,s=this.properties.edge_line_style.lineWidth!==void 0?this.properties.edge_line_style.lineWidth:1;this.properties.direction==="vertical"?Math.abs(this.properties.loc_1-t.xpos)<s+5||Math.abs(this.properties.loc_2-t.xpos)<s+5?(this.edge_dragging=!this.properties.prevent_resize,t.preventDefault()):Math.abs(this.properties.center_location-t.xpos)<h+5&&(this.dragging=!this.properties.prevent_move,t.preventDefault()):this.properties.direction==="horizontal"&&(Math.abs(this.properties.loc_1-t.ypos)<s+5||Math.abs(this.properties.loc_2-t.ypos)<s+5?(this.edge_dragging=!this.properties.prevent_resize,t.preventDefault()):Math.abs(this.properties.center_location-t.ypos)<h+5&&(this.dragging=!this.properties.prevent_move,t.preventDefault()))}_onDocMouseUp(){let t=this.Mx;if(!this.dragging||!this.edge_dragging)return;this.dragging=!1,this.edge_dragging=!1;let a=document.createEvent("Event");a.initEvent("accordiontag",!0,!0),a.center=this.properties.center,a.width=this.properties.width,y.dispatchEvent(t,a),this.emit("change",{center:this.properties.center,width:this.properties.width})}_onCenterChange(t){if(this.plot){var a=this.Mx,h=document.createEvent("Event");h.initEvent("accordiontag",!0,!0),this.emit("change",{center:this.properties.center,width:this.properties.width}),h.center=this.properties.center,h.width=this.properties.width,y.dispatchEvent(a,h),this.plot.redraw()}}_onWidthChange(t){if(this.plot){var a=this.Mx,h=document.createEvent("Event");h.initEvent("accordiontag",!0,!0),this.emit("change",{center:this.properties.center,width:this.properties.width}),h.center=this.properties.center,h.width=this.properties.width,y.dispatchEvent(a,h),this.plot.redraw()}}set_center(t){this.center(t)}set_width(t){this.width(t)}set_highlight(t){this.highlight(t)}set_edge_highlight(t){this.edge_highlight(t)}set_visible(t){this.display(!1)}set_mode(t){this.mode(t)}get_center(){return this.properties.center()}get_width(){return this.properties.width()}}_n.exports=r})()});var vn=$e((Is,xn)=>{(function(){var p=pt(),y=mt(),u=function(r){this.options=r===void 0?{}:r,this.options.display===void 0&&(this.options.display=!0),this.options.textBaseline=this.options.textBaseline||"alphabetic",this.options.textAlign=this.options.textAlign||"left",this.annotations=[]};u.prototype={init:function(r){var l=this;this.plot=r;var t=this.plot._Mx;this.onmousemove=function(a){if(l.annotations.length!==0&&!l.options.prevent_hover){if(a.xpos<t.l||a.xpos>t.r){l.set_highlight(!1);return}if(a.ypos>t.b||a.ypos<t.t){l.set_highlight(!1);return}for(var h=!1,s=0;s<l.annotations.length;s++){var c=l.annotations[s],_={x:void 0,y:void 0};c.absolute_placement&&(_.x=c.x,_.y=c.y),c.pxl_x!==void 0&&(_.x=c.pxl_x),c.pxl_y!==void 0&&(_.y=c.pxl_y);var g=y.real_to_pixel(t,c.x,c.y);_.x===void 0&&(_.x=g.x),_.y===void 0&&(_.y=g.y);var P={x:_.x,y:_.y};c.value instanceof HTMLImageElement||c.value instanceof HTMLCanvasElement||typeof HTMLVideoElement<"u"&&c.value instanceof HTMLVideoElement?(P.x-=c.width/2,P.y-=c.height/2):P.y-=c.height,y.inrect(a.xpos,a.ypos,P.x,P.y,c.width,c.height)?c.highlight||(l.set_highlight(!0,[c],_.x,_.y),h=!0):(c.highlight&&(l.set_highlight(!1,[c]),h=!0),c.selected=void 0)}l.plot&&h&&l.plot.refresh()}},this.plot.addListener("mmove",this.onmousemove),this.onmousedown=function(a){for(var h=0;h<l.annotations.length;h++)l.annotations[h].highlight&&(l.annotations[h].selected=!0)},this.plot.addListener("mdown",this.onmousedown),this.onmouseup=function(a){for(var h=0;h<l.annotations.length;h++){if(l.annotations[h].selected){var a=document.createEvent("Event");a.initEvent("annotationclick",!0,!0),a.annotation=l.annotations[h];var s=y.dispatchEvent(l.plot._Mx,a);s&&l.annotations[h].onclick&&l.annotations[h].onclick()}l.annotations[h].selected=void 0}},document.addEventListener("mouseup",this.onmouseup,!1)},set_highlight:function(r,l,t,a){for(var h=l||this.annotations,s=0;s<h.length;s++){var c=document.createEvent("Event");c.initEvent("annotationhighlight",!0,!0),c.annotation=h[s],c.state=r,c.x=t,c.y=a;var _=y.dispatchEvent(this.plot._Mx,c);_&&(h[s].highlight=r)}},menu:function(){var r=function(t){return function(){t.options.display=!t.options.display,t.plot.redraw()}}(this),l=function(t){return function(){t.annotations=[],t.plot.redraw()}}(this);return{text:"Annotations...",menu:{title:"ANNOTATIONS",items:[{text:"Display",checked:this.options.display,style:"checkbox",handler:r},{text:"Clear All",handler:l}]}}},add_annotation:function(r){return this.annotations.push(r),this.plot.redraw(),this.annotations.length},clear_annotations:function(){this.annotations=[],this.plot.redraw()},refresh:function(r){if(!!this.options.display){var l=this.plot._Gx,t=this.plot._Mx,a=r.getContext("2d"),h=this;a.save(),a.beginPath(),a.rect(t.l,t.t,t.r-t.l,t.b-t.t),a.clip(),y.onCanvas(t,r,function(){for(var s=h.annotations.length-1;s>=0;s--){var c=h.annotations[s],_={x:void 0,y:void 0};c.absolute_placement&&(_.x=c.x,_.y=c.y),c.pxl_x!==void 0&&(_.x=c.pxl_x),c.pxl_y!==void 0&&(_.y=c.pxl_y);var g=y.real_to_pixel(t,c.x,c.y);_.x===void 0&&(_.x=g.x),_.y===void 0&&(_.y=g.y),!!y.inrect(_.x,_.y,t.l,t.t,t.r-t.l,t.b-t.t)&&(c.value instanceof HTMLImageElement||c.value instanceof HTMLCanvasElement||typeof HTMLVideoElement<"u"&&c.value instanceof HTMLVideoElement?(c.width=c.value.width,c.height=c.value.height,a.drawImage(c.value,_.x-c.width/2,_.y-c.height/2)):(a.font=c.font||"bold italic 20px new century schoolbook",c.highlight?a.fillStyle=c.highlight_color||t.hi:a.fillStyle=c.color||t.fg,a.globalAlpha=1,c.width=a.measureText(c.value).width,c.height=a.measureText("M").width,a.textBaseline=c.textBaseline||h.options.textBaseline,a.textAlign=c.textAlign||h.options.textAlign,a.fillText(c.value,_.x,_.y)),c.highlight&&c.popup&&y.render_message_box(t,c.popup,_.x+5,_.y+5,c.popupTextColor))}}),a.restore()}},dispose:function(){this.plot=void 0,this.annotations=void 0}},xn.exports=u})()});var bn=$e((Os,gn)=>{(function(){var p=Ti(),y=vt(),u=pt(),r=mt();class l{constructor({display:a=!0,enableSelect:h=!1,enableMove:s=!1,enableResize:c=!1,lineWidth:_=1,alpha:g=.5,font:P,fill:U=!1,strokeStyle:B,fillStyle:Z,absolutePlacement:oe=!1}={}){this.options={},this.options.display=a,this.options.enableSelect=h,this.options.enableMove=s,this.options.enableResize=c,this.options.lineWidth=_,this.options.alpha=g,this.options.font=P,this.options.fill=U,this.options.strokeStyle=B,this.options.fillStyle=Z,this.options.absolutePlacement=oe}init(a){this.plot=a,this.boxes=[],this._clickTimer=null,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseClick=this._onMouseClick.bind(this),this.plot.addListener("mdown",this._onMouseDown),this.plot.addListener("mmove",this._onMouseMove),this.plot.addListener("mup",this._onMouseClick),this.plot.addListener("mdblclick",this._onMouseClick)}display(a){if(a===void 0)return this.options.display;this.options.display=a,this.plot.refresh()}enableSelect(a){if(a===void 0)return this.options.enableSelect;this.options.enableSelect=a,this.options.enableSelect===!1&&p.each(this.boxes,h=>{h.selected=void 0}),this.plot.refresh()}enableMove(a){if(a===void 0)return this.options.enableMove;this.options.enableMove=a,this.plot.refresh()}enableResize(a){if(a===void 0)return this.options.enableResize;this.options.enableResize=a,this.plot.refresh()}getBoxes(){return this.boxes}addBox(a){let h=this.plot._Mx,s={x:a.x,y:a.y,w:a.w,h:a.h,text:a.text,id:y.uuidv4(),fill:a.fill,fillStyle:a.fillStyle,alpha:a.alpha,strokeStyle:a.strokeStyle,lineWidth:a.lineWidth,absolutePlacement:a.absolutePlacement};a.absolute_placement&&(s.absolutePlacement=a.absolute_placement),this.boxes.push(s),this.plot.redraw();let c=document.createEvent("Event");return c.box=s,c.initEvent("boxadd",!0,!0),r.dispatchEvent(h,c),s.id}getSelectedBoxes(){let a=[],h,s;for(s=this.boxes.length-1;s>-1;s--)h=this.boxes[s],h.selected&&a.push(h);return a}bringBoxToFront(a){let h,s;for(s=this.boxes.length-1;s>-1;s--)if(h=this.boxes[s],h.id===a){this.boxes.splice(s,1),this.boxes.push(h);break}}sendBoxToBack(a){let h,s;for(s=this.boxes.length-1;s>-1;s--)if(h=this.boxes[s],h.id===a){this.boxes.splice(s,1),this.boxes.splice(0,0,h);break}}removeBox(a){let h=this.plot._Mx,s,c;for(c=this.boxes.length-1;c>-1;c--)if(s=this.boxes[c],s.id===a){this.boxes.splice(c,1);let _=document.createEvent("Event");_.box=s,_.initEvent("boxremove",!0,!0),r.dispatchEvent(h,_);break}this.plot.redraw()}clearBoxes(){let a=this.plot._Mx,h,s;for(s=this.boxes.length-1;s>-1;s--){h=this.boxes[s],this.boxes.splice(s,1);let c=document.createEvent("Event");c.box=h,c.initEvent("boxremove",!0,!0),r.dispatchEvent(a,c)}this.plot.redraw()}add_box(a){return this.addBox(a)}remove_box(a){return this.removeBox(a)}clear_boxes(a){return this.clearBoxes()}_getControlPoints(a){let h=r.real_box_to_pixel(this.plot._Mx,a.x,a.y,a.w,a.h),s=h.ul,c=h.lr,_={x:s.x,y:c.y},g={x:c.x,y:s.y},P={x:(s.x+c.x)/2,y:s.y},U={x:(s.x+c.x)/2,y:c.y},B={x:s.x,y:(s.y+c.y)/2},Z={x:c.x,y:(s.y+c.y)/2};return{ul:s,lr:c,ll:_,ur:g,um:P,lm:U,ml:B,mr:Z}}_isWithinBox(a,h,s){let c=r.real_box_to_pixel(this.plot._Mx,s.x,s.y,s.w,s.h),_=c.ul.x<=a&&a<=c.lr.x,g=c.ul.y<=h&&h<=c.lr.y;return _&&g}_isOverControlPoint(a,h,s){let c=this._getControlPoints(s);for(let[_,g]of Object.entries(c)){let P=Math.abs(g.x-a),U=Math.abs(g.y-h);if(P<5&&U<5)return _}return null}_selectBoxes(a,h,s){let c=[];for(let _=this.boxes.length-1;_>-1;_--){let g=this.boxes[_],P=r.real_box_to_pixel(this.plot._Mx,g.x,g.y,g.w,g.h),U=P.ul.x<=a&&a<=P.lr.x,B=P.ul.y<=h&&h<=P.lr.y;(s||c.length===0)&&U&&B?(c.push(g),this.options.enableSelect&&(g.selected=!0)):s||this._isOverControlPoint(a,h,g)?(c.push(g),this.options.enableSelect&&(g.selected=!0)):g.selected=void 0}return c}_onMouseDown(a){let h=this.plot._Mx;if(a.which===2||this.boxes.length===0||!this.options.enableSelect&&!this.options.enableMove&&!this.options.enableResize||a.xpos<h.l||a.xpos>h.r||a.ypos>h.b||a.ypos<h.t)return;let s=this._selectBoxes(a.xpos,a.ypos,!1);if(s.length>0){this.options.enableSelect&&(s[0].selected=!0);let c;this.options.enableResize&&(c=this._isOverControlPoint(a.xpos,a.ypos,s[0])),this._selected={x:a.x,y:a.y,orig_box:Object.assign({},s[0]),box:s[0],controlPoint:c,which:a.which},a.preventDefault()}}_onMouseMove(a){let h=this.plot._Mx;if(this.boxes.length!==0&&!(!this.options.enableMove&&!this.options.enableResize)&&!(a.xpos<h.l||a.xpos>h.r)&&!(a.ypos>h.b||a.ypos<h.t))if(this._selected&&this._selected.which===1){let s=r.pixel_to_real(h,a.xpos-this._selected.xpos,a.ypos-this._selected.ypos),c=a.x-this._selected.x,_=a.y-this._selected.y;this.options.enableMove&&(this._selected.controlPoint||(this._selected.box.x=this._selected.orig_box.x+c,this._selected.box.y=this._selected.orig_box.y+_)),this.options.enableResize&&(this._selected.controlPoint==="ul"||this._selected.controlPoint==="um"||this._selected.controlPoint==="ur"?h.origin===1||h.origin===2?(this._selected.box.y=this._selected.orig_box.y+_,this._selected.box.h=this._selected.orig_box.h+_):(this._selected.box.y=this._selected.orig_box.y+_,this._selected.box.h=this._selected.orig_box.h-_):(this._selected.controlPoint==="ll"||this._selected.controlPoint==="lm"||this._selected.controlPoint==="lr")&&(h.origin===1||h.origin===2?this._selected.box.h=this._selected.orig_box.h-_:this._selected.box.h=this._selected.orig_box.h+_),this._selected.controlPoint==="ul"||this._selected.controlPoint==="ml"||this._selected.controlPoint==="ll"?h.origin===1||h.origin===4?(this._selected.box.x=this._selected.orig_box.x+c,this._selected.box.w=this._selected.orig_box.w-c):(this._selected.box.x=this._selected.orig_box.x+c,this._selected.box.x=this._selected.orig_box.w-c):(this._selected.controlPoint==="ur"||this._selected.controlPoint==="mr"||this._selected.controlPoint==="lr")&&(h.origin===1||h.origin===4?this._selected.box.w=this._selected.orig_box.w+c:this._selected.box.w=this._selected.orig_box.w-c)),this.plot.redraw(),a.preventDefault()}else{let s,c,_,g,P="default";for(g=0;g<this.boxes.length;g++)s=this.boxes[g],_=this._isWithinBox(a.xpos,a.ypos,s),_&&this.options.enableMove&&(P="move"),c=this._isOverControlPoint(a.xpos,a.ypos,s),c&&this.options.enableResize?(c==="ul"||c==="lr"?P="nw-resize":c==="ll"||c==="ur"?P="ne-resize":c==="lm"||c==="um"?P="ns-resize":(c==="ml"||c==="mr")&&(P="ew-resize"),s.highlight=!0):!c&&s.highlight&&(s.highlight=void 0);P!==h.root.style.cursor&&(h.root.style.cursor=P),this.plot.redraw()}}_onMouseClick(a){let h=this.plot._Mx,s=!0;if(this.options.enableSelect||this.options.enableMove||this.options.enableResize){if(!this._selected){let U=this._selectBoxes(a.xpos,a.ypos,!1);if(U.length>0){this.options.enableSelect&&(U[0].selected=!0);let B;this.options.enableResize&&(B=this._isOverControlPoint(a.xpos,a.ypos,U[0])),this._selected={x:a.x,y:a.y,orig_box:Object.assign({},U[0]),box:U[0],controlPoint:B,which:a.which}}}let c=this._selected;if(!c)return;this._selected=void 0;let _=r.real_distance_to_pixel(this.plot._Mx,c.orig_box.x,c.orig_box.y,c.box.x,c.box.y),g=r.real_distance_to_pixel(this.plot._Mx,c.orig_box.x+c.orig_box.w,c.orig_box.y+c.orig_box.h,c.box.x+c.box.w,c.box.y+c.box.h);if(Math.abs(_.x)>3||Math.abs(_.y)>3||Math.abs(g.x)>3||Math.abs(g.y)>3){c.box.w<0&&(h.origin===1||h.origin===4?(c.box.x=c.box.x+c.box.w,c.box.w=Math.abs(c.box.w)):(c.box.x=c.box.x-c.box.w,c.box.w=Math.abs(c.box.w))),c.box.h<0&&(h.origin===1||h.origin===2?(c.box.y=c.box.y-c.box.h,c.box.h=Math.abs(c.box.h)):(c.box.y=c.box.y+c.box.h,c.box.h=Math.abs(c.box.h)));let U=document.createEvent("Event");U.source=this,U.box=c.box,U.action=a.type,U.initEvent("boxmove",!0,!0),r.dispatchEvent(h,U),a.preventDefault(),this.plot.redraw();return}else c.box.x=c.orig_box.x,c.box.y=c.orig_box.y,c.box.w=c.orig_box.w,c.box.h=c.orig_box.h;let P=[c.box];this._clickTimer&&clearTimeout(this._clickTimer),P.length>0&&this.options.enableSelect&&(a.preventDefault(),s=!1,this._clickTimer=setTimeout(()=>{let U=document.createEvent("Event");U.source=this,U.boxes=P,U.action=a.type,U.which=a.which,U.initEvent("boxselect",!0,!0),r.dispatchEvent(h,U),this.plot.redraw()},200))}return this._selected=void 0,s}menu(){return{text:"Boxes...",menu:{title:"BOXES",items:[{text:"Display",checked:this.display(),style:"checkbox",handler:()=>this.display(!this.display())},{text:"Enable Select",checked:this.enableSelect(),style:"checkbox",handler:()=>this.enableSelect(!this.enableSelect())},{text:"Enable Move",checked:this.enableMove(),style:"checkbox",handler:()=>this.enableMove(!this.enableMove())},{text:"Enable Resize",checked:this.enableResize(),style:"checkbox",handler:()=>this.enableResize(!this.enableResize())},{text:"Clear All",handler:()=>this.clearBoxes()}]}}}refresh(a){if(!this.options.display||this.boxes.length===0)return;let h=this.plot._Gx,s=this.plot._Mx,c=a.getContext("2d");if(h.x_cut_press_on||h.y_cut_press_on)return;c.save(),c.beginPath(),c.rect(s.l,s.t,s.r-s.l,s.b-s.t),c.clip();let _,g,P,U,B,Z,oe;for(oe=0;oe<this.boxes.length;oe++){if(_=this.boxes[oe],_.absolutePlacement===!0||this.options.absolutePlacement===!0)g=_.x+s.l,P=_.y+s.t,U=_.w,B=_.h;else{let ae=r.real_box_to_pixel(this.plot._Mx,_.x,_.y,_.w,_.h);g=ae.ul.x,P=ae.ul.y,U=ae.w,B=ae.h}if(c.strokeStyle=_.strokeStyle||this.options.strokeStyle||s.fg,c.lineWidth=_.lineWidth||this.options.lineWidth,_.highlight&&(c.lineWidth+=2),c.lineWidth%2===1&&(g+=.5,P+=.5),(_.fill||_.selected||this.options.fill)&&(c.globalAlpha=_.alpha||this.options.alpha,c.fillStyle=_.fillStyle||this.options.fillStyle||c.strokeStyle,c.fillRect(g,P,U,B),c.globalAlpha=1),c.strokeRect(g,P,U,B),this.options.enableResize&&(c.strokeStyle=_.strokeStyle||this.options.strokeStyle||s.fg,c.fillStyle=_.strokeStyle||this.options.strokeStyle||s.fg,c.fillRect(g-3,P-3,6,6),c.fillRect(g+U-3,P-3,6,6),c.fillRect(g+U-3,P+B-3,6,6),c.fillRect(g-3,P+B-3,6,6),c.fillRect(g+U/2-3,P-3,6,6),c.fillRect(g+U/2-3,P+B-3,6,6),c.fillRect(g-3,P+B/2-3,6,6),c.fillRect(g+U-3,P+B/2-3,6,6)),_.text){c.save(),c.font=_.font||this.options.font||s.text_h+"px Courier New, monospace",c.globalAlpha=1,c.textAlign="end",c.fillStyle=_.strokeStyle||this.options.strokeStyle||s.fg;let ae=c.measureText("M").width;g=g-ae,P=P-ae/3,Z=c.measureText(_.text).width,g-Z<s.l&&(g=g+U),c.fillText(_.text,g,P),c.restore()}}c.restore()}dispose(){this.plot.removeListener("mdown",this._onMouseDown),this.plot.removeListener("mmove",this._onMouseMove),this.plot.removeListener("mup",this._onMouseClick),this.plot.removeListener("mdblclick",this._onMouseClick),this.plot=void 0,this.boxes=[],this._clickTimer&&clearTimeout(this._clickTimer)}}gn.exports=l})()});var kn=$e((Rs,wn)=>{(function(){var p=pt(),y=mt(),u=vt(),r=function(l){this.options={display:!0,size:25,lineWidth:2,fillStyle:!1},u.update(this.options,l),this.state="paused",this.highlight=!1};r.prototype={init:function(l){this.plot=l;var t=this,a=this.plot._Mx;this.onmousemove=function(h){a.warpbox||(t.ismouseover(h.xpos,h.ypos)?t.set_highlight(!0):t.set_highlight(!1))},this.plot.addListener("mmove",this.onmousemove),this.onmousedown=function(h){a.warpbox||t.ismouseover(h.xpos,h.ypos)&&h.preventDefault()},this.plot.addListener("mdown",this.onmousedown),this.onmouseclick=function(h){a.warpbox||t.ismouseover(h.xpos,h.ypos)&&(t.toggle(),h.preventDefault())},this.plot.addListener("mclick",this.onmouseclick)},set_highlight:function(l){l!==this.highlight&&(this.highlight=l,this.plot.redraw())},toggle:function(l){if(l||(this.state==="paused"?l="playing":l="paused"),l!==this.state&&this.plot){var t=this.plot._Mx,a=document.createEvent("Event");a.initEvent("playbackevt",!0,!0),a.state=l;var h=y.dispatchEvent(t,a);h&&(this.state=l),this.plot.redraw()}},addListener:function(l,t){var a=this.plot._Mx;y.addEventListener(a,l,t,!1)},removeListener:function(l,t){var a=this.plot._Mx;y.removeEventListener(a,l,t,!1)},ismouseover:function(l,t){var a=this.position(),h=Math.pow(l-a.x,2)+Math.pow(t-a.y,2),s=this.options.size/2;return h<Math.pow(s,2)},position:function(){if(this.options.position)return this.options.position;if(this.plot){var l=this.plot._Mx,t=this.options.size/2;return{x:l.l+t+this.options.lineWidth+1,y:l.t+t+this.options.lineWidth+1}}else return{x:null,y:null}},refresh:function(l){if(!!this.options.display){var t=this.plot._Gx,a=this.plot._Mx,h=l.getContext("2d");h.lineWidth=this.options.lineWidth;var s=this.options.size/2;this.highlight&&(h.lineWidth+=2,s+=1);var c=this.position();if(h.beginPath(),h.arc(c.x,c.y,s-h.lineWidth,0,Math.PI*2,!0),h.closePath(),h.strokeStyle=this.options.strokeStyle||a.fg,h.stroke(),this.options.fillStyle&&(h.fillStyle=this.options.fillStyle,h.fill()),this.state==="paused"){var _={x:s*.8,y:s*.56},g={x:s*1.45,y:s},P={x:s*.8,y:s*1.45};_.x+=c.x-s,g.x+=c.x-s,P.x+=c.x-s,_.y+=c.y-s,g.y+=c.y-s,P.y+=c.y-s,h.beginPath(),h.moveTo(_.x,_.y),h.lineTo(g.x,g.y),h.lineTo(P.x,P.y),h.closePath(),h.fillStyle=this.options.strokeStyle||a.fg,h.fill()}else{h.lineCap="round",h.lineWidth=Math.floor(Math.min(1,this.options.size/8));var _={x:s*.8,y:s/2},g={x:s*.8,y:s*1.5};_.x+=c.x-s,g.x+=c.x-s,_.y+=c.y-s,g.y+=c.y-s,h.beginPath(),h.moveTo(_.x,_.y),h.lineTo(g.x,g.y),h.closePath(),h.stroke();var _={x:s+s/5,y:s/2},g={x:s+s/5,y:s*1.5};_.x+=c.x-s,g.x+=c.x-s,_.y+=c.y-s,g.y+=c.y-s,h.beginPath(),h.moveTo(_.x,_.y),h.lineTo(g.x,g.y),h.closePath(),h.stroke()}h.restore()}},dispose:function(){this.plot=void 0,this.boxes=void 0}},wn.exports=r})()});var En=$e((Ds,Sn)=>{(function(){var p=pt(),y=mt(),u=vt(),r=function(l){this.options={display:!0,style:{lineWidth:1,lineCap:"square"},direction:"vertical",name:"Slider",prevent_drag:!1,add_box:!1,persistent_style:!1,slider_ID:0},u.update(this.options,l),this.position=void 0,this.location=void 0,this.paired_slider=void 0,this.name=this.options.name};r.prototype={init:function(l){this.plot=l;var t=l._Mx,a=this;this.onmousemove=function(h){if(a.location!==void 0&&!a.options.prevent_drag){if(h.xpos<t.l||h.xpos>t.r){a.set_highlight(!1);return}if(h.ypos>t.b||h.ypos<t.t){a.set_highlight(!1);return}var s=a.options.style.lineWidth;if(!a.dragging){if(t.warpbox)return;a.options.direction==="vertical"?Math.abs(a.location-h.xpos)<s+5?a.set_highlight(!0):a.set_highlight(!1):a.options.direction==="horizontal"?Math.abs(a.location-h.ypos)<s+5?a.set_highlight(!0):a.set_highlight(!1):a.options.direction==="both"&&(Math.abs(a.location.x-h.xpos)<s+5&&Math.abs(a.location.y-h.ypos)<s+5?a.set_highlight(!0):a.set_highlight(!1));return}var c=y.pixel_to_real(t,h.xpos,h.ypos);a.options.direction==="vertical"?(a.location=h.xpos,a.position=c.x):a.options.direction==="horizontal"?(a.location=h.ypos,a.position=c.y):a.options.direction==="both"&&(a.location.x=h.xpos,a.position.x=c.x,a.location.y=h.ypos,a.position.y=c.y),a.plot.redraw(),h.preventDefault()}},this.plot.addListener("mmove",this.onmousemove),this.onmousedown=function(h){if(a.location!==void 0&&!a.options.prevent_drag&&!(h.xpos<t.l||h.xpos>t.r)&&!(h.ypos>t.b||h.ypos<t.t)&&!h.slider_drag){var s=a.options.style.lineWidth;a.options.direction==="vertical"?Math.abs(a.location-h.xpos)<s+5&&(a.dragging=!0,h.slider_drag=!0,h.preventDefault()):a.options.direction==="horizontal"?Math.abs(a.location-h.ypos)<s+5&&(a.dragging=!0,h.slider_drag=!0,h.preventDefault()):a.options.direction==="both"&&Math.abs(a.location.x-h.xpos)<s+5&&Math.abs(a.location.y-h.ypos)<s+5&&(a.dragging=!0,h.slider_drag=!0,h.preventDefault())}},this.plot.addListener("mdown",this.onmousedown),this.onmouseup=function(s){if(!!a.dragging){s.preventDefault(),a.dragging=!1;var s=document.createEvent("Event");s.source=a,s.initEvent("slidertag",!0,!0),a.options.direction==="both"?(s.location=a.location?JSON.parse(JSON.stringify(a.location)):void 0,s.position=a.position?JSON.parse(JSON.stringify(a.position)):void 0):(s.location=a.location,s.position=a.position),y.dispatchEvent(t,s);var s=document.createEvent("Event");s.initEvent("sliderdrag",!0,!0),a.options.direction==="both"?(s.location=a.location?JSON.parse(JSON.stringify(a.location)):void 0,s.position=a.position?JSON.parse(JSON.stringify(a.position)):void 0):(s.location=a.location,s.position=a.position),y.dispatchEvent(t,s)}},this.plot.addListener("mup",this.onmouseup)},menu:function(){var l=function(a){return function(){a.options.display=!a.options.display,a.plot.redraw()}}(this),t=function(a){return function(){var h=a.plot._Mx,s=h.stk[h.level],c=(s.xmax-s.xmin)/2+s.xmin,_=(s.ymax-s.ymin)/2+s.ymin;a.options.direction==="vertical"?a.set_position(c):a.options.direction==="horizontal"?a.set_position(_):a.options.direction==="both"&&a.set_position({x:c,y:_})}}(this);return{text:this.name+"...",menu:{title:"SLIDER",items:[{text:"Display",checked:this.options.display,style:"checkbox",handler:l},{text:"Center",handler:t}]}}},addListener:function(l,t){var a=this.plot._Mx,h=this,s=function(c){if(c.source===h)return t(c)};y.addEventListener(a,l,s,!1)},removeListener:function(l,t){var a=this.plot._Mx;y.removeEventListener(a,l,t,!1)},pair:function(l){if(!l){this.paired_slider=null;return}if(l.direction!==this.direction)throw"paired sliders must use the same direction setting";this.paired_slider=l},set_highlight:function(l){l!==this.highlight&&(this.highlight=l,this.plot.redraw())},set_position:function(l){if(!this.dragging){if(this.options.direction==="both"){if(this.position!==void 0&&this.position.x===l.x&&this.position.y===l.y)return}else if(this.position===l)return;this.set_highlight(!1);var t=this.plot._Mx;this.options.direction==="both"?this.position=l?JSON.parse(JSON.stringify(l)):void 0:this.position=l;var a;this.options.direction==="both"?a=y.real_to_pixel(t,this.position.x,this.position.y):a=y.real_to_pixel(t,this.position,this.position),this.options.direction==="vertical"?this.location=a.x:this.options.direction==="horizontal"?this.location=a.y:this.options.direction==="both"&&(this.location={x:a.x,y:a.y});var h=document.createEvent("Event");h.initEvent("slidertag",!0,!0),this.options.direction==="both"?(h.location=this.location?JSON.parse(JSON.stringify(this.location)):void 0,h.position=this.position?JSON.parse(JSON.stringify(this.position)):void 0):(h.location=this.location,h.position=this.position),y.dispatchEvent(t,h),this.plot.redraw()}},set_location:function(l){if(!this.dragging){if(this.options.direction==="both"){if(this.location!==void 0&&this.location.x===l.x&&this.location.y===l.y)return}else if(this.location===l)return;this.set_highlight(!1);var t=this.plot._Mx;this.options.direction==="both"?this.location=l?JSON.parse(JSON.stringify(l)):void 0:this.location=l;var a;this.options.direction==="both"?a=y.pixel_to_real(t,l.x,l.y):a=y.pixel_to_real(t,l,l),this.options.direction==="vertical"?this.position=a.x:this.options.direction==="horizontal"?this.position=a.y:this.options.direction==="both"&&(this.position={x:a.x,y:a.y});var h=document.createEvent("Event");h.initEvent("slidertag",!0,!0),this.options.direction==="both"?(h.location=this.location?JSON.parse(JSON.stringify(this.location)):void 0,h.position=this.position?JSON.parse(JSON.stringify(this.position)):void 0):(h.location=this.location,h.position=this.position),y.dispatchEvent(t,h),this.plot.redraw()}},get_position:function(){return this.position},get_location:function(){return this.location},refresh:function(l){if(!!this.options.display&&this.position!==void 0){var t=this.plot._Mx,a=l.getContext("2d");a.lineWidth=this.options.style.lineWidth,a.lineCap=this.options.style.lineCap,a.strokeStyle=this.options.style.strokeStyle!==void 0?this.options.style.strokeStyle:t.fg,(this.dragging||this.highlight)&&(a.lineWidth=Math.ceil(a.lineWidth*1.2));var h;if(this.options.direction==="both"?h=y.real_to_pixel(t,this.position.x,this.position.y):h=y.real_to_pixel(t,this.position,this.position),this.options.direction==="vertical"){if(h.x<t.l||h.x>t.r)return;this.location=h.x}else if(this.options.direction==="horizontal"){if(h.y<t.t||h.y>t.b)return;this.location=h.y}else if(this.options.direction==="both"){if(h.x<t.l||h.x>t.r||h.y<t.t||h.y>t.b)return;this.location.x=h.x,this.location.y=h.y}if(this.options.direction==="vertical"?(a.beginPath(),a.moveTo(this.location+.5,t.t),a.lineTo(this.location+.5,t.b),a.stroke()):this.options.direction==="horizontal"?(a.beginPath(),a.moveTo(t.l,this.location+.5),a.lineTo(t.r,this.location+.5),a.stroke()):this.options.direction==="both"&&(a.beginPath(),a.moveTo(t.l,this.location.y+.5),a.lineTo(t.r,this.location.y+.5),a.closePath(),a.moveTo(this.location.x+.5,t.t),a.lineTo(this.location.x+.5,t.b),a.stroke()),this.dragging||this.highlight||this.options.persistent_style){var s=2*t.text_h*this.options.slider_ID;if(this.options.direction==="vertical"){a.textBaseline="alphabetic",a.textAlign="left",a.fillStyle=this.options.style.textStyle!==void 0?this.options.style.textStyle:t.fg,a.font=t.font.font;var c=y.format_g(this.position,6,3,!0).trim(),_=a.measureText(c).width;this.location+2*_>t.r?(a.textAlign="right",a.fillText(c,this.location-15,t.t+40+s)):a.fillText(c,this.location+15,t.t+40+s),this.options.add_box&&(this.location+2*_>t.r?(a.rect(this.location-2*_,t.t+20+s,2*_,2*t.text_h),a.strokeStyle=this.options.style.strokeStyle,a.stroke()):(a.rect(this.location+.5,t.t+20+s,2*_,2*t.text_h),a.strokeStyle=this.options.style.strokeStyle,a.stroke()))}else if(this.options.direction==="horizontal"){a.textBaseline="alphabetic",a.textAlign="left",a.fillStyle=this.options.style.textStyle!==void 0?this.options.style.textStyle:t.fg,a.font=t.font.font;var c=y.format_g(this.position,6,3,!0).trim(),_=a.measureText(c).width;s=2*_*this.options.slider_ID,this.location-2*t.text_h>t.t?a.fillText(c,t.l+20+s,this.location-5):a.fillText(c,t.l+20+s,this.location+5+t.text_h),this.options.add_box&&(this.location-2*t.text_h>t.t?(a.rect(t.l+15+s,this.location-2*t.text_h,2*_,2*t.text_h),a.strokeStyle=this.options.style.strokeStyle,a.stroke()):(a.rect(t.l+15+s,this.location,2*_,2*t.text_h),a.strokeStyle=this.options.style.strokeStyle,a.stroke()))}else this.options.direction==="both";if(this.paired_slider)if(this.options.direction==="vertical"){var g=this.position-this.paired_slider.position,P=this.location-this.paired_slider.location,U=t.t+Math.round((t.b-t.t)/2);y.textline(t,this.location,U,this.paired_slider.location,U,{mode:"dashed",on:3,off:3}),a.textBaseline="alphabetic",a.textAlign="center",a.fillStyle=this.options.style.textStyle!==void 0?this.options.style.textStyle:t.fg,a.font=t.font.font;var c=y.format_g(g,6,3,!0);a.fillText(c,this.location-Math.round(P/2),U-5)}else if(this.options.direction==="horizontal"){var g=this.position-this.paired_slider.position,P=this.location-this.paired_slider.location,B=t.l+Math.round((t.r-t.l)/2);y.textline(t,B,this.location,B,this.paired_slider.location,{mode:"dashed",on:3,off:3}),a.textBaseline="alphabetic",a.textAlign="left",a.fillStyle=this.options.style.textStyle!==void 0?this.options.style.textStyle:t.fg,a.font=t.font.font;var c=y.format_g(g,6,3,!0);a.fillText(c,B+5,this.location-Math.round(P/2))}else this.options.direction==="both"}}},dispose:function(){this.plot.removeListener("mmove",this.onmousemove),document.removeEventListener("mouseup",this.onmouseup,!1),this.plot=void 0,this.position=void 0}},Sn.exports=r})()});var An=$e((Ns,Mn)=>{(function(){var p="version-PLACEHOLDER",y=Ti(),u=Fr(),r=vt(),l=Ii(),t=l.bluefile,a=l.matfile,h=pt(),s=mt(),c=tn(),_=nn(),g=cn(),P=pn(),U=Ni(),B=yn(),Z=vn(),oe=bn(),ae=kn(),Ae=En();function ue(i,e){if(!(this instanceof ue))return new ue.Plot(i,e)}ue.bluefile=t,ue.matfile=a,ue.m=h,ue.mx=s,ue.Layer1D=c,ue.Layer2D=_,ue.version=p;var be=`Keypress Table:
--------------
?       - Main help box.
A       - Toggle display x,y readouts:
          (absc) -> (index) -> (1/absc) -> (time).
B       - Toggle LM Drag Mode:
          (box) -> (horizontal) -> (vertical).
C       - Toggle controls.
K       - Show Marker.
L       - Toggle legend.
M       - Pops up main menu
R       - Toggle display specs (x/y readout)
S       - Toggle display specs and axes.
T       - Popup box with timecode value at mouse.
X       - In 1D mode, popup box with X value at mouse.
        - In 2D mode, toggle x-cut display.
Y       - In 1D mode, popup box with Y value at mouse.
        - In 2D mode, toggle y-cut display.
P       - In 2D mode, displays p-cuts along side and bottom.
F       - Toggle fullscreen.
Cntrl+I - Invert colors.`,Ee="To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the 'M' key to open the main menu.View the function of all keypresses by selecting 'Keypress Info' from the main menu.",Me={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};ue.browserIsCompatible=function(){var e=document.createElement("canvas"),d=!!e.getContext,f="ArrayBuffer"in window;return d&&f};var Be=function(i,e){if(!ue.browserIsCompatible())throw"Browser is not compatible";this._Mx=s.open(i);var d=this._Mx;return this._Gx=new Je,this._Gx.parent=i,this.mouseOnCanvas=!1,e||(e={}),v(this,e),this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}},this._refresh(),this.onmousemove=function(f){return function(w){var b=f._Mx,M=f._Gx,O=w.target.getBoundingClientRect(),q=w.offsetX===void 0?w.pageX-O.left-window.scrollX:w.offsetX,ee=w.offsetX===void 0?w.pageY-O.top-window.scrollY:w.offsetY,re=He(f,q,ee);if(M.retx=re.x,M.rety=re.y,!b.widget){Ce(f);var he=document.createEvent("Event");he.initEvent("mmove",!0,!0),he.originalEvent=w,he.xpos=q,he.ypos=ee,he.x=M.retx,he.y=M.rety;var le=s.dispatchEvent(b,he);if(!!le&&(M.cross&&(b.warpbox?(M.cross_xpos!==void 0&&s.rubberline(b,M.cross_xpos,b.t,M.cross_xpos,b.b),M.cross_ypos!==void 0&&s.rubberline(b,b.l,M.cross_ypos,b.r,M.cross_ypos),M.cross_xpos=void 0,M.cross_ypos=void 0):f.mouseOnCanvas&&(R(f),M.p_cuts&&M.lyr.length===1&&M.lyr[0].hcb.class===2&&!M.y_cut_press_on&&!M.x_cut_press_on&&N(f))),M.cntrls===2)){var he=document.createEvent("Event");he.initEvent("mtag",!0,!0),he.originalEvent=w,he.x=M.retx,he.y=M.rety,he.xpos=q,he.ypos=ee,s.dispatchEvent(b,he)}}}}(this),this.throttledOnMouseMove=h.throttle(this._Gx.scroll_time_interval,this.onmousemove),s.addEventListener(d,"mousemove",this.throttledOnMouseMove,!1),this.onmouseout=function(f){return function(w){var b=f._Gx,M=f._Mx;f.mouseOnCanvas&&(f.mouseOnCanvas=!1,b.autohide_readout&&Ce(f),b.autohide_panbars&&fe(f),M.prompt&&M.prompt.input.enableBlur())}}(this),s.addEventListener(d,"mouseout",this.onmouseout,!1),this.onmouseover=function(f){return function(w){var b=f._Gx,M=f._Mx;f.mouseOnCanvas=!0,b.autohide_panbars&&fe(f),M.prompt&&M.prompt.input.disableBlur()}}(this),s.addEventListener(d,"mouseover",this.onmouseover,!1),this.onmousedown=function(f){return function(w){w.preventDefault();var b=f._Mx,M=f._Gx;b.widget&&b.widget.type==="ONESHOT"&&(b.widget=null,f.refresh()),M.mouseClickActive=!0,s.ifevent(b,w);var O=document.createEvent("Event");O.initEvent("mdown",!0,!0),O.originalEvent=w,O.xpos=b.xpos,O.ypos=b.ypos,O.x=M.retx,O.y=M.rety,O.which=w.which;var q=s.dispatchEvent(b,O);if(!q)return!1;var ee=ze(f);if(ee.inPanRegion){if(w.preventDefault(),ee.command!==" "){var re=null,he=null;if(ee.command==="XPAN"?re=b.scrollbar_x:ee.command==="YPAN"&&(re=b.scrollbar_y),w.which===2)he={x:b.xpos,y:b.ypos},re!==void 0&&rt(he,re)&&o(f,ee.command);else if(ee.command!==" "&&(he={x:b.xpos,y:b.ypos},!rt(he,re)&&w.which===1)){me(f,ee.command,0,w);var le=function(){rt({x:b.xpos,y:b.ypos},re)?M.stillPanning&&(window.clearInterval(M.stillPanning),M.repeatPanning=void 0):me(f,ee.command,0,w)};M.stillPanning=window.setTimeout(function(){M.repeatPanning=window.setInterval(le,50)},250)}}}else if(w.which===1||w.which===3){var K=!1;if(M.legendBtnLocation&&(K=Ue(b.xpos,b.ypos,M.legendBtnLocation.x,M.legendBtnLocation.y,M.legendBtnLocation.width,M.legendBtnLocation.height)),M.legend)for(var j=T(f),xe=j.height/M.lyr.length,ce=0;ce<M.lyr.length;ce++){if(j.x<=b.xpos&&j.x+j.width>=b.xpos&&j.y<=b.ypos&&j.y+xe>=b.ypos)return b.mouseUpLatch=!0,S(f,ce),!1;j.y+=xe}if(M.lg_colorbar&&M.lyr[0].hcb.class===2&&(w.which===1||w.which===3)){var Ne=b.xpos,Oe=b.ypos,Te=M.cbb_top_x1,qe=M.cbb_top_y1,Ye=Te+M.cbb_width,X=qe,W=Te+1/2*M.cbb_width,de=qe-M.cbb_height,Ge=We(Ne,Oe,Te,qe,Ye,X,W,de);if(Ge){var Re=M.cmap;f.get_layer(0).img=void 0;for(var Ve=h.Mc.colormap[Re],ce=0;ce<Ve.colors.length;ce++)Ve.colors[ce].pos+=5;s.colormap(b,Ve.colors,16),f.refresh()}var Qe=M.cbb_bot_x1,_t=M.cbb_bot_y1,Ut=Qe+M.cbb_width,Lt=_t,Kt=Qe+1/2*M.cbb_width,Ht=_t+M.cbb_height,st=We(Ne,Oe,Qe,_t,Ut,Lt,Kt,Ht);if(st){var Re=M.cmap,Ve=h.Mc.colormap[Re];f.get_layer(0).img=void 0;for(var ce=0;ce<Ve.colors.length;ce++)Ve.colors[ce].pos-=5;s.colormap(b,Ve.colors,16),f.refresh()}}if(K)f.change_settings({legend:!M.legend});else{Ce(f);var Pt={opacity:0,return_value:"zoom"},Ct={opacity:.4,fill_color:b.hi,return_value:"select"};w.which===1?M.default_rubberbox_action==="zoom"?s.rubberbox(b,C(f,w.which),M.default_rubberbox_mode,Pt,Ct):M.default_rubberbox_action==="select"&&s.rubberbox(b,C(f,w.which),M.default_rubberbox_mode,Ct,Pt):w.which===3&&(M.default_rightclick_rubberbox_action==="zoom"?s.rubberbox(b,C(f,w.which),M.default_rightclick_rubberbox_mode,Pt,Ct):M.default_rightclick_rubberbox_action==="select"&&s.rubberbox(b,C(f,w.which),M.default_rightclick_rubberbox_mode,Ct,Pt))}}else if(w.which===2&&!M.nomenu){var O=document.createEvent("Event");O.initEvent("showmenu",!0,!0),O.originalEvent=w,O.x=b.x,O.y=b.y;var q=s.dispatchEvent(b,O);q&&m(f)}return!1}}(this),s.addEventListener(d,"mousedown",this.onmousedown,!1),this.ontouchstart=function(f){return function(w){if(w.preventDefault(),w.targetTouches.length===1)if(d.touchClear&&d.touches)window.clearTimeout(d.touchClear),f.unzoom(),je(f,s.SB_FULL,"XPAN"),je(f,s.SB_FULL,"YPAN");else{var b=w.targetTouches[0],M=b.target.getBoundingClientRect(),O={x:b.pageX-M.left-window.scrollX,y:b.pageY-M.top-window.scrollY};d.xpos=h.bound(O.x,0,d.width),d.ypos=h.bound(O.y,0,d.height);var q=ze(f,O);q.inPanRegion||(d.touches=w.targetTouches)}else w.targetTouches.length===2&&(d.touch_distance=h.touch_distance(w.targetTouches[0],w.targetTouches[1]))}}(this),s.addEventListener(d,"touchstart",this.ontouchstart,!1),this.ontouchmove=function(f){return function(w){var b=f._Mx,M=f._Gx,O=b.level;if(w.preventDefault(),w.targetTouches.length===1){var q=b.touches[0],he=q.target.getBoundingClientRect(),ee={x:q.pageX-he.left-window.scrollX,y:q.pageY-he.top-window.scrollY},re=w.targetTouches[0],he=re.target.getBoundingClientRect(),le={x:re.pageX-he.left-window.scrollX,y:re.pageY-he.top-window.scrollY},K=h.bound(le.x,0,b.width),j=h.bound(le.y,0,b.height),xe=K-b.xpos,ce=j-b.ypos;b.xpos=K,b.ypos=j;var Ne=ze(f,le);if(Ne.inPanRegion)return;var Oe=b.stk[O].xscl*xe,Te=b.stk[O].yscl*ce;b.origin===1?Oe*=-1:b.origin===2||b.origin===3?Te*=-1:b.origin===4&&(Oe*=-1,Te*=-1);var qe=b.stk[O].xmin+Oe,Ye=b.stk[O].xmax+Oe,X=b.stk[O].ymin+Te,W=b.stk[O].ymax+Te;qe>=M.xmin&&Ye<=M.xmax&&(b.stk[O].xmin=qe,b.stk[O].xmax=Ye),X>=M.ymin&&W<=M.ymax&&(b.stk[O].ymin=X,b.stk[O].ymax=W),M.cmode===M.basemode&&b.level===1&&(M.xmin=Math.min(M.xmin,qe),M.xmax=Math.max(M.xmax,Ye),M.ymin=Math.min(M.ymin,X),M.ymax=Math.max(M.ymax,W)),f.refresh()}else if(w.targetTouches.length===2){var de=h.touch_distance(w.targetTouches[0],w.targetTouches[1]),Ge=(1-b.touch_distance/de)*.05,Re=b.stk[O].xmax-b.stk[O].xmin,Ve=b.stk[O].ymax-b.stk[O].ymin,qe=b.stk[O].xmin+Ge*Re,Ye=b.stk[O].xmax-Ge*Re,X=b.stk[O].ymin+Ge*Ve,W=b.stk[O].ymax-Ge*Ve;b.stk[O].xmin=Math.max(M.xmin,qe),b.stk[O].xmax=Math.min(M.xmax,Ye),b.stk[O].ymin=Math.max(M.ymin,X),b.stk[O].ymax=Math.min(M.ymax,W),f.refresh()}}}(this),this.throttledOnTouchMove=h.throttle(this._Gx.scroll_time_interval,this.ontouchmove),s.addEventListener(d,"touchmove",this.throttledOnTouchMove,!1),this.ontouchend=function(f){return function(w){var b=f._Gx,M=f._Mx;w.preventDefault(),console.log("on touch end ",w.targetTouches.length),b.panning=void 0,f._Mx.scrollbar_x.action=0,f._Mx.scrollbar_y.action=0,M.touch_distance=void 0,s.widget_callback(M,w),M.touchClear=window.setTimeout(function(){M.touches=void 0,M.touchClear=void 0},100)}}(this),s.addEventListener(d,"touchend",this.ontouchend,!1),this.docMouseUp=function(f){return function(w){var b=f._Gx;if(w.which===1&&(b.panning=void 0,f._Mx.scrollbar_x.action=0,f._Mx.scrollbar_y.action=0),b.stillPanning&&(window.clearTimeout(b.stillPanning),b.stillPanning=void 0),b.repeatPanning&&(window.clearInterval(b.repeatPanning),b.repeatPanning=void 0),s.ifevent(f._Mx,w),d.mouseOver===!1&&b.mouseClickActive){var M=document.createEvent("Event");M.initEvent("mup",!0,!0),M.originalEvent=w,M.xpos=d.xpos,M.ypos=d.ypos,M.x=b.retx,M.y=b.rety,M.which=w.which;var O=s.dispatchEvent(d,M)}return b.mouseClickActive=!1,!1}}(this),document.addEventListener("mouseup",this.docMouseUp,!1),this.mouseup=function(f){return function(w){w.preventDefault();var b=f._Gx,M=f._Mx;s.ifevent(f._Mx,w);var O=document.createEvent("Event");O.initEvent("mup",!0,!0),O.originalEvent=w,O.xpos=M.xpos,O.ypos=M.ypos,O.x=b.retx,O.y=b.rety,O.which=w.which;var q=s.dispatchEvent(M,O);if(q){if(M.warpbox||M.widget||M.prompt)return;if(w.which===1){var ee=ft(f);if(ee.inCenterRegion)ee.command!==" "&&me(f,ee.command,0,w);else if(b.cntrls===1){b.xmrk=b.retx,b.ymrk=b.rety;var re=document.createEvent("Event");if(re.initEvent("mtag",!0,!0),re.originalEvent=w,re.x=b.xmrk,re.y=b.ymrk,re.xpos=w.x||w.clientX,re.ypos=w.y||w.clientY,re.w=void 0,re.h=void 0,re.shift=w.shiftKey,s.dispatchEvent(M,re)){var he=document.createEvent("Event");he.initEvent("mclick",!0,!0),he.originalEvent=w,he.xpos=re.xpos,he.ypos=re.ypos,he.x=re.x,he.y=re.y,he.which=1,s.dispatchEvent(M,he)}f.redraw()}}else if(w.which===2){if(b.nomenu){var O=document.createEvent("Event");O.initEvent("showmenu",!0,!0),O.originalEvent=w,O.x=w.x||w.clientX,O.y=w.y||w.clientY;var q=s.dispatchEvent(M,O);if(q){w.stopPropagation&&w.stopPropagation(),w.cancelBubble=!0,s.removeEventListener(M,"mousedown",f.onmousedown,!1);var le=function(){try{var xe=document.createEvent("Event");xe.initEvent("hidemenu",!0,!0),s.dispatchEvent(M,xe)&&s.addEventListener(M,"mousedown",f.onmousedown,!1)}finally{document.removeEventListener("mouseup",le,!1)}};document.addEventListener("mouseup",le,!1)}}}else w.which===3&&(w.preventDefault(),f.unzoom(1),f.refresh())}}}(this),s.addEventListener(d,"mouseup",this.mouseup,!1),this.mouseclick=function(f){return function(w){w.preventDefault();var b=f._Gx,M=f._Mx;return s.ifevent(f._Mx,w),!1}}(this),s.addEventListener(d,"click",this.mouseclick,!1),this.mousedblclick=function(f){return function(w){w.preventDefault();var b=f._Gx,M=f._Mx;s.ifevent(f._Mx,w);var O=document.createEvent("Event");return O.initEvent("mdblclick",!0,!0),O.originalEvent=w,O.xpos=M.xpos,O.ypos=M.ypos,O.x=b.retx,O.y=b.rety,O.which=w.which,s.dispatchEvent(M,O),!1}}(this),s.addEventListener(d,"dblclick",this.mousedblclick,!1),this.dragMouseDownHandler=function(f){return function(w){var b=f._Mx,M=f._Gx,O=ze(f);if(O.inPanRegion&&(w.preventDefault(),O.command!==" ")){var q;O.command==="XPAN"?q=b.scrollbar_x:O.command==="YPAN"&&(q=b.scrollbar_y);var ee={x:b.xpos,y:b.ypos};q!==void 0&&rt(ee,q)&&w.which===1&&(M.panning={axis:O.command,xpos:w.screenX,ypos:w.screenY,xmin:b.stk[b.level].xmin,xmax:b.stk[b.level].xmax,ymin:b.stk[b.level].ymin,ymax:b.stk[b.level].ymax})}}}(this),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),this.dragMouseMoveHandler=function(f){return function(w){var b=f._Gx;if(b.panning!==void 0)try{we(f,b.panning.axis,w)}catch(M){console.log("Error: "+M)}}}(this),this.throttledDragOnMouseMove=h.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),this.dragMouseUpHandler=function(f){return function(w){var b=f._Gx;w.which===1&&(b.panning=void 0)}}(this),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),this.onresize=function(f){return function(w){s.checkresize(f._Mx)&&f.refresh()}}(this),this.wheelHandler=function(f){var w=f._Mx,b=f._Gx,M=h.throttle(100,function(q){var ee;q.command==="XPAN"?ee=w.scrollbar_x:q.command==="YPAN"&&(ee=w.scrollbar_y),b.wheelscroll_mode_natural?ee.action=event.deltaY<0?s.SB_WHEELDOWN:s.SB_WHEELUP:ee.action=event.deltaY<0?s.SB_WHEELUP:s.SB_WHEELDOWN,ee.step=.1*ee.srange,ee.page=9*ee.step,s.scroll(w,ee,s.XW_COMMAND,void 0,ee),Xe(f,ee.smin,ee.smin+ee.srange,q.command.slice(0,1))}),O=h.throttle(100,function(){var q=b.wheelZoomPercent||.2;b.wheelscroll_mode_natural?event.deltaY>0&&(q=-1*q):event.deltaY<0&&(q=-1*q),b.wheelZoom==="x"?f.percent_zoom(q,1,!0):b.wheelZoom==="y"?f.percent_zoom(1,q,!0):f.percent_zoom(q,q,!0)});return function(q){s.ifevent(w,q);var ee=ze(f);f.mouseOnCanvas&&(q.preventDefault(),ee.inPanRegion?M(ee):b.wheelZoom&&O())}}(this),window.addWheelListener(window,this.wheelHandler,!1),window.addEventListener("resize",this.onresize,!1),e.nokeypress||(this.onkeypress=function(f){return function(w){var b=f._Mx,M=f._Gx;if(f.mouseOnCanvas){if(b.widget&&b.widget.type==="MENU")return;if(b.widget&&b.widget.type==="ONESHOT"){b.widget=null,f.refresh();return}var O=r.getKeyCode(w),q=document.createEvent("Event");q.initEvent("plotkeypress",!0,!0),q.originalEvent=w,q.keyCode=O,q.shiftKey=w.shiftKey,q.ctrlKey=w.ctrlKey,q.altKey=w.altKey,q.metaKey=w.metaKey;var ee=s.dispatchEvent(b,q);if(!ee)return;if(O===97)M.iabsc=(M.iabsc+1)%4,Ce(f);else if(O===108)f.change_settings({legend:!M.legend});else if(O===103)f.change_settings({grid:!M.grid});else if(O===98||O===2)b.warpbox&&(b.warpbox.mode==="box"?b.warpbox.mode="horizontal":b.warpbox.mode==="horizontal"?b.warpbox.mode="vertical":b.warpbox.mode="box",s.redraw_warpbox(b));else if(O===99)f.change_settings({xcnt:-1*M.cntrls});else if(O===114)f.change_settings({show_readout:!M.show_readout});else if(O===115)f.change_settings({specs:!M.specs});else if(O===112)f.change_settings({p_cuts:!M.p_cuts});else if(O===120){if(M.x_cut_press_on){for(var re=0;re<M.lyr.length;re++)if(M.lyr[re].xCut){M.lyr[re].xCut();break}}else if(M.xyKeys==="pop-up")M.x_pop_now?M.x_pop_now=!1:(et(f),M.x_pop_now=!0);else if(M.lyr[0].hcb.class===1&&M.xyKeys==="automatic")M.x_pop_now?M.x_pop_now=!1:(et(f),M.x_pop_now=!0);else if(M.xyKeys!=="disable"&&M.lyr[0].hcb.class===2&&!M.y_cut_press_on){for(var re=0;re<M.lyr.length;re++)if(M.lyr[re].xCut){M.lyr[re].xCut(He(f,0,b.ypos).y);break}}}else if(O===121){if(M.y_cut_press_on){for(var re=0;re<M.lyr.length;re++)if(M.lyr[re].yCut){M.lyr[re].yCut();break}}else if(M.xyKeys==="pop-up")M.y_pop_now?M.y_pop_now=!1:(it(f),M.y_pop_now=!0);else if(M.lyr[0].hcb.class===1&&M.xyKeys==="automatic")M.y_pop_now?M.y_pop_now=!1:(it(f),M.y_pop_now=!0);else if(M.xyKeys!=="disable"&&M.lyr[0].hcb.class===2&&!M.x_cut_press_on){for(var re=0;re<M.lyr.length;re++)if(M.lyr[re].yCut){M.lyr[re].yCut(He(f,b.xpos,0).x);break}}}else if(O===122)n(f);else if(O===116)tt(f);else if(O===109){if(!M.nomenu){var q=document.createEvent("Event");q.initEvent("showmenu",!0,!0),q.originalEvent=w,q.x=b.x,q.y=b.y;var ee=s.dispatchEvent(b,q);ee&&m(f)}}else O===63?s.message(b,Ee):O===102?(s.fullscreen(b),f.refresh()):O===9&&w.ctrlKey?f.change_settings({invert:null}):O===107&&(M.show_marker=!M.show_marker,f.redraw())}}}(this),r.setKeypressHandler(this.onkeypress)),this};Be.prototype={add_plugin:function(i,e){if(e===void 0&&(e=Number.MAX_VALUE),e<=0)throw"Invalid plugin zorder";var d=document.createElement("canvas");d.width=this._Mx.canvas.width,d.height=this._Mx.canvas.height,i.init(this,d),this._Gx.plugins.push({impl:i,zorder:e,canvas:d}),this._Gx.plugins.sort(function(f,w){return f.zorder-w.zorder}),this.refresh()},remove_plugin:function(i){for(var e=this._Gx.plugins.length;e--;)this._Gx.plugins[e].impl===i&&(i.dispose&&i.dispose(),this._Gx.plugins[e].canvas.parentNode&&this._Gx.plugins[e].canvas.parentNode.removeElement(this._Gx.plugins[e].canvas),this._Gx.plugins.splice(e,1));this._Gx.plugins.sort(function(d,f){return d.zorder-f.zorder}),this.refresh()},addListener:function(i,e){var d=this._Mx;s.addEventListener(d,i,e,!1)},removeListener:function(i,e){var d=this._Mx;s.removeEventListener(d,i,e,!1)},change_settings:function(i){for(var e=this._Gx,d=this._Mx,f=0;f<e.lyr.length;f++)e.lyr[f].change_settings(i);if(i.xyKeys!==void 0&&(i.xyKeys===null?e.xyKeys="automatic":e.xyKeys=i.xyKeys),i.grid!==void 0&&(i.grid===null?e.grid=!e.grid:e.grid=i.grid),i.gridBackground!==void 0&&(e.gridBackground=i.gridBackground),i.gridStyle!==void 0&&(e.gridStyle=i.gridStyle),i.wheelZoom!==void 0&&(e.wheelZoom=i.wheelZoom),i.wheelZoomPercent!==void 0&&(e.wheelZoomPercent=i.wheelZoomPercent),i.autol!==void 0&&(e.autol=i.autol),i.index!==void 0&&i.index!==e.index){i.index===null?e.index=!e.index:e.index=i.index,e.index&&e.iabsc!==1?e.iabsc=1:!e.index&&e.iabsc===1&&(e.iabsc=0);var w,b;Le(this,{get_data:!1},w,b),this.unzoom()}i.all!==void 0&&(i.all===null?e.all=!e.all:e.all=i.all),i.show_x_axis!==void 0&&(i.show_x_axis===null?e.show_x_axis=!e.show_x_axis:e.show_x_axis=i.show_x_axis,e.specs=e.show_x_axis||e.show_y_axis||e.show_readout),i.show_y_axis!==void 0&&(i.show_y_axis===null?e.show_y_axis=!e.show_y_axis:e.show_y_axis=i.show_y_axis,e.specs=e.show_x_axis||e.show_y_axis||e.show_readout),i.show_readout!==void 0&&(i.show_readout===null?e.show_readout=!e.show_readout:e.show_readout=i.show_readout,e.specs=e.show_x_axis||e.show_y_axis||e.show_readout),i.specs!==void 0&&(i.specs===null?e.specs=!e.specs:e.specs=i.specs,e.specs?(e.show_x_axis=!0,e.show_y_axis=!0,e.show_readout=!0):(e.show_x_axis=!1,e.show_y_axis=!1,e.show_readout=!1)),i.xcnt!==void 0&&(i.xcnt==="leftmouse"?e.cntrls=1:i.xcnt==="continuous"?e.cntrls=2:i.xcnt==="disable"&&e.cntrls>0||i.xcnt==="enable"&&e.cntrls<0?e.cntrls=-1*e.cntrls:e.cntrls=i.xcnt),i.legend!==void 0&&(i.legend===null?e.legend=!e.legend:e.legend=i.legend),i.pan!==void 0&&(i.pan===null?e.pan=!e.pan:e.pan=i.pan),i.cross!==void 0&&(i.cross===null?e.cross=!e.cross:e.cross=i.cross,e.cross?(e.cross_xpos=void 0,e.cross_ypos=void 0,!d.warpbox&&this.mouseOnCanvas&&R(this)):(e.cross_xpos!==void 0&&s.rubberline(d,e.cross_xpos,d.t,e.cross_xpos,d.b),e.cross_ypos!==void 0&&s.rubberline(d,d.l,e.cross_ypos,d.r,e.cross_ypos),e.cross_xpos=void 0,e.cross_ypos=void 0));var M,O=i.cmode===void 0?"":i.cmode;typeof O=="string"?(O=O+"",M=O.toUpperCase()):M=O,i.cmode!==void 0&&((M==="MA"||M==="INMA"||M==="ABMA"||M==="__MA"||M==="MAGNITUDE"||M===1)&&(M=1),(M==="PH"||M==="INPH"||M==="ABPH"||M==="__PH"||M==="PHASE"||M===2)&&(M=2),(M==="RE"||M==="INRE"||M==="ABRE"||M==="__RE"||M==="REAL"||M===3)&&(M=3),(M==="IM"||M==="INIM"||M==="ABIM"||M==="__IM"||M==="IMAGINARY"||M===4)&&(M=4),(M==="LO"||M==="D1"||M==="INLO"||M==="IND1"||M==="ABIM"||M==="ABD1"||M==="__LO"||M==="__D1"||M==="10*LOG10"||M===6)&&(M=6),(M==="L2"||M==="D2"||M==="INL2"||M==="IND2"||M==="ABLO"||M==="ABD2"||M==="__L2"||M==="__D2"||M==="20*LOG10"||M===7)&&(M=7),(M==="RI"||M==="IR"||M==="INRI"||M==="INIR"||M==="ABRI"||M==="ABIR"||M==="__RI"||M==="__IR"||M==="IMAG/REAL"||M==="REAL/IMAG"||M===5)&&(e.index?h.log.error("Imag/Real mode not permitted in INDEX mode"):M=5),Q(this,M)),i.phunits!==void 0&&te(this,i.phunits),i.rubberbox_action!==void 0&&(e.default_rubberbox_action=i.rubberbox_action),i.rubberbox_mode!==void 0&&(e.default_rubberbox_mode=i.rubberbox_mode),i.rightclick_rubberbox_action!==void 0&&(e.default_rightclick_rubberbox_action=i.rightclick_rubberbox_action),i.rightclick_rubberbox_mode!==void 0&&(e.default_rightclick_rubberbox_mode=i.rightclick_rubberbox_mode),i.wheelscroll_mode_natural!==void 0&&(e.wheelscroll_mode_natural=i.wheelscroll_mode_natural),i.colors!==void 0&&(i.colors.fg||(i.colors.fg=d.fg),i.colors.bg||(i.colors.bg=d.bg),s.setbgfg(d,i.colors.bg,i.colors.fg,d.xi)),i.cmap!==void 0&&(i.cmap===null?e.cmode===2?e.cmap=2:e.cmap=1:e.cmap=i.cmap,Ze(this,e.cmap)),i.yinv!==void 0&&(i.yinv?d.origin=4:d.origin=1),i.rasterSmoothing!==void 0&&(i.rasterSmoothing===null?e.rasterSmoothing=!e.rasterSmoothing:e.rasterSmoothing=i.rasterSmoothing),i.fillStyle!==void 0&&(e.fillStyle=i.fillStyle),i.invert!==void 0&&(i.invert===null?s.invertbgfg(d):i.invert===!0?s.setbgfg(this,"white","black"):s.setbgfg(this,"black","white")),i.nomenu!==void 0&&(i.nomenu===null?e.nomenu=!e.nomenu:e.nomenu=i.nomenu),i.ymax!==void 0&&(i.ymax===null?(e.autoy=e.autoy|2,e.panymax=void 0,Le(this,{}),e.ymax=e.panymax):(e.autoy=e.autoy&13,e.ymax=i.ymax,Xe(this,d.stk[0].ymin,i.ymax,"Y"),this.redraw())),i.ymin!==void 0&&(i.ymin===null?(e.autoy=e.autoy|1,e.panymin=void 0,Le(this,{}),e.ymin=e.panymin):(e.autoy=e.autoy&14,e.ymin=i.ymin,Xe(this,i.ymin,d.stk[0].ymax,"Y"),this.redraw())),i.autoy!==void 0&&(e.autoy=i.autoy,(e.autoy&1)!==0&&(e.ymin=void 0),(e.autoy&2)!==0&&(e.ymax=void 0)),i.xmin!==void 0&&(Xe(this,i.xmin,d.stk[0].xmax,"X"),e.autox=e.autox&2,this.redraw()),i.xmax!==void 0&&(Xe(this,d.stk[0].xmin,i.xmax,"X"),e.autox=e.autox&1,this.redraw()),i.zmin!==void 0&&(e.zmin=i.zmin,e.autoz=e.autoz&2),i.zmax!==void 0&&(e.zmax=i.zmax,e.autoz=e.autoz&1),i.autoz!==void 0&&(e.autoz=i.autoz,(e.autoz&1)!==0&&(e.zmin=void 0),(e.autoz&2)!==0&&(e.zmax=void 0)),i.note!==void 0&&(e.note=i.note),i.lg_colorbar!==void 0&&(e.lg_colorbar=!e.lg_colorbar),i.p_cuts!==void 0&&(i.p_cuts===null?e.p_cuts=!e.p_cuts:e.p_cuts=i.p_cuts),i.xcut_now!==void 0&&(e.xcut_now=!e.xcut_now),i.ycut_now!==void 0&&(e.ycut_now=!e.ycut_now),this.refresh(),i.pan!==void 0&&Ce(this)},reread:function(){for(var i=this._Gx,e=[],d=0;d<i.lyr.length;d++)e[d]=i.lyr[d];var f=i.HCB.slice(),w=y.clone(i.HCB_UUID);this.deoverlay();for(var b=0;b<f.length;b++)this.overlay_bluefile(w[f[b]]);for(var M=0;M<i.lyr.length;M++)i.lyr[M].symbol=e[M].symbol,i.lyr[M].radius=e[M].radius;this.refresh();var O=document.createEvent("Event");O.initEvent("reread",!0,!0),s.dispatchEvent(this._Mx,O)},cleanup:function(){},reload:function(i,e,d,f){var w=this._Mx,b=this._Gx,M=-1;if(y.has(b.HCB_UUID,i)&&(M=this.get_lyrn(i)),M<0||M>=b.lyr.length){if(typeof i=="number")throw"reload requires use the layer uuid returned by overlay and no longer supports layer indexes";return}if(b.lyr[M].reload!==void 0){var O=b.lyr[M].reload(e,d);w.level===0&&Le(this,{get_data:!1},O.xmin,O.xmax),f?this._refresh():this.refresh()}},rescale:function(){var i=this._Mx;i.level===0&&Le(this,{get_data:!1},void 0,void 0),this.refresh()},headermod:function(i,e){this.change_settings(e),this.push(i,[],e)},push:function(i,e,d,f,w){var b=this._Mx,M=this._Gx,O=-1;if(y.has(M.HCB_UUID,i)&&(O=this.get_lyrn(i)),O<0||O>=M.lyr.length){if(typeof i=="number")throw"push requires use the layer uuid returned by overlay and no longer supports layer indexes";return}if(M.lyr[O].push!==void 0&&M.lyr[O].display!==!1){var q=d;if(d){var q=JSON.parse(JSON.stringify(d));e.length===0&&(q.xmin=b.stk[0].xmin,q.xmax=b.stk[0].xmax,q.ymin=b.stk[0].ymin,q.ymax=b.stk[0].ymax)}var ee=M.lyr[O].push(e,q,f);b.level===0&&ee&&Le(this,{get_data:!1}),w?this._refresh():this.refresh()}},overlay_array:function(i,e,d){h.log.debug("Overlay array");var f=h.initialize(i,e);return this.overlay_bluefile(f,d)},overlay_pipe:function(i,e){h.log.debug("Overlay pipe"),i||(i={}),i.pipe=!0;var d=h.initialize(null,i);return this.overlay_bluefile(d,e)},overlay_websocket:function(i,e,d){h.log.debug("Overlay websocket: "+i);var f=new WebSocket(i,"plot-data");f.binaryType="arraybuffer";var w=this;e||(e={}),e.pipe=!0;var b=h.initialize(null,e,()=>f.close());b.ws=f;var M=this.overlay_bluefile(b,d);return f.onopen=function(O){},f.onmessage=function(O){return function(q){if(q.data instanceof ArrayBuffer){var ee=b.createArray(q.data);w.push(M,ee)}else if(typeof q.data=="string"){var re=w._Gx,he=re.lyr[M].hcb;he||h.log.warning("Couldn't find header for layer "+M);var le=JSON.parse(q.data);w.push(M,[],le)}}}(f),M},overlay_wpipe:function(i,e,d,f){let w=this,b={hcb:null,layer_n:null,plotLayerOptions:null,ws:null};return b.ws=new WebSocket(i,"pipe-data"),b.ws.binaryType="arraybuffer",h.log.debug("Overlay websocket: "+i),b.ws.onopen=function(M){b.ws.send(JSON.stringify({event:"open",payload:{set_buffer:{fps:f}}}))},b.ws.onmessage=function(M){return function(O){if(typeof O.data=="string"){var q=JSON.parse(O.data);if(q.event==="version")h.log.debug("server: "+q.payload.server+`
xm-ver: `+q.payload["xm-ver"]);else if(q.event==="header")b.hcb=q.payload,b.hcb.ws=b.ws,b.hcb.ystart=0,b.hcb.class=Math.floor(b.hcb.type/1e3);else if(q.event==="out_buffer"){b.layer_n!==null&&(w.remove_layer(b.layer_n),b.layer_n=null);var ee={framesize:q.payload.framesize,cmode:q.payload.mode,xcmp:q.payload.xcmp,ycmp:q.payload.ycmp,fps:q.payload.fps};b.plotLayerOptions=d!=null?Object.assign(ee,d):ee,e!=null&&(b.hcb=Object.assign(b.hcb,e)),b.hcb.pipe=!0;try{b.hcb=h.initialize(null,b.hcb,()=>b.ws.close()),b.layer_n=w.overlay_bluefile(b.hcb,b.plotLayerOptions)}catch{b.ws.close()}}else if(q.event==="error")h.log.error(q);else if(q.event==="eof"){b.ws.close();return}else q.event==="abscissa_update"?b.plotLayerOptions.layerType===c?b.hcb.xstart+=q.payload.skip_count*b.hcb.xdelta:b.plotLayerOptions.layerType===_&&(b.hcb.ystart+=q.payload.skip_count*b.hcb.ydelta):(h.log.error('Received unexpected pipe-data event "'+q.event+'"'),b.ws.close())}else if(b.plotLayerOptions.layerType===c){var re=b.hcb.createArray(O.data);w.push(b.layer_n,re)}else if(b.plotLayerOptions.layerType===_)for(var he=O.data.byteLength/b.hcb.bpe,le=0;le<he;++le){var K=le*b.hcb.bpe,j=b.hcb.subsize*b.hcb.spa,xe=b.hcb.createArray(O.data,K,j);w.push(b.layer_n,xe)}}}(b.ws),b.layer_n},overlay_href:function(i,e,d,f){var w=this,b=[];return i.split("|").forEach(function(M){var O=w.overlay_href_single(M.trim(),e,d,f);b.push(O)}),b.length===0?null:b.length===1?b[0]:b},overlay_href_single:function(i,e,d,f){var w=this.reg_hcb(null);h.log.debug("Overlay href: "+i+" "+w);try{this.show_spinner();var b=function(ee,re){return function(he){try{if(!he)h.log.error("Failed to load data: "+i);else{he._uuid=w,r.update(he,f);var le;i.endsWith(".mat")?le=ee.overlay_matfile(he,d):le=ee.overlay_bluefile(he,d),re&&re(he,le)}}finally{ee.hide_spinner()}}}(this,e),M=function(ee,re){return function(he,le){try{var K=null;he?(he._uuid=w,r.update(he,f),le==="SDS"?he.file_type===1e3?d.layerType="1DSDS":d.layerType="2DSDS":d.layerType=le,K=ee.overlay_bluefile(he,d),re&&re(he,K)):h.log.error("Failed to load data: "+i)}finally{ee.hide_spinner()}}}(this,e),O,q;if(i.endsWith(".mat")?(O=new a.MatFileReader,q=O.read_http(i,b)):d&&(d.layerType==="2DSDS"||d.layerType==="1DSDS"||d.layerType==="SDS")?(q=new XMLHttpRequest,q.open("GET",i,!0),q.responseType="",q.onload=function(ee){var re=JSON.parse(q.responseText);re&&(re.url=i),M(re,d.layerType)},q.onerror=function(ee){},q.send(null)):(O=new t.BlueFileReader,q=O.read_http(i,b)),q){let ee=this.get_layer_n(w);this._Gx.HCB[ee].cleanup=()=>q.abort()}}catch{this.hide_spinner()}return w},show_spinner:function(){this._Gx.spinner||(Me.color=this._Mx.xwfg,this._Gx.spinner=new u(Me).spin(this._Gx.parent))},hide_spinner:function(i){var e=0;y.mapObject(this._Gx.HCB_UCB,(d,f)=>{f===null&&(e+=1)}),(e===0||i)&&(this._Gx.spinner&&this._Gx.spinner.stop(),this._Gx.spinner=void 0)},reg_hcb:function(i){var e=r.uuidv4();return this._Gx.HCB_UUID[e]=i,e},get_lyrn:function(i){return y.indexOf(this._Gx.HCB,i)},get_lyr_uuid:function(i){return this._Gx.HCB[i]},get_hcb_by_uuid:function(i){return this._Gx.HCB[i]},get_hcb_by_lyrn:function(i){return this.get_hcb_by_uuid(this.get_lyr_uuid(i))},add_layer:function(i){var e=this._Gx,d=this._Mx,f=document.createEvent("Event");f.initEvent("lyradd",!0,!0),f.name=i.name,f.layer=i;var w=s.dispatchEvent(d,f);return w?(e.lyr.push(i),i.index=e.lyr.length-1,!0):!1},get_layer:function(i){var e=this._Gx;return y.has(e.HCB_UUID,i)&&(i=this.get_lyrn(i)),i>=0&&i<e.lyr.length?e.lyr[i]:null},overlay_matfile:function(i,e){return h.log.debug("Overlay matfile: "+i.file_name),this.overlay_array(i.dview)},overlay_bluefile:function(i,e){h.log.debug("Overlay bluefile: "+i.file_name);var d=this._Mx,f=this._Gx,w=0;e=e||{};var b=f.HCB.length===0,M=i._uuid;if(M){if(!y.has(f.HCB_UUID,M))return;f.HCB_UUID[M]=i}else M=this.reg_hcb(i);this._Gx.HCB.push(M),f.HCB.length===1&&k(this,!0);var O=null;if(e.layerType===void 0?i.class===1?O=c.overlay(this,i,e):i.class===2&&(O=_.overlay(this,i,e)):e.layerType==="1D"?O=c.overlay(this,i,e):e.layerType==="2D"?O=_.overlay(this,i,e):e.layerType==="1DSDS"?O=g.overlay(this,i,e):e.layerType==="2DSDS"?O=P.overlay(this,i,e):O=e.layerType.overlay(this,i,e),O===null||O.length===0){h.log.debug("failed to create layers");return}if(e.user_data&&O.forEach(function(he){he.user_data=e.user_data}),Q(this,f.cmode),!b&&!e.expand){var q=this;O.forEach(function(he){ne(q,he)})}else if(y.size(f.HCB_UUID)===0)k(this,!1);else{f.basemode=f.cmode;var ee,re;(f.autox&1)===0&&(ee=f.xmin),(f.autox&2)===0&&(re=f.xmax),Le(this,{get_data:!0},ee,re),d.level=0,(f.autox&1)!==0&&(f.xmin=d.stk[0].xmin),(f.autox&2)!==0&&(f.xmax=d.stk[0].xmax),(f.autoy&1)!==0&&(f.ymin=d.stk[0].ymin),(f.autoy&2)!==0&&(f.ymax=d.stk[0].ymax),d.resize=!0,f.lyr[0].preferred_origin?d.origin=f.lyr[0].preferred_origin:d.origin=1}return D(this),this.refresh(),M},load_files:function(i,e){for(var d=function(M){return function(O){M.overlay_bluefile(O,e)}}(this),f=0;f<i.length;f++){var w=i[f],b=new t.BlueFileReader;b.read(w,d)}},deoverlay:function(i){var e=this._Gx,d=this._Mx;if(y.has(e.HCB_UUID,i))this.remove_layer(i);else if(e.HCB.length>0)if(i===void 0)for(var f=e.HCB.length-1;f>=0;f--)this.remove_layer(this.get_lyr_uuid(f));else if(i<0){var f=e.HCB.length+i;if(f<0)return;this.remove_layer(this.get_lyr_uuid(f))}else i<e.HCB.length&&this.remove_layer(this.get_lyr_uuid(i));y.size(e.HCB_UUID)===0&&(k(this,!1),Le(this,{}))},remove_layer:function(i){var e=this._Gx,d=e.HCB_UUID[i];delete e.HCB_UUID[i],d&&y.isFunction(d.cleanup)&&d.cleanup();var f="";d&&(f=d.file_name);var w=this.get_lyrn(i);if(w>=0&&w<e.HCB.length){e.HCB[w]=null;for(var b=w;b<e.HCB.length-1;b++)e.HCB[b]=e.HCB[b+1];e.HCB.length-=1}if(d&&w>=0)for(var b=e.lyr.length-1;b>=0;b--)e.lyr[b].hcb===d&&E(this,b);D(this),this.refresh();var M=document.createEvent("Event");M.initEvent("file_deoverlayed",!0,!0),f!==""&&(M.fileName=f),s.dispatchEvent(this._Mx,M)},pixel_zoom:function(i,e,d,f,w){var b=He(this,i,e),M=He(this,d,f);this.zoom(b,M,w)},percent_zoom:function(i,e,d){var f=this._Mx,w=this._Gx,b=0;Math.abs(i)<1&&(b=Math.abs(f.stk[f.level].xmax-f.stk[f.level].xmin),b=b*i/2);var M=0;Math.abs(e)<1&&(M=Math.abs(f.stk[f.level].ymax-f.stk[f.level].ymin),M=M*e/2);var O={x:Math.max(f.stk[f.level].xmin+b,w.panxmin),y:Math.max(f.stk[f.level].ymin+M,w.panymin)},q={x:Math.min(f.stk[f.level].xmax-b,w.panxmax),y:Math.min(f.stk[f.level].ymax-M,w.panymax)};this.zoom(O,q,d)},zoom:function(i,e,d){var f=this._Mx,w=this._Gx;if(!(f.level>=9)){if(i.x===void 0&&(i.x=f.stk[f.level].xmin),i.y===void 0&&(i.y=f.stk[f.level].ymin),e.x===void 0&&(e.x=f.stk[f.level].xmax),e.y===void 0&&(e.y=f.stk[f.level].ymax),e.x<i.x){var b=e.x;e.x=i.x,i.x=b}if(e.y<i.y){var M=e.y;e.y=i.y,i.y=M}var O={};O.xscl=f.stk[f.level].xscl,O.yscl=f.stk[f.level].yscl,O.xmin=i.x,O.xmax=e.x,O.ymin=i.y,O.ymax=e.y,w.index&&(O.xmin=Math.min(O.xmin/w.xdelta),O.xmax=Math.min(O.xmax/w.xdelta)),!d||!w.inContinuousZoom?(f.stk.push(O),f.level=f.stk.length-1):f.stk[f.level]=O,w.inContinuousZoom=d,this.inZoom=!0;var q=document.createEvent("Event");q.initEvent("zoom",!0,!0),q.level=f.level,q.inContinuousZoom=w.inContinuousZoom,q.xmin=f.stk[f.level].xmin,q.ymin=f.stk[f.level].ymin,q.xmax=f.stk[f.level].xmax,q.ymax=f.stk[f.level].ymax,s.dispatchEvent(f,q),this.inZoom=!1,this.refresh()}},unzoom:function(i){var e=this._Mx,d=this._Gx;if(e.level!==0){for(i||(i=e.stk.length);i>0&&e.level!==0;)e.stk.pop(),e.level=e.stk.length-1,i-=1;e.level===0&&this.rescale(),d.inContinuousZoom=!1,this.inZoom=!0;var f=document.createEvent("Event");f.initEvent("unzoom",!0,!0),f.level=e.level,f.xmin=e.stk[e.level].xmin,f.ymin=e.stk[e.level].ymin,f.xmax=e.stk[e.level].xmax,f.ymax=e.stk[e.level].ymax,s.dispatchEvent(e,f),this.inZoom=!1,this.refresh()}},expand_full:function(i,e){i&&(Xe(this,this._Gx.panxmin,this._Gx.panxmax,"X"),this._refresh()),e&&Xe(this,this._Gx.panymin,this._Gx.panymax,"Y"),this.refresh()},set_view:function({xmin:i,xmax:e,ymin:d,ymax:f}){var w=this._Mx,b=this._Gx,M=w.level;i!==void 0&&(w.stk[M].xmin=i),e!==void 0&&(w.stk[M].xmax=e),d!==void 0&&(w.stk[M].ymin=d),f!==void 0&&(w.stk[M].ymax=f),this.refresh()},get_view:function(){var i=this._Mx,e=this._Gx,d=i.level;return{xmin:i.stk[d].xmin,xmax:i.stk[d].xmax,ymin:i.stk[d].ymin,ymax:i.stk[d].ymax}},mimic:function(i,e){var d=this;if(!e)throw"mimic must be called with at least one event mask";if(this.unmimic(i),e.zoom){var f=function(w){d.inZoom||d.zoom({x:w.xmin,y:w.ymin},{x:w.xmax,y:w.ymax},w.inContinuousZoom)};i.addListener("zoom",f),this.mimicListeners.listeners.zoom=f}else if(e.xzoom){var f=function(b){d.inZoom||d.zoom({x:b.xmin,y:void 0},{x:b.xmax,y:void 0},b.inContinuousZoom)};i.addListener("zoom",f),this.mimicListeners.listeners.zoom=f}else if(e.yzoom){var f=function(b){d.inZoom||d.zoom({x:void 0,y:b.ymin},{x:void 0,y:b.ymax},b.inContinuousZoom)};i.addListener("zoom",f),this.mimicListeners.listeners.zoom=f}if(e.unzoom){var f=function(b){d.inZoom||b.level<d._Mx.level&&d.unzoom(d._Mx.level-b.level)};i.addListener("unzoom",f),this.mimicListeners.listeners.unzoom=f}if(e.pan||e.xpan){var f=function(b){d.inPan||Xe(d,b.xmin,b.xmax,"X")};i.addListener("xpan",f),this.mimicListeners.listeners.xpan=f}if(e.pan||e.ypan){var f=function(b){d.inPan||Xe(d,b.ymin,b.ymax,"Y")};i.addListener("ypan",f),this.mimicListeners.listeners.ypan=f}this.mimicListeners.other=i},unmimic:function(e){var e=this.mimicListeners.other;if(e){var d=this;Object.keys(this.mimicListeners.listeners).forEach(function(f){d.mimicListeners.listeners[f]&&e.removeListener(f,d.mimicListeners.listeners[f])})}this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}}},redraw:function(){var i=this._Gx,e=this._Mx,d=e.canvas.getContext("2d");i.plotData.valid?(d.drawImage(i.plotData,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2),z(this),i.cross_xpos=void 0,i.cross_ypos=void 0,!e.warpbox&&this.mouseOnCanvas&&R(this),(i.always_show_marker||i.show_marker)&&V(this)):this.refresh()},refresh:function(){if(!(!this._Gx.initialized||this._Gx.refresh_after_ctr>0)){var i=this;s.render(this._Mx,function(){i._refresh()})}},refresh_after:function(i){this._Gx.refresh_after_ctr+=1;try{i(this)}finally{this._Gx.refresh_after_ctr=Math.max(this._Gx.refresh_after_ctr-1,0),this._Gx.refresh_after_ctr===0&&this.refresh()}},enable_listeners:function(){var i=this._Mx;s.addEventListener(i,"mousedown",this.onmousedown,!1),s.addEventListener(i,"mousemove",this.throttledOnMouseMove,!1),window.addEventListener("mouseup",i.onmouseup,!1),window.addEventListener("keydown",i.onkeydown,!1),window.addEventListener("keyup",i.onkeyup,!1),window.addEventListener("resize",this.onresize,!1),document.addEventListener("mouseup",this.docMouseUp,!1),s.addEventListener(i,"mouseup",this.mouseup,!1),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),window.addEventListener("wheel",this.wheelHandler,!1),window.addEventListener("mousewheel",this.wheelHandler,!1),window.addEventListener("DOMMouseScroll",this.wheelHandler,!1),window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var i=this._Mx;s.removeEventListener(i,"mousedown",this.onmousedown,!1),s.removeEventListener(i,"mousemove",this.throttledOnMouseMove,!1),s.removeEventListener(i,"mouseup",this.mouseup,!1),window.removeEventListener("mouseup",i.onmouseup,!1),window.removeEventListener("keydown",i.onkeydown,!1),window.removeEventListener("keyup",i.onkeyup,!1),window.removeEventListener("resize",this.onresize,!1),document.removeEventListener("mouseup",this.docMouseUp,!1),window.removeEventListener("mousedown",this.dragMouseDownHandler,!1),window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.removeEventListener("mouseup",this.dragMouseUpHandler,!1),window.removeEventListener("wheel",this.wheelHandler,!1),window.removeEventListener("mousewheel",this.wheelHandler,!1),window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1),window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){s.checkresize(this._Mx)&&this.refresh()},addColorMaps:function(i){i.forEach(function(e){e.hasOwnProperty("name")&&h.Mc.colormap.push(e)})},_refresh:function(){var i=this._Mx,e=this._Gx,d=i.canvas.getContext("2d"),f=0;if(!e.hold){var w=i.font_width;if(i.font_scaled&&(w=Math.min(i.font_width,i.width/64)),s.set_font(i,w),e.pthk=i.text_w*1.5,e.specs){var b=!1;if(e.ylab===4&&(b=!0),e.show_y_axis===!0){if(i.l=i.text_w*6,b){var M=Math.abs(i.stk[0].ymin)>=31536e3||Math.abs(i.stk[0].ymax)>=31536e3;M&&(i.l=i.text_w*11)}}else i.l=1;e.pan===!0?i.r=i.width-(e.pthk+2*i.text_w):i.r=i.width-5,e.show_readout?(i.t=i.text_h*2,e.show_x_axis?i.b=i.height-i.text_h*4:i.b=i.height-i.text_h*3):e.x_scrollbar_location==="bottom"?(i.t=i.text_h*2,e.pan?e.show_x_axis?i.b=i.height-i.text_h*3:i.b=i.height-i.text_h*2:e.show_x_axis?i.b=i.height-i.text_h*2:i.b=i.height-5):(e.pan?i.t=e.pthk+2*i.text_w:i.t=1,e.show_x_axis?i.b=i.height-i.text_h*3/2:i.b=i.height-2),e.show_readout?e.pl=i.text_w*50:e.x_scrollbar_location==="bottom"?e.pl=i.l:e.pl=i.text_w*35,e.pr=Math.max(e.pl+i.text_w*9,i.r),e.show_readout||e.x_scrollbar_location==="bottom"?e.show_x_axis?e.pt=i.b+i.text_h+(i.height-i.b-i.text_h-e.pthk)/2:e.pt=i.b+(i.height-i.b-e.pthk)/2:e.pt=(i.t-e.pthk)/2,e.lbtn=i.text_h+i.text_w+2}else e.pan?(i.t=e.pthk+2*i.text_w,i.r=i.width-(e.pthk+i.text_w)):(i.t=1,i.r=i.width-2),i.b=i.height-2,i.l=1,e.pl=i.l,e.pr=i.r,e.pt=(i.t-e.pthk)/2,e.lbtn=0;if(e.pyl=i.r+(i.width-i.r-e.pthk)/2+1,e.lg_colorbar&&e.lyr[0].hcb.class===2){var O=i.r;i.r=O-100}if(e.p_cuts&&e.lyr.length===1&&e.lyr[0].hcb.class===2){e.cross=!0;var O=i.r;i.r=O-100;var q=i.b;i.b=q-100}e.xcut_now&&(i.canvas.width=e.x_box_w-1,i.canvas.height=e.x_box_h,i.r=e.x_box_w-1,i.l=0,i.b=e.x_box_h,i.t=0),e.ycut_now&&(i.canvas.width=e.y_box_h-1,i.canvas.height=e.y_box_w,i.r=e.y_box_h-1,i.l=0,i.b=e.y_box_w,i.t=0),(e.panymin===void 0||e.panymax===void 0)&&Le(this,{}),i.l=Math.floor(i.l),i.r=Math.ceil(i.r),i.t=Math.floor(i.t),i.b=Math.ceil(i.b);var ee=i.level;i.stk[ee].x1=i.l,i.stk[ee].y1=i.t,i.stk[ee].x2=i.r,i.stk[ee].y2=i.b,i.stk[ee].xscl=(i.stk[ee].xmax-i.stk[ee].xmin)/(i.r-i.l),i.stk[ee].yscl=(i.stk[ee].ymax-i.stk[ee].ymin)/(i.b-i.t);var re=He(this,i.xpos,i.ypos);e.retx=re.x,e.rety=re.y,(e.panning===0||e.panning!==0)&&(e.plotData.valid=!1,s.clear_window(i));var he=e.xlab,le=e.ylab;if(he===void 0&&(he=30),e.index&&(he=0),le===void 0){var K=e.lyr.length>0&&e.lyr[0].cx;e.cmode===1?le=28:e.cmode===2?le=e.plab:e.cmode===3&&K?le=21:e.cmode===4?le=22:e.cmode===5?(le=22,he=21):e.cmode===6?le=26:e.cmode===7?le=27:le=0}if(e.specs){if(e.sections===0){var j={grid:e.grid};e.panning===2&&(j.noxtlab=!0),e.show_x_axis||(j.noxtics=!0,j.noxtlab=!0,j.noxplab=!0),e.show_y_axis||(j.noytics=!0,j.noytlab=!0,j.noyplab=!0),e.specs&&!e.show_readout&&!e.pan&&(j.noyplab=!0,j.noxplab=!0),e.gridBackground&&(j.fillStyle=e.gridBackground),e.gridStyle&&(j.gridStyle=e.gridStyle),e.xmult&&(j.xmult=e.xmult),e.ymult&&(j.ymult=e.ymult),he===4&&(j.xtimecode=!0),le===4&&(j.ytimecode=!0),e.xlabel!==void 0&&(j.xlabel=e.xlabel),e.ylabel!==void 0&&(j.ylabel=e.ylabel),s.drawaxis(e,i,e.xdiv,e.ydiv,he,le,j)}var xe=e.lbtn-2;e.show_readout?(e.no_legend_button||(e.legend?(e.legendBtnLocation={x:i.width-e.lbtn,y:2,width:xe,height:xe},s.shadowbox(i,i.width-e.lbtn,2,xe,xe,1,-2,"L")):(e.legendBtnLocation={x:i.width-e.lbtn,y:2,width:xe,height:xe},s.shadowbox(i,i.width-e.lbtn,2,xe,xe,1,2,"L"))),Ce(this)):e.legendBtnLocation=null}else if(e.grid&&e.sections>=0){var j={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0};s.drawaxis(e,i,e.xdiv,e.ydiv,he,le,j)}ie(this),A(this,4),z(this),e.cross_xpos=void 0,e.cross_ypos=void 0,!i.warpbox&&this.mouseOnCanvas&&(R(this),!e.y_cut_press_on&&!e.x_cut_press_on&&e.lyr.length===1&&e.lyr[0].hcb.class===2&&N(this)),(e.always_show_marker||e.show_marker)&&V(this)}}};var ve=["Ma","Ph","Re","Im","IR","Lo","L2"],Ke=["(absc)","(indx)","(1/ab)","(dydx)"];function Ie(){this.xbuf=void 0,this.ybuf=void 0,this.offset=0,this.xstart=0,this.xdelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.size=0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.options={}}function Je(){this.initialized=!1,this.xptr=void 0,this.yptr=void 0,this.retx=0,this.rety=0,this.xmrk=0,this.ymrk=0,this.aretx=0,this.arety=0,this.xstart=0,this.xdelta=0,this.panxmin=0,this.panxmax=0,this.panymin=0,this.panymax=0,this.xmin=0,this.xmax=0,this.xmult=void 0,this.ymin=0,this.ymax=0,this.ymult=void 0,this.zmin=void 0,this.zmax=void 0,this.zoff=0,this.dbmin=0,this.pxscl=0,this.pyscl=0,this.pmt=0,this.note="",this.format="",this.pl=0,this.pr=0,this.pt=0,this.pb=0,this.px1=0,this.px2=0,this.py1=0,this.py2=0,this.pyl=0,this.pthk=0,this.modlayer=0,this.modsource=0,this.modified=!1,this.modmode=0,this.xdiv=0,this.ydiv=0,this.all=!1,this.expand=!1,this.cross=!1,this.grid=!0,this.gridBackground=void 0,this.index=!1,this.pan=!0,this.specs=!0,this.legend=!0,this.xdata=!1,this.show_x_axis=!0,this.show_y_axis=!0,this.show_readout=!0,this.hide_note=!1,this.autohide_readout=!1,this.autohide_panbars=!1,this.panning=void 0,this.panmode=0,this.hold=!1,this.sections=0,this.iysec=0,this.nsec=0,this.isec=0,this.xlab=void 0,this.xlabel=void 0,this.ylab=void 0,this.ylabel=void 0,this.xcompression=0,this.default_rubberbox_action="zoom",this.default_rubberbox_mode="box",this.wheelscroll_mode_natural=!0,this.scroll_time_interval=10,this.repeatPanning=void 0,this.stillPanning=void 0,this.autol=-1,this.lineSmoothing=!1,this.rasterSmoothing=!1,this.wheelZoom=!1,this.wheelZoomPercent=.2,this.inContinuousZoom=!1,this.lyr=[],this.HCB=[],this.HCB_UUID={},this.plugins=[],this.plotData=document.createElement("canvas"),this.plotData.valid=!1,this.lg_colorbar=!1,this.cbb_top_x1=0,this.cbb_top_y1=0,this.cbb_bot_x1=0,this.cbb_bot_y1=0,this.cbb_width=0,this.cbb_height=0,this.p_cuts=!1,this.x_box_x=0,this.x_box_y=0,this.x_box_h=0,this.x_box_w=0,this.y_box_x=0,this.y_box_y=0,this.y_box_h=0,this.y_box_w=0,this.p_cuts_xpos=void 0,this.p_cuts_ypos=void 0,this.x_cut_data=[],this.y_cut_data=[],this.xcut=void 0,this.xcut_layer=void 0,this.x_cut_press_on=!1,this.xcut_now=!1,this.ycut=void 0,this.ycut_layer=void 0,this.y_cut_press_on=!1,this.ycut_now=!1,this.ylabel_stash=void 0,this.cut_stash=void 0,this.element1=void 0,this.element2=void 0,this.xyKeys="automatic",this.x_pop_now=!1,this.y_pop_now=!1,this.old_drawmode=void 0,this.old_autol=void 0,this.refresh_after_ctr=0}function Ze(i,e){var d=i._Gx,f=i._Mx;if(Array.isArray(e)){var w={name:"Custom",colors:e};h.Mc.colormap[h.Mc.colormap.length-1].name==="Custom"?h.Mc.colormap[h.Mc.colormap.length-1].colors=e:h.Mc.colormap.push(w),d.cmap=h.Mc.colormap.length-1}else if(typeof e=="string"){d.cmap=-1;for(var b=0;b<h.Mc.colormap.length;b++)if(h.Mc.colormap[b].name===e){d.cmap=b;break}}else d.cmap=e;d.ncolors<0&&(d.ncolors=-1*d.ncolors,d.cmap=Math.max(1,d.cmap)),(d.cmap<0||d.cmap>h.Mc.colormap.length)&&(d.cmode===2?d.cmap=2:d.cmap=1),s.colormap(f,h.Mc.colormap[d.cmap].colors,d.ncolors)}function et(i){var e=i._Gx,d=i._Mx,f=e.aretx.toString();e.iabsc===1?s.message(d,"INDEX = "+f):e.iabsc===2?s.message(d,"1/X = "+f):s.message(d,"X = "+f)}function tt(i){var e=i._Gx,d=i._Mx;if(e.lyr.length>0){var f=e.lyr[0].hcb;f&&(f.class===1&&(f.xunits===1||f.xunits===4)?s.message(d,"Time = "+h.sec2tod(f.timecode+e.retx),!0):f.class===2&&(f.yunits===1||f.yunits===4)?s.message(d,"Time = "+h.sec2tod(f.timecode+e.rety),!0):s.message(d,"Time = UNK"))}}function it(i){var e=i._Gx,d=i._Mx,f=e.arety.toString();e.iabsc===2?s.message(d,"1/Y = "+f):s.message(d,"Y = "+f)}function n(i){var e=i._Gx,d=i._Mx;if(e.zmin!==void 0&&e.zmax!==void 0){var f;if(e.lyr.length===1){var w=e.lyr[0].get_z(e.retx,e.rety);w!==void 0&&(f="Z = "+w.toString())}else f=null;f&&s.message(d,f)}}function o(i,e){var d=i._Mx;s.removeEventListener(d,"mousedown",i.onmousedown,!1),s.menu(d,{title:"SCROLLBAR",refresh:function(){i.refresh()},finalize:function(){s.addEventListener(d,"mousedown",i.onmousedown,!1),i.refresh()},items:[{text:"Expand Range",handler:function(){je(i,s.SB_EXPAND,e)}},{text:"Shrink Range",handler:function(){je(i,s.SB_SHRINK,e)}},{text:"Expand Full",handler:function(){je(i,s.SB_FULL,e)}}]})}function m(i){var e=i._Gx,d=i._Mx;s.removeEventListener(d,"mousedown",i.onmousedown,!1);for(var f={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:e.cntrls===-2,handler:function(){i.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:e.cntrls===-1,handler:function(){i.change_settings({xcnt:-1})}},{text:"Off",checked:e.cntrls===0,handler:function(){i.change_settings({xcnt:0})}},{text:"LM Click",checked:e.cntrls===1,handler:function(){i.change_settings({xcnt:1})}},{text:"Continuous",checked:e.cntrls===2,handler:function(){i.change_settings({xcnt:2})}}]}},w={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:e.cmode===1,handler:function(){i.change_settings({cmode:1})}},{text:"Phase",checked:e.cmode===2,handler:function(){i.change_settings({cmode:2})}},{text:"Real",checked:e.cmode===3,handler:function(){i.change_settings({cmode:3})}},{text:"Imaginary",checked:e.cmode===4,handler:function(){i.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:e.cmode===5,handler:function(){i.change_settings({cmode:5})}},{text:"10*Log10",checked:e.cmode===6,handler:function(){i.change_settings({cmode:6})}},{text:"20*Log10",checked:e.cmode===7,handler:function(){i.change_settings({cmode:7})}}]}},b={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",checked:e.autoy===0,handler:function(){e.autoy=0;var X=function(){pe(i,"Y Axis Max:",s.floatValidator,function(W){parseFloat(W)!==d.stk[d.level].ymax?(W===""&&(W=0),Xe(i,d.stk[d.level].ymin,parseFloat(W),"Y")):i.refresh()},d.stk[d.level].ymax,void 0,void 0,void 0)};pe(i,"Y Axis Min:",s.floatValidator,function(W){parseFloat(W)!==d.stk[d.level].ymin?(W===""&&(W=0),Xe(i,parseFloat(W),d.stk[d.level].ymax,"Y")):i.refresh()},d.stk[d.level].ymin,void 0,void 0,X)}},{text:"Min Auto",checked:e.autoy===1,handler:function(){e.autoy=1}},{text:"Max Auto",checked:e.autoy===2,handler:function(){e.autoy=2}},{text:"Full Auto",checked:e.autoy===3,handler:function(){e.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:e.autox===0,handler:function(){e.autox=0;var X=function(){pe(i,"X Axis Max:",s.floatValidator,function(W){parseFloat(W)!==d.stk[d.level].xmax?(W===""&&(W=0),Xe(i,d.stk[d.level].xmin,parseFloat(W),"X")):i.refresh()},d.stk[d.level].xmax,void 0,void 0,void 0)};pe(i,"X Axis Min:",s.floatValidator,function(W){parseFloat(W)!==d.stk[d.level].xmin?(W===""&&(W=0),Xe(i,parseFloat(W),d.stk[d.level].xmax,"X")):i.refresh()},d.stk[d.level].xmin,void 0,void 0,X)}},{text:"Min Auto",checked:e.autox===1,handler:function(){e.autox=1}},{text:"Max Auto",checked:e.autox===2,handler:function(){e.autox=2}},{text:"Full Auto",checked:e.autox===3,handler:function(){e.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",checked:e.autoz===0,handler:function(){e.autoz=0;var X=function(){pe(i,"Z Axis Max:",s.floatValidator,function(W){var de=parseFloat(W);de!==e.zmax&&(W===""&&(de=0),i.change_settings({zmax:de}))},e.zmax,void 0,void 0,void 0)};pe(i,"Z Axis Min:",s.floatValidator,function(W){var de=parseFloat(W);de!==e.zmin&&(W===""&&(de=0),i.change_settings({zmin:de}))},e.zmin,void 0,void 0,X)}},{text:"Min Auto",checked:e.autoz===1,handler:function(){i.change_settings({autoz:1})}},{text:"Max Auto",checked:e.autoz===2,handler:function(){i.change_settings({autoz:2})}},{text:"Full Auto",checked:e.autoz===3,handler:function(){i.change_settings({autoz:3})}}]}},M={text:"Grid",handler:function(){i.change_settings({grid:!e.grid})}},O={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:e.all,style:"checkbox",handler:function(){i.change_settings({all:!e.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:e.cntrls===-2,handler:function(){i.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:e.cntrls===-1,handler:function(){i.change_settings({xcnt:-1})}},{text:"Off",checked:e.cntrls===0,handler:function(){i.change_settings({xcnt:0})}},{text:"LM Click",checked:e.cntrls===1,handler:function(){i.change_settings({xcnt:1})}},{text:"Continuous",checked:e.cntrls===2,handler:function(){i.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:e.default_rubberbox_action==="zoom",handler:function(){e.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:e.default_rubberbox_action==="select",handler:function(){e.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:e.default_rubberbox_action===null,handler:function(){e.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:e.default_rightclick_rubberbox_action==="zoom",handler:function(){e.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:e.default_rightclick_rubberbox_action==="select",handler:function(){e.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:e.default_rightclick_rubberbox_action===null,handler:function(){e.default_rightclick_rubberbox_action=null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:e.default_rubberbox_mode==="box",handler:function(){e.default_rubberbox_mode="box"}},{text:"Horizontal",checked:e.default_rubberbox_mode==="horizontal",handler:function(){e.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:e.default_rubberbox_mode==="vertical",handler:function(){e.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!e.cross,handler:function(){e.cross=!1}},{text:"On",checked:e.cross===!0,handler:function(){e.cross=!0}},{text:"Horizontal",checked:e.cross==="horizontal",handler:function(){e.cross="horizontal"}},{text:"Vertical",checked:e.cross==="vertical",handler:function(){e.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:e.wheelscroll_mode_natural,style:"checkbox",handler:function(){i.change_settings({wheelscroll_mode_natural:!e.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:e.cross,style:"checkbox",handler:function(){i.change_settings({cross:!e.cross})}},{text:"GRID",checked:e.grid,style:"checkbox",handler:function(){i.change_settings({grid:!e.grid})}},{text:"INDEX Mode",checked:e.index,style:"checkbox",handler:function(){i.change_settings({index:!e.index})}},{text:"LEGEND",checked:e.legend,style:"checkbox",handler:function(){i.change_settings({legend:!e.legend})}},{text:"PAN Scrollbars",checked:e.pan,style:"checkbox",handler:function(){i.change_settings({pan:!e.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:e.plab===23,handler:function(){i.change_settings({phunits:"R"})}},{text:"Degrees",checked:e.plab===24,handler:function(){i.change_settings({phunits:"D"})}},{text:"Cycles",checked:e.plab===25,handler:function(){i.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:e.specs,style:"checkbox",handler:function(){i.change_settings({specs:!e.specs})}},{text:"P-Cuts",checked:e.p_cuts,style:"checkbox",handler:function(){i.change_settings({p_cuts:!e.p_cuts})}},{text:"Large Colorbar",checked:e.lg_colorbar,style:"checkbox",handler:function(){i.change_settings({lg_colorbar:!e.lg_colorbar})}},{text:"XDIVisions...",handler:function(){var X=function(W){var de=s.intValidator(W),Ge=h.trunc(d.width/2);return de.valid&&W>Ge?{valid:!1,reason:"Exceeds maximum number of divisions ("+Ge+")."}:de};pe(i,"X Divisions:",X,function(W){parseFloat(W)!==e.xdiv&&(W===""&&(W=1),e.xdiv=parseFloat(W)),i.refresh()},e.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){var X=function(W){console.log("The value is "+W);var de=s.intValidator(W);return de};pe(i,"X Units:",X,function(W){parseFloat(W)!==e.xlab&&(W<0&&(W=0),e.xlab=parseFloat(W)),i.refresh()},e.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){var X=function(W){var de=s.intValidator(W),Ge=h.trunc(d.height/2);return de.valid&&W>Ge?{valid:!1,reason:"Exceeds maximum number of divisions ("+Ge+")."}:de};pe(i,"Y Divisions:",X,function(W){parseFloat(W)!==e.ydiv&&(W===""&&(W=1),e.ydiv=parseFloat(W)),i.refresh()},e.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:d.origin===4,style:"checkbox",handler:function(){i.change_settings({yinv:d.origin!==4})}},{text:"YLABel...",handler:function(){var X=function(W){var de=s.intValidator(W);return de};pe(i,"Y Units:",X,function(W){parseFloat(W)!==e.ylab&&(W<0&&(W=0),e.ylab=parseFloat(W)),i.refresh()},e.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:e.show_x_axis,style:"checkbox",handler:function(){i.change_settings({show_x_axis:!e.show_x_axis})}},{text:"Y-axis",checked:e.show_y_axis,style:"checkbox",handler:function(){i.change_settings({show_y_axis:!e.show_y_axis})}},{text:"Readout",checked:e.show_readout,style:"checkbox",handler:function(){i.change_settings({show_readout:!e.show_readout})}},{text:"Invert Colors",checked:d.xi,style:"checkbox",handler:function(){s.invertbgfg(d)}}]}},q={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},ee=function(X){i.change_settings({cmap:this.cmap})},re=0;re<h.Mc.colormap.length;re++){var he={text:h.Mc.colormap[re].name,cmap:re,checked:e.cmap===re,handler:ee};q.menu.items.push(he)}var le=function(X){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var W=1;if(X!==void 0)W=Math.abs(i._Gx.lyr[X].thick);else{if(e.lyr.length===0)return;W=Math.abs(i._Gx.lyr[0].thick);for(var de=0;de<e.lyr.length;de++)if(W!==Math.abs(i._Gx.lyr[de].thick)){W=1;break}}pe(i,"Line thickness:",s.intValidator,function(Ge){if(X!==void 0)i._Gx.lyr[X].line=3,i._Gx.lyr[X].thick=-1*Ge,i._Gx.lyr[X].symbol=0;else for(var Re=0;Re<e.lyr.length;Re++)i._Gx.lyr[Re].line=3,i._Gx.lyr[Re].thick=-1*Ge,i._Gx.lyr[Re].symbol=0},W)}},{text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:X!==void 0?i._Gx.lyr[X].color==="red":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="red";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="red"}},{text:"Pink",checked:X!==void 0?i._Gx.lyr[X].color==="pink":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="pink";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="pink"}},{text:"Hot Pink",checked:X!==void 0?i._Gx.lyr[X].color==="#ff009e":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="#ff009e";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="#ff009e"}},{text:"Orange",checked:X!==void 0?i._Gx.lyr[X].color==="orange":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="orange";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="orange"}},{text:"Yellow",checked:X!==void 0?i._Gx.lyr[X].color==="yellow":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="yellow";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="yellow"}},{text:"Lime Green",checked:X!==void 0?i._Gx.lyr[X].color==="#80f741":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="#80f741";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="#80f741"}},{text:"Green",checked:X!==void 0?i._Gx.lyr[X].color==="green":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="green";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="green"}},{text:"Blue",checked:X!==void 0?i._Gx.lyr[X].color==="blue":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="blue";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="blue"}},{text:"Purple",checked:X!==void 0?i._Gx.lyr[X].color==="purple":void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].color="purple";else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].color="purple"}},{text:"Custom Hexcode",handler:function(){pe(i,"Color code (requires #):",s.hexValidator,function(W){if(X!==void 0)i._Gx.lyr[X].color=W;else for(var de=0;de<e.lyr.length;X++)i._Gx.lyr[de].color=W},void 0,void 0,void 0,void 0)}}]}},{text:"Dots...",handler:function(){var W=3;if(X!==void 0)W=Math.abs(i._Gx.lyr[X].radius);else{if(e.lyr.length===0)return;var de;for(de=0;de<e.lyr.length;de++)if(W!==Math.abs(i._Gx.lyr[de].radius)){W=3;break}}pe(i,"Radius/Shape:",s.intValidator,function(Ge){var Re,Ve;if(Ge<0?(Re=3,Ve=Math.abs(Ge)):Ge>0?(Re=2,Ve=Ge):(Re=1,Ve=0),X!==void 0)i._Gx.lyr[X].line=0,i._Gx.lyr[X].radius=Ve,i._Gx.lyr[X].symbol=Re;else{var Qe;for(Qe=0;Qe<e.lyr.length;Qe++)i._Gx.lyr[Qe].line=0,i._Gx.lyr[Qe].radius=Ve,i._Gx.lyr[Qe].symbol=Re}},W)}},{text:"Radius...",handler:function(){var W=3;if(X!==void 0)W=Math.abs(i._Gx.lyr[X].radius);else{if(e.lyr.length===0)return;for(var de=0;de<e.lyr.length;de++)if(W!==Math.abs(i._Gx.lyr[de].radius)){W=3;break}}pe(i,"Radius:",s.intValidator,function(Ge){var Re,Ve;if(Ge<0?Ve=Math.abs(Ge):Ge>0?Ve=Ge:(Re=1,Ve=0),X!==void 0)i._Gx.lyr[X].line=0,i._Gx.lyr[X].radius=Ve;else for(var Qe=0;Qe<e.lyr.length;Qe++)i._Gx.lyr[Qe].line=0,i._Gx.lyr[Qe].radius=Ve},W)}},{text:"Solid...",handler:function(){var W=1;if(X!==void 0)W=Math.abs(i._Gx.lyr[X].thick);else{if(e.lyr.length===0)return;W=Math.abs(i._Gx.lyr[0].thick);var de;for(de=0;de<e.lyr.length;de++)if(W!==Math.abs(i._Gx.lyr[de].thick)){W=1;break}}pe(i,"Line thickness:",s.intValidator,function(Ge){if(X!==void 0)i._Gx.lyr[X].line=3,i._Gx.lyr[X].thick=Ge,i._Gx.lyr[X].symbol=0;else{var Re;for(Re=0;Re<e.lyr.length;Re++)i._Gx.lyr[Re].line=3,i._Gx.lyr[Re].thick=Ge,i._Gx.lyr[Re].symbol=0}},W)}},{text:"Toggle",style:X!==void 0?"checkbox":void 0,checked:X!==void 0?i._Gx.lyr[X].display:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].display=!i._Gx.lyr[X].display;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].display=!i._Gx.lyr[W].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:X!==void 0?i._Gx.lyr[X].symbol===0:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=0,i._Gx.lyr[X].symbol=0;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=0,i._Gx.lyr[W].symbol=0}},{text:"Pixels",checked:X!==void 0?i._Gx.lyr[X].symbol===1:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=1,i._Gx.lyr[X].symbol=1;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=1,i._Gx.lyr[W].symbol=1}},{text:"Circles",checked:X!==void 0?i._Gx.lyr[X].symbol===2:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=4,i._Gx.lyr[X].symbol=2;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=4,i._Gx.lyr[W].symbol=2}},{text:"Squares",checked:X!==void 0?i._Gx.lyr[X].symbol===3:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=4,i._Gx.lyr[X].symbol=3;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=4,i._Gx.lyr[W].symbol=3}},{text:"Plusses",checked:X!==void 0?i._Gx.lyr[X].symbol===4:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=4,i._Gx.lyr[X].symbol=4;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=4,i._Gx.lyr[W].symbol=4}},{text:"X's",checked:X!==void 0?i._Gx.lyr[X].symbol===5:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=4,i._Gx.lyr[X].symbol=5;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=4,i._Gx.lyr[W].symbol=5}},{text:"Triangles",checked:X!==void 0?i._Gx.lyr[X].symbol===6:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=6,i._Gx.lyr[X].symbol=6;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=6,i._Gx.lyr[W].symbol=6}},{text:"Downward Triangles",checked:X!==void 0?i._Gx.lyr[X].symbol===7:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].radius=6,i._Gx.lyr[X].symbol=7;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].radius=6,i._Gx.lyr[W].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:X!==void 0?i._Gx.lyr[X].line===0:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].line=0;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].line=0}},{text:"Verticals",checked:X!==void 0?i._Gx.lyr[X].line===1:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].line=1;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].line=1}},{text:"Horizontals",checked:X!==void 0?i._Gx.lyr[X].line===2:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].line=2;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].line=2}},{text:"Connecting",checked:X!==void 0?i._Gx.lyr[X].line===3:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].line=3;else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[W].line=3}}]}},{text:"Thickness...",handler:function(){var W=1;X!==void 0&&(W=i._Gx.lyr[X].thick),pe(i,"Thickness",s.intValidator,function(de){if(de===""&&(de=1),de=Math.max(0,de),X!==void 0)i._Gx.lyr[X].thick=de;else for(var Ge=0;Ge<e.lyr.length;Ge++)i._Gx.lyr[Ge].thick=de},W,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var W=1;X!==void 0&&(W=i._Gx.lyr[X].opacity),pe(i,"Opacity:",s.floatValidator,function(de){if(de===""&&(de=1),de=Math.max(0,de),de=Math.min(1,de),X!==void 0)i._Gx.lyr[X].opacity=de;else for(var Ge=0;Ge<e.lyr.length;Ge++)i._Gx.lyr[Ge].opacity=de},W,void 0,void 0,void 0)}},{text:"XCompression...",menu:{title:"XCOMPRESSION",items:[{text:"Retain Current"},{text:"Smoothing",checked:X!==void 0?i._Gx.lyr[X].xcompression===0:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].change_settings({xcmp:0});else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[X].change_settings({xcmp:0})}},{text:"Average",checked:X!==void 0?i._Gx.lyr[X].xcompression===1:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].change_settings({xcmp:1});else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[X].change_settings({xcmp:1})}},{text:"Minimum",checked:X!==void 0?i._Gx.lyr[X].xcompression===2:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].change_settings({xcmp:2});else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[X].change_settings({xcmp:2})}},{text:"Maximum",checked:X!==void 0?i._Gx.lyr[X].xcompression===3:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].change_settings({xcmp:3});else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[X].change_settings({xcmp:3})}},{text:"First",checked:X!==void 0?i._Gx.lyr[X].xcompression===4:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].change_settings({xcmp:4});else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[X].change_settings({xcmp:4})}},{text:"Max (Abs)",checked:X!==void 0?i._Gx.lyr[X].xcompression===5:void 0,handler:function(){if(X!==void 0)i._Gx.lyr[X].change_settings({xcmp:5});else for(var W=0;W<e.lyr.length;W++)i._Gx.lyr[X].change_settings({xcmp:5})}}]}}]}},K={text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){i.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){je(i,s.SB_EXPAND,"YPAN")}},{text:"Shrink Range",handler:function(){je(i,s.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){je(i,s.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){je(i,s.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){je(i,s.SB_SHRINK,"XPAN")}},{text:"Expand Full",handler:function(){je(i,s.SB_FULL,"XPAN")}}]}},j={text:"Traces...",menu:function(){var X=i._Gx,W={title:"TRACE",items:[]};W.items.push({text:"All",menu:le()});for(var de=0;de<X.lyr.length;de++)W.items.push({text:X.lyr[de].name,menu:le(de)});return W}},xe={text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var X=i._Gx,W={title:"DEOVERLAY",items:[]};W.items.push({text:"Deoverlay All",handler:function(){i.deoverlay()}});for(var de=0;de<X.lyr.length;de++){var Ge=function(Re){return function(){i.deoverlay(Re)}}(de);W.items.push({text:X.lyr[de].name,handler:Ge})}return W}}]}},ce={text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var X=[],W=0;W<e.plugins.length;W++){var de=e.plugins[W];de.impl.menu&&(typeof de.impl.menu=="function"?X.push(de.impl.menu()):X.push(de.impl.menu))}return X}()}},Ne={text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var X=i._Mx.active_canvas.toDataURL("image/png"),W=document.createElement("a");W.href=X,W.download="SigPlot."+new Date().getTime()+".png",W.display="none",document.body.appendChild(W),W.click(),document.body.removeChild(W)}},{text:"JPG",handler:function(){var X=i._Mx.active_canvas.toDataURL("image/jpg"),W=document.createElement("a");W.href=X,W.download="SigPlot."+new Date().getTime()+".jpg",W.display="none",document.body.appendChild(W),W.click(),document.body.removeChild(W)}},{text:"SVG",handler:function(){var X=i._Mx.active_canvas.toDataURL("image/svg"),W=document.createElement("a");W.href=X,W.download="SigPlot."+new Date().getTime()+".svg",W.display="none",document.body.appendChild(W),W.click(),document.body.removeChild(W)}}]}},Oe={text:"Refresh"},Te={text:"Keypress Info",handler:function(){s.message(d,be)}},qe={text:"Exit",handler:function(){var X=document.createEvent("Event");X.initEvent("sigplotexit",!0,!0),s.dispatchEvent(d,X)}},Ye={title:"SIG-PLOT",finalize:function(){d.prompt||s.addEventListener(d,"mousedown",i.onmousedown,!1),i.refresh()},items:[Oe,f,w,b,K,M,O,q,j,xe,ce,Te,Ne,qe]};s.menu(d,Ye)}function S(i,e){var d=i._Gx,f=i._Mx;s.removeEventListener(f,"mousedown",i.onmousedown,!1);var w={text:"Dashed...",handler:function(){var K=1;if(e!==void 0)K=Math.abs(i._Gx.lyr[e].thick);else{if(d.lyr.length===0)return;K=Math.abs(i._Gx.lyr[0].thick);for(var j=0;j<d.lyr.length;j++)if(K!==Math.abs(i._Gx.lyr[j].thick)){K=1;break}}pe(i,"Line thickness:",s.intValidator,function(xe){if(e!==void 0)i._Gx.lyr[e].line=3,i._Gx.lyr[e].thick=-1*xe,i._Gx.lyr[e].symbol=0;else for(var ce=0;ce<d.lyr.length;ce++)i._Gx.lyr[ce].line=3,i._Gx.lyr[ce].thick=-1*xe,i._Gx.lyr[ce].symbol=0},K)}},b={text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:e!==void 0?i._Gx.lyr[e].color==="red":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="red";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="red"}},{text:"Pink",checked:e!==void 0?i._Gx.lyr[e].color==="pink":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="pink";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="pink"}},{text:"Hot Pink",checked:e!==void 0?i._Gx.lyr[e].color==="#ff009e":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="#ff009e";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="#ff009e"}},{text:"Orange",checked:e!==void 0?i._Gx.lyr[e].color==="orange":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="orange";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="orange"}},{text:"Yellow",checked:e!==void 0?i._Gx.lyr[e].color==="yellow":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="yellow";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="yellow"}},{text:"Lime Green",checked:e!==void 0?i._Gx.lyr[e].color==="#80f741":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="#80f741";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="#80f741"}},{text:"Green",checked:e!==void 0?i._Gx.lyr[e].color==="green":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="green";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="green"}},{text:"Blue",checked:e!==void 0?i._Gx.lyr[e].color==="blue":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="blue";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="blue"}},{text:"Purple",checked:e!==void 0?i._Gx.lyr[e].color==="purple":void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].color="purple";else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].color="purple"}},{text:"Custom Hexcode",handler:function(){pe(i,"Color code (requires #):",s.hexValidator,function(K){if(e!==void 0)i._Gx.lyr[e].color=K;else for(var j=0;j<d.lyr.length;j++)i._Gx.lyr[j].color=K},void 0,void 0,void 0,void 0)}}]}},M={text:"Solid...",handler:function(){var K=1;if(e!==void 0)K=Math.abs(i._Gx.lyr[e].thick);else{if(d.lyr.length===0)return;K=Math.abs(i._Gx.lyr[0].thick);var j;for(j=0;j<d.lyr.length;j++)if(K!==Math.abs(i._Gx.lyr[j].thick)){K=1;break}}pe(i,"Line thickness:",s.intValidator,function(xe){if(e!==void 0)i._Gx.lyr[e].line=3,i._Gx.lyr[e].thick=xe,i._Gx.lyr[e].symbol=0;else{var ce;for(ce=0;ce<d.lyr.length;ce++)i._Gx.lyr[ce].line=3,i._Gx.lyr[ce].thick=xe,i._Gx.lyr[ce].symbol=0}},K)}},O={text:"Toggle",style:e!==void 0?"checkbox":void 0,checked:e!==void 0?i._Gx.lyr[e].display:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].display=!i._Gx.lyr[e].display;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].display=!i._Gx.lyr[K].display}},q={text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:e!==void 0?i._Gx.lyr[e].symbol===0:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=0,i._Gx.lyr[e].symbol=0;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=0,i._Gx.lyr[K].symbol=0}},{text:"Pixels",checked:e!==void 0?i._Gx.lyr[e].symbol===1:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=1,i._Gx.lyr[e].symbol=1;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=1,i._Gx.lyr[K].symbol=1}},{text:"Circles",checked:e!==void 0?i._Gx.lyr[e].symbol===2:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=4,i._Gx.lyr[e].symbol=2;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=4,i._Gx.lyr[K].symbol=2}},{text:"Squares",checked:e!==void 0?i._Gx.lyr[e].symbol===3:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=4,i._Gx.lyr[e].symbol=3;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=4,i._Gx.lyr[K].symbol=3}},{text:"Plusses",checked:e!==void 0?i._Gx.lyr[e].symbol===4:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=4,i._Gx.lyr[e].symbol=4;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=4,i._Gx.lyr[K].symbol=4}},{text:"X's",checked:e!==void 0?i._Gx.lyr[e].symbol===5:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=4,i._Gx.lyr[e].symbol=5;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=4,i._Gx.lyr[K].symbol=5}},{text:"Triangles",checked:e!==void 0?i._Gx.lyr[e].symbol===6:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=6,i._Gx.lyr[e].symbol=6;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=6,i._Gx.lyr[K].symbol=6}},{text:"Downward Triangles",checked:e!==void 0?i._Gx.lyr[e].symbol===7:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].radius=6,i._Gx.lyr[e].symbol=7;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].radius=6,i._Gx.lyr[K].symbol=7}}]}},ee={text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:e!==void 0?i._Gx.lyr[e].line===0:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].line=0;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].line=0}},{text:"Verticals",checked:e!==void 0?i._Gx.lyr[e].line===1:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].line=1;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].line=1}},{text:"Horizontals",checked:e!==void 0?i._Gx.lyr[e].line===2:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].line=2;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].line=2}},{text:"Connecting",checked:e!==void 0?i._Gx.lyr[e].line===3:void 0,handler:function(){if(e!==void 0)i._Gx.lyr[e].line=3;else for(var K=0;K<d.lyr.length;K++)i._Gx.lyr[K].line=3}}]}},re={text:"Thickness...",handler:function(){var K=1;e!==void 0&&(K=i._Gx.lyr[e].thick),pe(i,"Thickness",s.intValidator,function(j){if(j===""&&(j=1),j=Math.max(0,j),e!==void 0)i._Gx.lyr[e].thick=j;else for(var xe=0;xe<d.lyr.length;xe++)i._Gx.lyr[xe].thick=j},K,void 0,void 0,void 0)}},he={text:"Opacity...",handler:function(){var K=1;e!==void 0&&(K=i._Gx.lyr[e].opacity),pe(i,"Opacity:",s.floatValidator,function(j){if(j===""&&(j=1),j=Math.max(0,j),j=Math.min(1,j),e!==void 0)i._Gx.lyr[e].opacity=j;else for(var xe=0;xe<d.lyr.length;xe++)i._Gx.lyr[xe].opacity=j},K,void 0,void 0,void 0)}},le={title:d.lyr[e].name,finalize:function(){f.prompt||s.addEventListener(f,"mousedown",i.onmousedown,!1),i.refresh()},items:[w,b,M,O,q,ee,re,he]};s.menu(f,le)}function C(i,e){return function(d,f,w,b,M,O,q){var ee=i._Gx,re=i._Mx,he=Math.min(f,b),le=Math.min(w,M),K=Math.abs(b-f),j=Math.abs(M-w),xe=!1;if(d.which===e&&(q==="horizontal"?xe=K>2:q==="vertical"?xe=j>2:xe=K>2&&j>2),!xe)i.mouseup(d);else if(O===void 0||O==="zoom")i.pixel_zoom(f,w,b,M),i.refresh();else if(O==="select"){var ce=document.createEvent("Event");ce.initEvent("mtag",!0,!0),ce.originalEvent=d;var Ne=He(i,he,le),Oe=He(i,he+K,le+j);if(ce.x=Ne.x,ce.y=Ne.y,ce.xpos=he,ce.ypos=le,ce.w=Math.abs(Oe.x-Ne.x),ce.h=Math.abs(Oe.y-Ne.y),ce.wpxl=K,ce.hpxl=j,ce.shift=d.shiftKey,s.dispatchEvent(re,ce)){var Te=document.createEvent("Event");Te.initEvent("mclick",!0,!0),Te.originalEvent=d,Te.xpos=ce.xpos,Te.ypos=ce.ypos,Te.x=ce.x,Te.y=ce.y,Te.which=d.which}}}}function v(i,e){var d=i._Mx,f=i._Gx;e.xlab||(e.xlab=0),e.ylab||(e.ylab=0),e.useDomMenu&&(d.useDomMenu=!0),e.xlab=h.unit_lookup(e.xlab),e.ylab=h.unit_lookup(e.ylab),f.xmin=e.xmin===void 0?0:e.xmin,f.xmax=e.xmax===void 0?0:e.xmax;var w=e.xmin!==void 0,b=e.xmax!==void 0,M;if(typeof e.cmode=="number")switch(e.cmode){case 1:M="MA";break;case 2:M="PH";break;case 3:M="RE";break;case 4:M="IM";break;case 5:M="IR";break;case 6:M="LO";break;case 7:M="L2";break;default:throw new RangeError("Invalid cmode value")}else M=e.cmode===void 0?"":e.cmode.toUpperCase();var O=e.line===void 0?3:e.line;f.ylab=e.ylab,f.ylabel=e.ylabel,f.ymin=e.ymin===void 0?0:e.ymin,f.ymax=e.ymax===void 0?0:e.ymax;var q=e.ymin!==void 0,ee=e.ymax!==void 0;f.zmin=e.zmin,f.zmax=e.zmax;var re=e.zmin!==void 0,he=e.zmax!==void 0;e.colors!==void 0&&s.setbgfg(d,e.colors.bg,e.colors.fg,d.xi),e.xi&&s.invertbgfg(d),f.forcelab=e.forcelab===void 0?!0:e.forcelab,f.all=e.all===void 0?!1:e.all,f.expand=e.expand===void 0?!1:e.expand,f.xlab=e.xlab,f.xlabel=e.xlabel,f.segment=e.segment===void 0?!1:e.segment,f.plab=24;var le=e.phunits===void 0?"D":e.phunits;le[0]==="R"?f.plab=23:le[0]==="C"&&(f.plab=25),f.xdiv=e.xdiv===void 0?5:e.xdiv,f.ydiv=e.ydiv===void 0?5:e.ydiv,f.xcompression=e.xcmp||0,f.rasterDownscale=e.downscale||0,f.rasterSmoothing=e.smoothing||!1,d.origin=1,e.yinv&&(d.origin=4),f.pmt=e.pmt===void 0?1:e.pmt,f.bufmax=e.bufmax===void 0?32768:e.bufmax,f.sections=e.nsec===void 0?0:e.nsec,f.anno_type=e.anno_type===void 0?0:e.anno_type,f.xfmt=e.xfmt===void 0?"":e.xfmt,f.yfmt=e.yfmt===void 0?"":e.yfmt,f.index=e.index===void 0?!1:e.index;var K=f.index||M.slice(0,2)==="IN";K&&(w&&f.xmin===1&&(w=!1),b&&f.xmin===1&&(b=!1)),f.xdata=!1,f.note=e.note||"",f.hold=0,f.always_show_marker=e.always_show_marker||!1,h.vstype("D"),e.inputs||k(i,!1);var j=M;if(f.lyr.length>0&&f.lyr[0].cx?f.cmode=1:f.cmode=3,(j==="MA"||j==="INMA"||j==="ABMA"||j==="__MA"||j==="MAGNITUDE")&&(f.cmode=1),(j==="PH"||j==="INPH"||j==="ABPH"||j==="__PH"||j==="PHASE")&&(f.cmode=2),(j==="RE"||j==="INRE"||j==="ABRE"||j==="__RE"||j==="REAL")&&(f.cmode=3),(j==="IM"||j==="INIM"||j==="ABIM"||j==="__IM"||j==="IMAGINARY")&&(f.cmode=4),(j==="LO"||j==="D1"||j==="INLO"||j==="IND1"||j==="ABIM"||j==="ABD1"||j==="__LO"||j==="__D1"||j==="10*LOG10")&&(f.cmode=6),(j==="L2"||j==="D2"||j==="INL2"||j==="IND2"||j==="ABLO"||j==="ABD2"||j==="__L2"||j==="__D2"||j==="20*LOG10")&&(f.cmode=7),(j==="RI"||j==="IR"||j==="INRI"||j==="INIR"||j==="ABRI"||j==="ABIR"||j==="__RI"||j==="__IR"||j==="IMAG/REAL"||j==="REAL/IMAG")&&(f.index?h.log.error("Imag/Real mode not permitted in INDEX mode"):f.cmode=5),f.basemode=f.cmode,i.change_settings({cmode:f.cmode}),f.dbmin=1e-20,f.cmode>=6){var xe=10;f.cmode===7&&(xe=20),j[0]==="L"||j[0]==="1"||j[0]==="2"?(f.lyr.length>0&&f.lyr[0].cx?(f.ymin=Math.max(f.ymin,1e-10),f.ymax=Math.max(f.ymax,1e-10)):(f.ymin=Math.max(f.ymin,1e-20),f.ymax=Math.max(f.ymax,1e-20)),f.ymin=h.log10(f.ymin)*xe,f.ymax=h.log10(f.ymax)*xe):f.lyr.length>0&&f.lyr[0].cx?(f.ymin=Math.max(-18*xe,f.ymin),f.ymax=Math.max(-18*xe,f.ymax),f.dbmin=1e-37):Math.min(f.ymin,f.ymax)<-20*xe&&(f.ymin=Math.max(-37*xe,f.ymin),f.ymax=Math.max(-37*xe,f.ymax),f.dbmin=Math.pow(10,Math.min(f.ymin,f.ymax)/xe))}switch(d.level=0,K&&!f.index&&(w&&(f.xmin=f.xstart+f.xdelta*(f.xmin-1)),w&&(f.xmax=f.xstart+f.xdelta*(f.xmax-1))),f.xmult=e.xmult,f.ymult=e.xmult,e.autox){case"none":e.autox=-1;break;case"min":e.autox=1;break;case"max":e.autox=2;break;case"full":e.autox=3;break}switch(f.autox=e.autox===void 0?-1:e.autox,f.autox<0&&(f.autox=0,w||(f.autox+=1),b||(f.autox+=2)),e.autoy){case"none":e.autoy=-1;break;case"min":e.autoy=1;break;case"max":e.autoy=2;break;case"full":e.autoy=3;break}switch(f.autoy=e.autoy===void 0?-1:e.autoy,f.autoy<0&&(f.autoy=0,q||(f.autoy+=1),ee||(f.autoy+=2)),e.autoz){case"none":e.autoz=-1;break;case"min":e.autoz=1;break;case"max":e.autoz=2;break;case"full":e.autoz=3;break}f.autoz=e.autoz===void 0?-1:e.autoz,f.autoz<0&&(f.autoz=0,re||(f.autoz+=1),he||(f.autoz+=2)),f.autol=e.autol===void 0?-1:e.autol,w||(f.xmin=void 0),b||(f.xmax=void 0),Le(i,{get_data:!0},f.xmin,f.xmax,f.xlab,f.ylab),w||(f.xmin=d.stk[0].xmin),b||(f.xmax=d.stk[0].xmax),q||(f.ymin=d.stk[0].ymin),ee||(f.ymax=d.stk[0].ymax),f.xmin>f.xmax&&(d.stk[0].xmin=f.xmax,f.xmax=f.xmin,f.xmin=d.stk[0].xmin),f.ymin>f.ymax&&(d.stk[0].ymin=f.ymax,f.ymax=f.ymin,f.ymin=d.stk[0].ymin),d.stk[0].xmin=f.xmin,d.stk[0].xmax=f.xmax,d.stk[0].ymin=f.ymin,d.stk[0].ymax=f.ymax,f.panxmin=Math.min(f.panxmin,f.xmin),f.panxmax=Math.max(f.panxmax,f.xmax),f.panymin=Math.min(f.panymin,f.ymin),f.panymax=Math.max(f.panymax,f.ymax),f.panxpad=e.panxpad,f.panypad=e.panypad;var ce=f.panxmax-f.panxmin,Ne=f.panymax-f.panymin;f.panxmin-=h.pad(ce,f.panxpad),f.panxmax+=h.pad(ce,f.panxpad),f.panymin-=h.pad(Ne,f.panypad),f.panymax+=h.pad(Ne,f.panypad),f.xmin=d.stk[0].xmin,f.ymin=d.stk[0].ymin,e.font_family&&(d.font_family=e.font_family),e.font_width&&(d.font_width=e.font_width),e.font_scaled&&(d.font_scaled=!0);var Oe=d.font_width;d.font_scaled&&(Oe=Math.min(d.font_width,d.width/64)),s.set_font(d,Oe),f.ncolors=e.ncolors===void 0?500:e.ncolors,f.cmap=null,e.cmap!==void 0?f.cmap=e.cmap:f.cmap=e.xc===void 0?-1:e.xc,Ze(i,f.cmap),e.xcnt==="leftmouse"?f.cntrls=1:e.xcnt==="continuous"?f.cntrls=2:f.cntrls=e.xcnt===void 0?1:e.xcnt,f.default_rubberbox_mode=e.rubberbox_mode===void 0?"box":e.rubberbox_mode,f.default_rubberbox_action=e.rubberbox_action===void 0?"zoom":e.rubberbox_action,f.default_rightclick_rubberbox_mode=e.rightclick_rubberbox_mode===void 0?"box":e.rightclick_rubberbox_mode,f.default_rightclick_rubberbox_action=e.rightclick_rubberbox_action===void 0?null:e.rightclick_rubberbox_action,f.cross=e.cross===void 0?!1:e.cross,f.grid=e.nogrid===void 0?!0:!e.nogrid,f.fillStyle=e.fillStyle,f.gridBackground=e.gridBackground,f.gridStyle=e.gridStyle,f.wheelZoom=e.wheelZoom,f.wheelZoomPercent=e.wheelZoomPercent,f.legend=e.legend===void 0?!1:e.legend,f.no_legend_button=e.no_legend_button===void 0?!1:e.no_legend_button,f.legendBtnLocation=null,f.pan=e.nopan===void 0?!0:!e.nopan,f.nomenu=e.nomenu===void 0?!1:e.nomenu,f.modmode=0,f.modlayer=-1,f.modsource=0,f.modified=e.mod&&f.lyr.length>0,f.nmark=0,f.iabsc=0,f.index&&(f.iabsc=1),f.specs=!e.nospecs,f.scroll_time_interval=e.scroll_time_interval===void 0?f.scroll_time_interval:e.scroll_time_interval,f.autohide_readout=e.autohide_readout,f.autohide_panbars=e.autohide_panbars,f.x_scrollbar_location=e.x_scrollbar_location,f.specs?(f.show_x_axis=!e.noxaxis,f.show_y_axis=!e.noyaxis,f.show_readout=!e.noreadout,f.show_x_axis||f.show_y_axis||f.show_readout?f.specs=!0:f.specs=!1):(f.show_x_axis=!1,f.show_y_axis=!1,f.show_readout=!1),f.hide_note=e.hide_note||!1,f.xmrk=0,f.ymrk=0,e.nodragdrop||(s.addEventListener(d,"dragover",function(Te){Te.preventDefault()},!1),s.addEventListener(d,"drop",function(Te){return function(qe){var Ye=qe.dataTransfer.files;Ye.length>0&&(qe.preventDefault(),Te.load_files(Ye))}}(i),!1)),f.initialized=!0}function k(i,e){var d=i._Gx,f=i._Mx,w=i.get_hcb_by_lyrn(0);e?(w?(d.xstart=w.xstart,d.xdelta=w.xdelta):(d.xstart=0,d.xdelta=1),f.origin=1,d.autoz&1&&(d.zmin=void 0),d.autoz&2&&(d.zmax=void 0)):(d.xstart=0,d.xdelta=1,d.autol=-1,f.origin=1,d.autoz&1&&(d.zmin=void 0),d.autoz&2&&(d.zmax=void 0))}function A(i,e){var d=i._Mx,f=i._Gx;if(e>0){if(e>=4&&f.show_readout&&!f.hide_note){var w=f.note.length;s.text(d,d.width-f.lbtn-(w+1)*d.text_w,d.text_h,f.note)}e>=4&&fe(i),e>=1&&f.legend&&I(i)}}function z(i){for(var e=i._Gx,d=i._Mx.canvas.getContext("2d"),f,w=0;w<e.plugins.length;){var b=e.plugins[w].impl;b.refresh&&(f=e.plugins[w].canvas,f.width!==i._Mx.canvas.width&&(f.width=i._Mx.canvas.width),f.height!==i._Mx.canvas.height&&(f.height=i._Mx.canvas.height),f.height!==0&&f.width!==0&&(f.width!==i._Mx.canvas.width&&(f.width=i._Mx.canvas.width),f.height!==i._Mx.canvas.height&&(f.height=i._Mx.canvas.height),f.getContext("2d").clearRect(0,0,f.width,f.height),e.plugins[w].impl.refresh(f),d.drawImage(f,0,0))),w=w+1}}function T(i){var e=i._Mx,d=i._Gx,f=e.text_w,w=f*23,b=(d.lyr.length+1)*e.text_h,M=e.r-w,O=e.t,q={x:M+2,y:O+2,width:w-5,height:b-5};return q}function I(i){var e=i._Mx,d=i._Gx,f=e.canvas.getContext("2d"),w=0,b=0,M=0,O=0,q=0,ee=0,re=0,he=0,le=0,K=0,j=0,xe=0;ee=e.text_w,le=ee*23,K=(d.lyr.length+1)*e.text_h,re=e.r-le,he=e.t;var ce=T(i),Ne=98,Oe=0,Te=0;for(b=0;b<d.lyr.length;b++){var qe=f.measureText(d.lyr[b].name).width;qe>Oe&&(Oe=qe)}for(Oe>Ne&&(Te=Oe-Ne,ce.width+=Te,ce.x-=Te),f.strokeStyle=e.fg,f.fillStyle=e.bg,f.fillRect(ce.x,ce.y,ce.width,ce.height),f.strokeRect(ce.x,ce.y,ce.width,ce.height),b=0;b<d.lyr.length;b++)M=Math.floor(re+4*ee),O=Math.floor(he+b*e.text_h+e.text_h),b===d.modlayer&&s.text(e,re+ee-Te,O+Math.floor(e.text_w/2),"**"),d.lyr[b].display&&(d.lyr[b]instanceof c?(xe=d.lyr[b].color,d.lyr[b].line>0&&(j=h.sign(Math.min(ee,Math.abs(d.lyr[b].thick)),d.lyr[b].thick),j<0||j===s.L_dashed?s.draw_line(e,xe,M-Te,O-3,M+ee*2-Te,O-3,Math.abs(j),{mode:"dashed",on:4,off:4}):s.draw_line(e,xe,M-Te,O-3,M+ee*2-Te,O-3,Math.abs(j))),d.lyr[b].symbol>0&&(d.lyr[b].radius<0?j=-h.trunc(.6*ee):j=Math.min(d.lyr[b].radius,h.trunc(.6*ee)),s.draw_symbol(e,xe,M+ee-Te,O-3,d.lyr[b].symbol,j))):d.lyr[b]instanceof _&&s.legend_colorbar(e,re+2*ee-Te,O-e.text_h/2,ee*4,e.text_h/2)),M=M+ee*3,O=O+e.text_h*.3,s.text(e,M-Te,O,d.lyr[b].name)}function D(i){var e=i._Gx;if(!e.note){var d=i.get_hcb_by_lyrn(0);if(y.size(e.HCB_UUID)===0)e.note="";else if(d&&d.plotnote===void 0){for(var f=[],w=0;w<e.HCB.length;w++){var b=i.get_hcb_by_lyrn(w);b.file_name&&f.push(b.file_name)}e.note=f.join("|").toUpperCase()}}}function L(i){var e=i._Mx,d=i._Gx;if(!(d.zmin===void 0||d.zmax===void 0||d.x_cut_data===void 0)){var f=e.r-e.l;d.x_box_x=Math.floor(e.l-2)+.5,d.x_box_y=Math.floor(e.b+25)+.5,d.x_box_w=Math.floor(f+4),d.x_box_h=Math.floor(5*e.text_h+20),s.draw_box(e,e.fg,d.x_box_x,d.x_box_y,d.x_box_w,d.x_box_h,1,e.bg);var w=e.active_canvas.getContext("2d");w.beginPath(),w.lineWidth=1,w.strokeStyle=e.fg;for(var b=null,M=null,O=0;O<i._Gx.x_cut_data.length;O++){var q=i._Gx.x_cut_data[O];q=Math.min(Math.max(q,d.zmin),d.zmax);var ee=i._Gx.x_box_h/(d.zmax-d.zmin),re=Math.round((q-d.zmin)*ee),he=i._Gx.x_box_w/i._Gx.x_cut_data.length,le=Math.round(O*he),K=i._Gx.x_box_x+le,j=i._Gx.x_box_y+i._Gx.x_box_h-re;O===0?w.moveTo(K,j):(K!==b||j!==M)&&(w.lineTo(K,j),b=K,M=j)}w.stroke()}}function Y(i){var e=i._Mx,d=i._Gx;if(!(d.zmin===void 0||d.zmax===void 0||d.y_cut_data===void 0)){var f=e.b-e.t;d.y_box_x=Math.floor(e.r+25)+.5,d.y_box_y=Math.floor(e.t-2)+.5,d.y_box_w=Math.floor(5*e.text_w+20),d.y_box_h=Math.floor(f+2),d.lg_colorbar&&(d.y_box_x+=100),s.draw_box(e,e.fg,d.y_box_x,d.y_box_y,d.y_box_w,d.y_box_h,1,e.bg);var w=e.active_canvas.getContext("2d");w.beginPath(),w.lineWidth=1,w.strokeStyle=e.fg;for(var b=null,M=null,O=0;O<i._Gx.y_cut_data.length;O++){var q=i._Gx.y_cut_data[O];q=Math.min(Math.max(q,d.zmin),d.zmax);var ee=i._Gx.y_box_w/(d.zmax-d.zmin),re=Math.round((q-d.zmin)*ee),he=i._Gx.y_box_h/i._Gx.y_cut_data.length,le=Math.round(O*he),K=i._Gx.y_box_x+re,j=i._Gx.y_box_y+le;O===0?w.moveTo(K,j):(K!==b||j!==M)&&(w.lineTo(K,j),b=K,M=j)}w.stroke()}}function ie(i){let e=i._Gx,d=i._Mx;for(var f=e.lyr,w=0;w<f.length;w++)ne(i,f[w]);if(e.autol>1&&e.panymin!==void 0&&e.panymax!==void 0){var b=1/Math.max(e.autol,1);e.panymin=e.panymin*b+d.stk[0].ymin*(1-b),e.panymax=e.panymax*b+d.stk[0].ymax*(1-b),(e.autoy&1)!==0&&(d.stk[0].ymin=e.panymin),(e.autoy&2)!==0&&(d.stk[0].ymax=e.panymax)}}function ne(i,e){var d=i._Mx,f=i._Gx;if(!e.display||f.hold!==0)return;let w=e.draw();w&&f.autol!==0&&ge(i,w);var b=document.createEvent("Event");b.initEvent("lyrdraw",!0,!0),b.index=e.index,b.name=e.name,b.layer=e,s.dispatchEvent(d,b)}function E(i,e){var d=i._Gx,f=i._Mx,w=document.createEvent("Event");w.initEvent("lyrdel",!0,!0),w.index=e,w.name=d.lyr[e].name,w.layer=d.lyr[e];var b=s.dispatchEvent(f,w);if(!!b){if(d.lyr[e].ybufn=0,d.lyr[e].ybuf=null,e<d.lyr.length-1)for(var M=d.lyr[e],O=e;O<d.lyr.length-1;O++)d.lyr[O]=d.lyr[O+1];d.lyr.length-=1,y.size(d.HCB_UUID)>0&&(d.panxmin=1,d.panxmax=-1,d.panymin=1,d.panymax=-1)}}function N(i){var e=i._Gx,d=i._Mx;if(e.lyr[0].hcb.class===2){var f=d.b-d.t,w=d.r-d.l,b=e.lyr[0].yframe,M=e.lyr[0].xframe;if(e.p_cuts){if(d.xpos>=d.l&&d.xpos<=d.r&&e.p_cuts_xpos!==d.xpos){var O=0,q=0;e.lyr[0].yCutData&&(e.y_cut_data=e.lyr[0].yCutData(He(i,d.xpos,0).x,!0),Y(i),e.lyr[0].hcb.pipe||(e.p_cuts_xpos=d.xpos))}if(d.ypos>=d.t&&d.ypos<=d.b&&e.p_cuts_ypos!==d.ypos){var ee=0,re=0,he=0,q=0;e.lyr[0].xCutData&&(e.x_cut_data=e.lyr[0].xCutData(He(i,0,d.ypos).y,!0),L(i),e.lyr[0].hcb.pipe||(e.p_cuts_ypos=d.ypos))}}}}function R(i){var e=i._Gx,d=i._Mx;e.cross&&((e.cross==="vertical"||e.cross===!0)&&d.xpos>=d.l&&d.xpos<=d.r&&e.cross_xpos!==d.xpos&&(e.cross_xpos!==void 0&&s.rubberline(d,e.cross_xpos,d.t,e.cross_xpos,d.b),s.rubberline(d,d.xpos,d.t,d.xpos,d.b),e.cross_xpos=d.xpos),(e.cross==="horizontal"||e.cross===!0)&&d.ypos>=d.t&&d.ypos<=d.b&&e.cross_ypos!==d.ypos&&(e.cross_ypos!==void 0&&s.rubberline(d,d.l,e.cross_ypos,d.r,e.cross_ypos),s.rubberline(d,d.l,d.ypos,d.r,d.ypos),e.cross_ypos=d.ypos))}function V(i){var e=i._Gx,d=i._Mx;if(e.xmrk!==null&&e.ymrk!==null){var f=s.real_to_pixel(d,e.xmrk,e.ymrk);if(e.lyr.length>0&&e.lyr[0].hcb.class===1){if(f.clipped)return}else if(e.lyr.length>0&&e.lyr[0].hcb.class===2&&(f.clipped_x||!f.clipped_y))return;var w=d.active_canvas.getContext("2d");w.beginPath(),w.strokeStyle=d.xwfg,w.fillStyle=d.xwfg,w.arc(f.x,f.y,2,0,360),w.stroke(),w.textBaseline="alphabetic",w.textAlign="left",w.fillStyle=d.fg,w.font=d.font.font;var b="x:"+s.format_g(e.xmrk,6,3,!0);w.fillText(b,f.x+5,f.y-5),b="y:"+s.format_g(e.ymrk,6,3,!0),w.fillText(b,f.x+5,f.y-5+d.text_h)}}function te(i,e){var d=i._Gx,f=i._Mx,w=d.plab;if(e==="R"?w=23:e==="D"&&(w=24),e==="C"&&(w=25),w!==d.plab){var b=[Math.PI,180,.5],M=b[w-23]/b[d.plab-23];if(d.plab=w,d.cmode===2){for(var O=0;O<=f.level;O++)f.stk[O].ymin=f.stk[O].ymin*M,f.stk[O].ymax=f.stk[O].ymax*M,f.stk[O].yscl=f.stk[O].yscl*M;d.panymin=d.panymin*M,d.panymax=d.panymax*M,i.refresh()}}}function Q(i,e){var d=i._Mx,f=i._Gx;f.xdata=!1;for(var w=0;w<f.lyr.length;w++)e===5?f.lyr[w].xdata=!0:f.lyr[w].xdata=!1,f.lyr[w].xdata&&(f.xdata=!0);if(e!==f.cmode){if(e===5&&f.index)h.log.error("Imag/Real mode not permitted in INDEX mode");else if(f.lyr.length<=0)f.cmode=e,Ce(i);else if(e>0){var b=f.cmode;f.cmode=e;var M=f.autox,O=f.autoy;if(f.autox=3,f.autoy=3,e===5||b===5)f.panxmin=1,f.panxmax=-1,f.panymin=1,f.panymax=-1,d.level=0,e===f.basemode?(d.stk[0].xmin=f.xmin,d.stk[0].xmax=f.xmax,d.stk[0].ymin=f.ymin,d.stk[0].ymax=f.ymax):e===5||f.basemode===5?Le(i,{get_data:!0}):(d.stk[0].xmin=f.xmin,d.stk[0].xmax=f.xmax,Le(i,{get_data:!0},f.xmin,f.xmax));else{y.size(f.HCB_UUID)===0&&e===f.basemode?(f.panymin=1,f.panymax=-1,d.stk[0].ymin=f.ymin,d.stk[0].ymax=f.ymax):Le(i,{},d.stk[d.level].xmin,d.stk[d.level].xmax);for(var w=1;w<=d.level;w++)d.stk[w].ymin=d.stk[0].ymin,d.stk[w].ymax=d.stk[0].ymax}f.autox=M,f.autoy=O,i.refresh()}}}function fe(i){var e,d=i._Mx,f=i._Gx;if(!(!f.pan||d.widget)){e=d.level;var w={ps:d.stk[e].ymin,pe:d.stk[e].ymax},b=w.ps!==f.panymin||w.pe!==f.panymax;if(b=b&&d.level>0,f.autohide_panbars&&(!b||!i.mouseOnCanvas)&&!f.panning){var M=d.canvas.getContext("2d");M.fillStyle=d.bg,M.fillRect(f.pyl,d.t,f.pyl+f.pthk,d.b-d.t)}else{var O=s.scrollbar(d,0,f.pyl,f.pyl+f.pthk,d.t,d.b,w,f.panymin,f.panymax,void 0,d.scrollbar_y);d.stk[e].ymin=w.ps,d.stk[e].ymax=w.pe}if(f.pl<d.width){w={ps:d.stk[e].xmin,pe:d.stk[e].xmax};var q=w.ps!==f.panxmin||w.pe!==f.panxmax;if(q=q&&(!f.all||d.level>0),f.autohide_panbars&&(!q||!i.mouseOnCanvas)&&!f.panning){var M=d.canvas.getContext("2d");M.fillStyle=d.bg,M.fillRect(f.pl,f.pt-1,f.pr-f.pl,f.pthk+4)}else{var O=s.scrollbar(d,0,f.pl,f.pr,f.pt,f.pt+f.pthk,w,f.panxmin,f.panxmax,void 0,d.scrollbar_x);d.stk[e].xmin=w.ps,d.stk[e].xmax=w.pe}}}}function me(i,e,d,f){var w=i._Mx,b=i._Gx,M,O,q,ee,re,he,le,K,j,xe,ce,Ne=new s.SCROLLBAR,Oe=new s.SCROLLBAR,Te=!1;if(O=w.level,b.panmode>0?(Ne.flag=11,Oe.flag=11):(Ne.flag=-12,Oe.flag=-12),d===0&&(Ne.action=0,Oe.action=0),xe=!0,e.substring(0,1)==="Y"){if(le=w.stk[O].ymin,K=w.stk[O].ymax,j=K-le,e==="YPAN"){ce=w.scrollbar_y;var qe={ps:le,pe:K};M=s.scrollbar(w,Oe,b.pyl,b.pyl+b.pthk,w.t,w.b,qe,b.panymin,b.panymax,f,ce),le=qe.ps,K=qe.pe,Oe.action!==0&&(q=s.scroll(w,Oe,s.XW_UPDATE,void 0,ce)),xe=!1}else e==="YCENTER"&&(le=le-j*(w.ypos-(w.t+w.b)/2)/(w.b-w.t),K=le+j,xe=!1);if(le!==w.stk[O].ymin||K!==w.stk[O].ymax){w.stk[O].ymin=le,w.stk[O].ymax=K,b.cmode===b.basemode&&w.level===1&&(b.ymin=Math.min(b.ymin,le),b.ymax=Math.max(b.ymax,K)),i.inPan=!0;var Ye=document.createEvent("Event");Ye.initEvent("ypan",!0,!0),Ye.level=w.level,Ye.xmin=w.stk[w.level].xmin,Ye.ymin=w.stk[w.level].ymin,Ye.xmax=w.stk[w.level].xmax,Ye.ymax=w.stk[w.level].ymax,s.dispatchEvent(w,Ye),i.inPan=!1,i.refresh(),Te=!0}}else{if(ee=w.stk[O].xmin,re=w.stk[O].xmax,he=re-ee,e==="XPAN"){ce=w.scrollbar_x;var qe={ps:ee,pe:re};M=s.scrollbar(w,Ne,b.pl,b.pr,b.pt,b.pt+b.pthk,qe,b.panxmin,b.panxmax,f,ce),ee=qe.ps,re=qe.pe,Ne.action!==0&&(q=s.scroll(w,Ne,s.XW_UPDATE,void 0,ce)),xe=!1}else e==="XCENTER"&&(ee=ee+he*(w.xpos-(w.l+w.r)/2)/(w.r-w.l),ee!==w.stk[O].xmin&&(re=ee+he),xe=!1);if(w.stk[O].xmin!==ee||w.stk[O].xmax!==re){w.stk[O].xmin=ee,w.stk[O].xmax=re,!b.xdata&&w.level===1&&(b.xmin=w.stk[1].xmin,b.xmax=w.stk[1].xmax),i.inPan=!0;var Ye=document.createEvent("Event");Ye.initEvent("xpan",!0,!0),Ye.level=w.level,Ye.xmin=w.stk[w.level].xmin,Ye.ymin=w.stk[w.level].ymin,Ye.xmax=w.stk[w.level].xmax,Ye.ymax=w.stk[w.level].ymax,s.dispatchEvent(w,Ye),i.inPan=!1,i.refresh(),Te=!0}}return Te}function we(i,e,d){var f=i._Mx,w=i._Gx,b,M,O;if(e==="XPAN")O=i._Mx.scrollbar_x;else if(e==="YPAN")O=i._Mx.scrollbar_y;else throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";O.flag=-12;var q=f.level;e==="XPAN"?(b=f.stk[q].xmin,M=f.stk[q].xmax):e==="YPAN"?(b=f.stk[q].ymin,M=f.stk[q].ymax):(b=void 0,M=void 0);var ee={min:b,max:M};Se(f,w,O,e,ee,d),b=ee.min,M=ee.max,O.smin=b,O.srange=M-b,s.redrawScrollbar(O,f,void 0),Xe(i,O.smin,O.smin+O.srange,e.slice(0,1)),i.inPan=!0;var re=document.createEvent("Event");e==="XPAN"?re.initEvent("xpan",!0,!0):e==="YPAN"&&re.initEvent("ypan",!0,!0),re.level=f.level,re.xmin=f.stk[f.level].xmin,re.ymin=f.stk[f.level].ymin,re.xmax=f.stk[f.level].xmax,re.ymax=f.stk[f.level].ymax,s.dispatchEvent(f,re),i.inPan=!1,O.action=0,i.refresh()}function Se(i,e,d,f,w,b){if(d.action=s.SB_DRAG,f==="YPAN"){var M=i.scrollbar_y.trange/i.scrollbar_y.h;d.origin===4&&(M*=-1);var O=b.screenY-e.panning.ypos,q=O*M;e.panning.ymin-q<e.panymin?(w.max=e.panymin+(w.max-w.min),w.min=e.panymin):e.panning.ymax-q>e.panymax?(w.min=e.panymax-(w.max-w.min),w.max=e.panymax):(w.min=e.panning.ymin-q,w.max=e.panning.ymax-q)}else if(f==="XPAN"){var M=i.scrollbar_x.trange/i.scrollbar_x.w;d.origin===3&&(M*=-1);var O=b.screenX-e.panning.xpos,q=O*M;e.panning.xmin+q<e.panxmin?(w.max=e.panxmin+(w.max-w.min),w.min=e.panxmin):e.panning.xmax+q>e.panxmax?(w.min=e.panxmax-(w.max-w.min),w.max=e.panxmax):(w.min=e.panning.xmin+q,w.max=e.panning.xmax+q)}}function pe(i,e,d,f,w,b,M,O){var q=i._Mx;if(q.prompt)throw"Prompt already exists! Can only have one prompt at a time!";s.disableListeners(q),i.disable_listeners();var ee=function(le,K){return function(j){K(j),s.enableListeners(q),le.enable_listeners(),le.refresh(),O!==void 0&&O()}},re=function(){i.refresh()},he=5e3;try{s.prompt(q,e,d,ee(i,f),re,w,b,M,he)}catch(le){console.log("ERROR: Failed to set up prompt due to: "+le)}}function ke(i){var e=i._Mx;s.addEventListener(e,"mousedown",i.onmousedown,!1),s.addEventListener(e,"mousemove",i.throttledOnMouseMove,!1),document.addEventListener("mouseup",i.docMouseUp,!1),s.addEventListener(e,"mouseup",i.mouseup,!1),window.addEventListener("mousedown",i.dragMouseDownHandler,!1),window.addEventListener("mousemove",i.throttledDragOnMouseMove,!1),window.addEventListener("mouseup",i.dragMouseUpHandler,!1),window.addEventListener("wheel",i.wheelHandler,!1),window.addEventListener("mousewheel",i.wheelHandler,!1),window.addEventListener("DOMMouseScroll",i.wheelHandler,!1),window.addEventListener("keypress",i.onkeypress,!1)}function _e(i){var e=i._Mx;s.removeEventListener(e,"mousedown",i.onmousedown,!1),s.removeEventListener(e,"mousemove",i.throttledOnMouseMove,!1),document.removeEventListener("mouseup",i.docMouseUp,!1),s.removeEventListener(e,"mouseup",i.mouseup,!1),window.removeEventListener("mousedown",i.dragMouseDownHandler,!1),window.removeEventListener("mousemove",i.throttledDragOnMouseMove,!1),window.removeEventListener("mouseup",i.dragMouseUpHandler,!1),window.removeEventListener("wheel",i.wheelHandler,!1),window.removeEventListener("mousewheel",i.wheelHandler,!1),window.removeEventListener("DOMMouseScroll",i.wheelHandler,!1),window.removeEventListener("keypress",i.onkeypress,!1)}function Ce(i){var e=i._Mx,d=i._Gx,f=e.canvas.getContext("2d");if(d.sections!==0||(d.isec=0),e.warpbox){var w=He(i,e.warpbox.xo,e.warpbox.yo),b=He(i,e.warpbox.xl,e.warpbox.yl);d.aretx=w.x,d.arety=w.y,d.dretx=b.x-w.x,d.drety=b.y-w.y}else d.aretx=d.retx,d.arety=d.rety,d.dretx=d.retx-d.xmrk,d.drety=d.rety-d.ymrk;if(d.cmode===5&&d.iabsc===1&&(d.iabsc=2),d.iabsc===1?(d.aretx=Math.round((d.aretx-d.xstart)/d.xdelta),d.index||(d.aretx+=1),d.dretx=Math.round(d.dretx/d.xdelta)):d.iabsc===2&&(d.aretx!==0&&(d.aretx=1/d.aretx),d.arety!==0&&(d.arety=1/d.arety),d.dretx!==0&&(d.dretx=1/d.dretx),d.drety!==0&&(d.drety=1/d.drety)),!(!d.show_readout||e.widget)){f.fillStyle=e.bg;var M=Math.floor(e.height-2.5*e.text_h);f.fillRect(e.text_w,M-1,49*e.text_w,M+1.5*e.text_h),M=Math.floor(e.height-.5*e.text_h);var O=Math.max(d.pr+e.text_w,e.width-e.text_w*2);if(f.fillStyle=e.bg,f.fillRect(O,M-e.text_h,e.text_w,e.text_h),!(d.autohide_readout&&!i.mouseOnCanvas&&!d.panning)){var q,ee,re,he;d.iabsc===0&&d.ylab===4?(ee=(h.sec2tspec(d.arety)+"                ").substring(0,16),he=(h.sec2tspec(d.drety,"delta")+"                ").substring(0,16)):(ee=s.format_g(d.arety,16,9,!0),he=s.format_g(d.drety,16,9)),d.iabsc===0&&d.xlab===4?(q=(h.sec2tspec(d.aretx)+"                ").substring(0,16),re=(h.sec2tspec(d.dretx,"delta")+"                ").substring(0,16)):(q=s.format_g(d.aretx,16,9,!0),re=s.format_g(d.dretx,16,9));var le="y: "+ee+" dy: "+he+" L="+e.level+" "+ve[d.cmode-1],K="x: "+q+" dx: "+re+" "+Ke[d.iabsc];d.iabsc===3&&(d.dretx===0?le=le.substr(0,20)+"sl: Inf             "+le.substr(40,le.length):le=le.substr(0,20)+"sl: "+s.format_g(d.drety/d.dretx,16,9)+le.substr(40,le.length)),M=Math.floor(e.height-1.5*e.text_h),s.text(e,e.text_w,M,le),M=Math.floor(e.height-.5*e.text_h),s.text(e,e.text_w,M,K),s.LEGACY_RENDER&&O<e.width&&(d.cntrls>0?s.text(e,O,M,"C"):s.text(e,O,M," "));var j=d.lyr.some(function(_t){return _t instanceof _});if(j){var xe=0,ce=0,Ne=0,Oe=0;if(d.lg_colorbar){var Te=e.b-e.t;xe=e.r+35,ce=e.t+1/8*Te,Ne=5*e.text_w,Oe=3/4*Te;var f=e.active_canvas.getContext("2d");f.strokeStyle="rgba(124, 123, 121, 0.8)",f.fillStyle=" rgba(124, 123, 121, 0.8)";var qe=xe,Ye=ce,X=Ne,W=Oe,de=X-2,Ge=de/2,Re=qe+(X-de)/2,Ve=Ye-10;f.beginPath(),f.moveTo(Re,Ve),f.lineTo(Re+de,Ve),f.lineTo(Re+1/2*de,Ve-Ge),f.lineTo(Re,Ve),f.stroke(),f.fill();var Qe=Ve+W+20;f.beginPath(),f.moveTo(Re,Qe),f.lineTo(Re+de,Qe),f.lineTo(Re+1/2*de,Qe+Ge),f.lineTo(Re,Qe),f.stroke(),f.fill(),d.cbb_top_x1=Re,d.cbb_top_y1=Ve,d.cbb_bot_x1=Re,d.cbb_bot_y1=Qe,d.cbb_width=de,d.cbb_height=Ge}else xe=49*e.text_w-3,ce=e.height-e.text_h*2.5,Ne=e.text_w,Oe=e.text_h*2;s.colorbar(e,xe,ce,Ne,Oe)}d.p_cuts&&d.lyr.length===1&&d.lyr[0].hcb.class===2&&(Y(i),L(i))}}}function Le(i,e,d,f,w,b){let M=i._Mx,O=i._Gx;O.panxmin=void 0,O.panxmax=void 0,O.panymin=void 0,O.panymax=void 0;let q=d,ee=f,re=q===void 0,he=ee===void 0;if(O.lyr.length===0)O.panxmin=-1,O.panxmax=1,O.panymin=-1,O.panymax=1;else{w===void 0&&(O.xlab=O.lyr[0].xlab),b===void 0&&(O.ylab=O.lyr[0].ylab);for(var le=0;le<O.lyr.length;le++){if(O.lyr[le].display===!1)continue;re?q=O.lyr[le].xmin:q=d,he?ee=O.lyr[le].xmax:ee=f,O.xlab!==O.lyr[le].xlab&&(O.xlab=0),O.ylab!==O.lyr[le].ylab&&(O.ylab=0);let Oe=O.lyr[le].get_pan_bounds();ge(i,Oe)}}var K=O.panxmax-O.panxmin;if(K<0&&(O.panxmax=O.panxmin,O.panxmin=O.panxmax+K,K=-K),K<=1e-20&&(O.panxmin=O.panxmin-1,O.panxmax=O.panxmax+1),K=O.panxmax-O.panxmin,O.panxmin-=h.pad(K,O.panxpad),O.panxmax+=h.pad(K,O.panxpad),(O.autox&1)!==0&&re&&(M.stk[0].xmin=O.panxmin),(O.autox&2)!==0&&he&&(M.stk[0].xmax=O.panxmax,!(O.all||O.xdata))){for(var le=0;le<O.lyr.length;le++)if(O.lyr[le].display!==!1){ee=Math.min(O.lyr[le].xmax,M.stk[0].xmax);var j=Math.abs((ee-O.lyr[le].xmin)/O.lyr[le].xdelta)-O.bufmax+1;j>0&&(M.stk[0].xmax=ee-j*Math.abs(O.lyr[le].xdelta))}}if((O.autoy&1)!==0){M.stk[0].ymin=O.panymin;for(var xe=0;xe<M.stk.length;xe++)M.stk[xe].ymin===void 0&&(M.stk[xe].ymin=O.panymin)}if((O.autoy&2)!==0){M.stk[0].ymax=O.panymax;for(var ce=0;ce<M.stk.length;ce++)M.stk[ce].ymax===void 0&&(M.stk[ce].ymax=O.panymax)}if(O.panymin!==void 0&&O.panymax!==void 0){var Ne=O.panymax-O.panymin;O.panymin-=h.pad(Ne,O.panypad),O.panymax+=h.pad(Ne,O.panypad)}}function ge(i,{xmin:e,xmax:d,ymin:f,ymax:w}){var b=i._Gx,M=i._Mx;e!==void 0&&(b.panxmin===void 0?b.panxmin=e:b.panxmin=Math.min(b.panxmin,e)),d!==void 0&&(b.panxmax===void 0?b.panxmax=d:b.panxmax=Math.max(b.panxmax,d)),f!==void 0&&(b.panymin===void 0?b.panymin=f:b.panymin=Math.min(b.panymin,f)),w!==void 0&&(b.panymax===void 0?b.panymax=w:b.panymax=Math.max(b.panymax,w))}function He(i,e,d){var f=i._Gx,w=i._Mx,b=s.pixel_to_real(w,e,d);return f.index&&(b.x=b.x*f.xdelta),b}function Ue(i,e,d,f,w,b){return i>=d&&i<=d+w&&e>=f&&e<=f+b}function We(i,e,d,f,w,b,M,O){var q=[M-d,O-f],ee=[w-d,b-f],re=[i-d,e-f],he=q[0]*q[0]+q[1]*q[1],le=q[0]*ee[0]+q[1]*ee[1],K=q[0]*re[0]+q[1]*re[1],j=ee[0]*ee[0]+ee[1]*ee[1],xe=ee[0]*re[0]+ee[1]*re[1],ce=1/(he*j-le*le),Ne=(j*K-le*xe)*ce,Oe=(he*xe-le*K)*ce;return Ne>=0&&Oe>=0&&Ne+Oe<1}function ze(i,e){var d=!1,f=i._Gx,w=i._Mx,b=0,M=0;if(e===void 0){if(b=w.xpos,M=w.ypos,!i.mouseOnCanvas)return!1}else b=e.x,M=e.y;var O=" ";if(!f.pan)return!1;var q=b>w.r,ee=M<=f.pt+f.pthk+2,re=M>f.pt-2,he=M>=w.t&&M<=w.b,le=b>=f.pl&&b<=f.pr,K=f.show_readout||f.x_scrollbar_location==="bottom";if(q&&he)if(O="YPAN",f.lg_colorbar&&f.lyr[0].hcb.class===2){var j=b>w.r+100;j?d=!0:d=!1}else w.xpos=f.pyl+h.trunc(f.pthk/2),d=!0;else(K&&le&&re||!K&&le&&ee)&&(O="XPAN",w.ypos=f.pt+h.trunc(f.pthk/2),d=!0);return{inPanRegion:d,command:O}}function ft(i){var e=!1,d=i._Mx,f=d.xpos,w=d.ypos,b=d.text_h,M=d.text_w,O=" ";return f<d.l-M&&w<=d.b&&w>=d.t?(O="YCENTER",e=!0):w>d.b+h.trunc(.5*M)&&w<=d.b+h.trunc(h.trunc(3*b)/2)&&f>=d.l&&f<=d.r&&(O="XCENTER",e=!0),{inCenterRegion:e,command:O}}function rt(i,e){var d,f,w;e.origin&1?(w=i.x-e.x,e.origin&2&&(w=e.w-w)):(w=i.y-e.y,e.origin<=2&&(w=e.h-w));var b=s.scroll_real2pix(e);return d=b.s1,f=b.sw,w>=d&&w<=d+f}function je(i,e,d){var f=i._Mx,w;d==="XPAN"?w=f.scrollbar_x:d==="YPAN"&&(w=f.scrollbar_y),w.action=e,w.step=.1*w.srange,w.page=9*w.step,w.scale=2,s.scroll(f,w,s.XW_COMMAND,void 0,w),Xe(i,w.smin,w.smin+w.srange,d.slice(0,1)),i.inPan=!0;var b=document.createEvent("Event");d==="XPAN"?b.initEvent("xpan",!0,!0):d==="YPAN"&&b.initEvent("ypan",!0,!0),b.level=f.level,b.xmin=f.stk[f.level].xmin,b.ymin=f.stk[f.level].ymin,b.xmax=f.stk[f.level].xmax,b.ymax=f.stk[f.level].ymax,s.dispatchEvent(f,b),i.inPan=!1}function Xe(i,e,d,f){var w=i._Mx,b=i._Gx,M=w.level;if(f==="X"){var O=e,q=d;(w.stk[M].xmin!==O||w.stk[M].xmax!==q)&&(w.stk[M].xmin=O,w.stk[M].xmax=q,!b.xdata&&w.level===1&&(b.xmin=w.stk[1].xmin,b.xmax=w.stk[1].xmax),i.refresh())}else if(f==="Y"){var ee=e,re=d;(ee!==w.stk[M].ymin||re!==w.stk[M].ymax)&&(w.stk[M].ymin=ee,w.stk[M].ymax=re,b.cmode===b.basemode&&w.level===1&&(b.ymin=Math.min(b.ymin,ee),b.ymax=Math.max(b.ymax,re)),i.refresh())}}ue.Plot=Be,ue.plugins={AccordionPlugin:B,AnnotationPlugin:Z,BoxesPlugin:oe,PlaybackControlsPlugin:ae,SliderPlugin:Ae},Mn.exports=ue})()});var At=ht(kt()),Gt=ht(Nt()),Ln=ht(An()),Vt=At.default.createContext(void 0),ni=class extends At.Component{constructor(y){super(y);this.state={}}componentDidMount(){let{options:y}=this.props;this.plot=new Ln.Plot(this.element,y),this.setState({plot:this.plot})}shouldComponentUpdate(y,u){let{height:r,width:l,options:t}=this.props,{height:a,width:h,options:s}=y;return(a!==r||h!==l)&&this.plot.checkresize(),s!==t&&this.plot.change_settings(s),!0}render(){let{height:y,width:u,display:r,styles:l,children:t}=this.props,{plot:a}=this,h=a?At.default.Children.map(t,s=>s?At.default.cloneElement(s,{plot:a}):null):null;return At.default.createElement(Vt.Provider,{value:this.plot},At.default.createElement("div",{style:{height:y,width:u,display:r,...l},ref:s=>this.element=s},h))}};lt(ni,"propTypes",{children:Gt.default.node,height:Gt.default.number,width:Gt.default.number,display:Gt.default.string,styles:Gt.default.object,options:Gt.default.object}),lt(ni,"defaultProps",{height:300,width:300,display:"inline-block",options:{all:!0,expand:!0,autol:100,autohide_panbars:!0}});var ts=ni;var Fs=ht(kt());var Cn=ht(kt()),$t=ht(Nt());var ai=class extends Cn.Component{componentWillUnmount(){this.context.remove_layer(this.layer)}render(){return!1}};lt(ai,"propTypes",{data:$t.default.arrayOf($t.default.number),options:$t.default.object,layerOptions:$t.default.object}),lt(ai,"contextType",Vt);var yt=ai;var zn=class extends yt{componentDidMount(){let{data:y,options:u,layerOptions:r}=this.props;this.layer=this.context.overlay_array(y,u,r)}shouldComponentUpdate(y,u){let{data:r,options:l,layerOptions:t}=this.props,{data:a,options:h,layerOptions:s}=y;return a!==r?this.context.reload(this.layer,a,h):h!==l?this.context.headermod(this.layer,h):s!==t&&this.context.get_layer(this.layer).change_settings(s),!0}},is=zn;var Vs=ht(kt());var Tn=class extends yt{componentDidMount(){let{options:y,data:u,layerOptions:r}=this.props;this.layer=this.context.overlay_pipe(y,r),u!==void 0&&u.length>0&&this.context.push(this.layer,u)}shouldComponentUpdate(y,u){let{data:r,options:l,layerOptions:t}=this.props,{data:a,options:h,layerOptions:s}=y;return a&&a!==r?this.context.push(this.layer,a,h):h!==l?this.context.headermod(this.layer,h):s!==t&&this.context.get_layer(this.layer).change_settings(s),!0}},rs=Tn;var Zs=ht(kt()),si=ht(Nt());var oi=class extends yt{componentDidMount(){let{href:y,onload:u,options:r}=this.props;this.layer=this.context.overlay_href(y,u,r)}shouldComponentUpdate(y,u){let{href:r,options:l}=this.props,{href:t,onload:a,options:h}=y;return t!==r?(this.context.deoverlay(this.layer),this.layer=this.context.overlay_href(t,a,h)):this.layer!==void 0&&h!==l&&this.context.get_layer(this.layer).change_settings(h),!0}};lt(oi,"propTypes",{href:si.default.string,onload:si.default.func,options:si.default.object}),lt(oi,"defaultProps",{href:"",onload:null});var ns=oi;var to=ht(kt());var Gn=class extends yt{componentDidMount(){let{data:y,layerOptions:u}=this.props;this.layer=this.context.overlay_bluefile(y,u)}shouldComponentUpdate(y,u){let{data:r,options:l,layerOptions:t}=this.props,{data:a,options:h,layerOptions:s}=y;return a!==r?this.context.reload(this.layer,a,h):h!==l?this.context.headermod(this.layer,h):s!==t&&this.context.get_layer(this.layer).change_settings(s),!0}},as=Gn;var ao=ht(kt()),li=ht(Nt());var hi=class extends yt{componentDidMount(){let{wsurl:y,overrides:u,options:r}=this.props;this.layer=this.context.overlay_websocket(y,u,r)}shouldComponentUpdate(y,u){let{wsurl:r,options:l}=this.props,{wsurl:t,overrides:a,options:h}=y;return t!==r?(this.context.deoverlay(this.layer),this.layer=this.context.overlay_websocket(t,a,h)):this.layer!==void 0&&h!==l&&this.context.get_layer(this.layer).change_settings(h),!0}};lt(hi,"propTypes",{wsurl:li.default.string,overrides:li.default.object,options:li.default.object}),lt(hi,"defaultProps",{wsurl:""});var ss=hi;var Pn=ht(kt()),In=ht(Nt());var fi=class extends Pn.Component{componentWillUnmount(){this.context.remove_plugin(this.plugin)}get plot(){let{plot:y}=this.context;return y}render(){return!1}};lt(fi,"propTypes",{pluginOptions:In.default.object}),lt(fi,"contextType",Vt);var os=fi;})();
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/**
 * @license
 * File: CanvasInput.js
 *  CanvasInput v1.0.10
 *  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  (c) 2013, Axios, Inc.
 *  Modifications made by Axios, Inc.
 *  axiosengineering.com
 *
 *  MIT License
 */
/**
 * @license
 * File: common.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */
/**
 * @license
 * File: m.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: matfile.src
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: mx.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.accordion.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.annotations.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.boxes.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.layer1d.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.layer2d.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License
 */
/**
 * @license
 * File: sigplot.layer2dSDS.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License
 */
/**
 * @license
 * File: sigplot.playback.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.plugin.js
 * Copyright (c) 2012-2019, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license
 * File: sigplot.slider.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license apache-2.0
 * @file bluefile.src
 * Copyright (c) 2012-2020, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigFile.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/**
 * @license apache-2.0
 * @file util.src
 * Copyright (c) 2012-2020, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigFile.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
//# sourceMappingURL=react-sigplot.js.map
